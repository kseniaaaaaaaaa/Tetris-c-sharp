"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[87411],{480365:(e,t,o)=>{o.d(t,{IconLiveText20h:()=>r});var r=(0,o(28178).makeIcon)("IconLiveText20h","live_text_20h","0 0 42 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 42 20" id="live_text_20h"><path d="M8 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2H9V6a1 1 0 0 0-1-1Zm7 1a1 1 0 1 1 2 0v8a1 1 0 1 1-2 0V6Zm15-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2h-3v-2h3a1 1 0 1 0 0-2h-3V7h3a1 1 0 1 0 0-2h-4Zm-8.325 9.31-2.55-7.824a.993.993 0 0 1-.117-.363L19 6.1h.005a1 1 0 1 1 1.99-.199L21 5.9l2 6.4 2-6.4h.005a1 1 0 0 1 1.99.2H27l-.008.023a.993.993 0 0 1-.118.363l-2.55 7.824a1 1 0 0 1-.95.69h-.748a1 1 0 0 1-.95-.69Z" /></symbol>',42,20,!1,void 0)},376648:(e,t,o)=>{o.d(t,{Icon20UgcChatStickerCircleFillBlackAlpha:()=>r});var r=(0,o(28178).makeIcon)("Icon20UgcChatStickerCircleFillBlackAlpha","ugc_chat_sticker_circle_fill_black_alpha_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="ugc_chat_sticker_circle_fill_black_alpha_20"><rect width="20" height="20" fill="#000" fill-opacity=".35" rx="10" /><path fill="#fff" d="M9.47 4v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.746 6.746 0 0 1-1.703-.216 12.07 12.07 0 0 1-1.896 1.34c-.115.065-.25.136-.401.21l-.159.078a.604.604 0 0 1-.802-.275.584.584 0 0 1-.017-.477 8.66 8.66 0 0 0 .225-.61c.176-.55.311-1.117.404-1.699C5.128 11.93 4.5 10.644 4.5 9.23 4.5 6.599 6.632 4.416 9.47 4Zm1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H16.5l-5.63-5.288Z" /></symbol>',20,20,!1,void 0)},773974:(e,t,o)=>{o.d(t,{Icon24VmojiOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24VmojiOutline","vmoji_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="vmoji_outline_24"><path d="M9.998 2.9a.9.9 0 0 1-.9.9A5.306 5.306 0 0 0 3.8 9.107.9.9 0 0 1 2 9.1C2.005 5.185 5.18 2 9.098 2a.9.9 0 0 1 .9.9ZM8.5 9.549a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5.956.754c.872-.445 1.878-.445 2.764.308a.766.766 0 0 1 .063 1.125.88.88 0 0 1-1.192.06l-.085-.066c-.252-.177-.477-.163-.748-.025a.977.977 0 0 0-.149.09l-.083.063a.881.881 0 0 1-1.11-.122.766.766 0 0 1 .063-1.125c.106-.09.266-.2.477-.309Zm-.1 4.692c.1-.543-.354-.995-.906-.995h-2.9c-.552 0-1.006.451-.906.995.026.138.057.26.093.347a2.442 2.442 0 0 0 1.325 1.322c.298.123.616.188.938.188a2.457 2.457 0 0 0 2.264-1.51 1.84 1.84 0 0 0 .092-.347ZM2 14.901a.9.9 0 0 1 1.8-.008A5.306 5.306 0 0 0 9.098 20.2a.9.9 0 1 1 0 1.8C5.178 22 2.005 18.815 2 14.901ZM14.002 2.9a.9.9 0 0 0 .9.9A5.306 5.306 0 0 1 20.2 9.107a.9.9 0 0 0 .9.892.91.91 0 0 0 .9-.9C21.995 5.185 18.821 2 14.902 2a.9.9 0 0 0-.9.9ZM21.1 14.001a.9.9 0 0 0-.9.892 5.306 5.306 0 0 1-5.298 5.307.9.9 0 1 0 0 1.8c3.92 0 7.093-3.185 7.098-7.099 0-.49-.41-.9-.9-.9Z" /></symbol>',24,24,!1,void 0)},513698:(e,t,o)=>{o.d(t,{Icon12Cancel:()=>r});var r=(0,o(28178).makeIcon)("Icon12Cancel","cancel_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="cancel_12"><path fill="currentColor" d="M3.525 2.464a.75.75 0 0 0-1.06 1.061L4.938 6 2.464 8.475a.75.75 0 1 0 1.061 1.06L6 7.062l2.475 2.475a.75.75 0 0 0 1.06-1.061L7.062 6l2.475-2.475a.75.75 0 1 0-1.061-1.06L6 4.938z" /></symbol>',12,12,!1,void 0)},347136:(e,t,o)=>{o.d(t,{Icon12CheckCircleFill:()=>r});var r=(0,o(28178).makeIcon)("Icon12CheckCircleFill","check_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="check_circle_fill_12"><path fill="#99a2ad" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12" /><path fill="#fff" fill-rule="evenodd" d="M8.78 3.97a.75.75 0 0 1 0 1.06L5.53 8.28a.75.75 0 0 1-1.06 0L3.22 7.03a.75.75 0 0 1 1.06-1.06l.72.72 2.72-2.72a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},583475:(e,t,o)=>{o.d(t,{Icon12ErrorCircleFill:()=>r});var r=(0,o(28178).makeIcon)("Icon12ErrorCircleFill","error_circle_fill_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="error_circle_fill_12"><path fill="#E64646" fill-rule="evenodd" d="M6 12c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6" clip-rule="evenodd" /><path fill="#fff" fill-rule="evenodd" d="M6 3a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 6 3m0 5a.75.75 0 1 0 0 1.5A.75.75 0 0 0 6 8" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},816761:(e,t,o)=>{o.d(t,{Icon12PlayCircle:()=>r});var r=(0,o(28178).makeIcon)("Icon12PlayCircle","play_circle_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="play_circle_12"><path fill-rule="evenodd" d="M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12M4.592 3.323a.4.4 0 0 0-.592.35v4.653a.4.4 0 0 0 .592.351l4.264-2.326a.4.4 0 0 0 0-.702z" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},736846:(e,t,o)=>{o.d(t,{Icon12StarCircleFillYellow:()=>r});var r=(0,o(28178).makeIcon)("Icon12StarCircleFillYellow","star_circle_fill_yellow_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="star_circle_fill_yellow_12"><linearGradient id="star_circle_fill_yellow_12_a" x1="-6" x2="6" y1="6" y2="18" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><g fill-rule="evenodd" clip-rule="evenodd"><path fill="url(#star_circle_fill_yellow_12_a)" d="M6 0a6 6 0 1 1 0 12A6 6 0 0 1 6 0m.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113" /><path fill="#fff" d="M6.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113" /></g></symbol>',12,12,!1,void 0)},298161:(e,t,o)=>{o.d(t,{Icon16CheckDoubleOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon16CheckDoubleOutline","check_double_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="check_double_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M10.782 4.721a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06 0l-2.502-2.5A.75.75 0 0 1 2.28 8.22l1.971 1.97 5.47-5.469a.75.75 0 0 1 1.06 0zm4.248 0a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 1 1-1.06-1.06l6-6a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},74106:(e,t,o)=>{o.d(t,{Icon16ChevronOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon16ChevronOutline","chevron_outline_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M4.22 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L7.69 8 4.22 4.53a.75.75 0 0 1 0-1.06" clip-rule="evenodd" /></symbol>',12,16,!1,void 0)},354819:(e,t,o)=>{o.d(t,{Icon16Education:()=>r});var r=(0,o(28178).makeIcon)("Icon16Education","education_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="education_16"><path fill="currentColor" d="M14.495 5.078 8.467 1.625a.94.94 0 0 0-.934 0L1.505 5.078a1 1 0 0 0-.385.402c-.258.492-.086 1.11.385 1.38l.995.567 5.002 2.874a1 1 0 0 0 .996 0l4.168-2.395 1.167-.668v2.996c0 .337.261.61.583.61a.597.597 0 0 0 .584-.61V5.968c0-.358-.183-.705-.505-.89" /><path fill="currentColor" d="M12.666 9.385 8.48 11.666a1 1 0 0 1-.958 0L3.333 9.382v1.055C3.334 12.713 5.448 14.5 8 14.5s4.667-1.787 4.667-4.063z" /></symbol>',16,16,!1,void 0)},277937:(e,t,o)=>{o.d(t,{Icon16MessageCross:()=>r});var r=(0,o(28178).makeIcon)("Icon16MessageCross","message_cross_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="message_cross_16"><path fill-rule="evenodd" d="M14.5 7.766C14.5 4.582 11.59 2 8 2S1.5 4.582 1.5 7.766c0 1.554.693 2.964 1.82 4q-.164.97-.994 2.54l-.126.235a.313.313 0 0 0 .117.42.3.3 0 0 0 .22.03q2.585-.665 3.692-1.675A7.3 7.3 0 0 0 8 13.531c3.59 0 6.5-2.581 6.5-5.766ZM5.721 5.372a.75.75 0 0 1 1.06 0L8 6.59l1.218-1.218a.75.75 0 0 1 1.06 1.06l-1.217 1.22 1.218 1.217a.75.75 0 0 1-1.06 1.061L8 8.712 6.782 9.93a.75.75 0 1 1-1.06-1.06l1.216-1.22-1.217-1.217a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},129041:(e,t,o)=>{o.d(t,{Icon20BrushOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon20BrushOutline","brush_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="brush_outline_20"><path fill-rule="evenodd" d="M6.667 12.493c-1.006 0-1.77.77-1.814 1.726-.064 1.352-.707 2.16-1.285 2.65.528.155 1.268.213 2.226-.072 1.903-.567 2.687-1.724 2.687-2.613 0-.897-.775-1.69-1.814-1.69ZM3.36 14.148a3.295 3.295 0 0 1 3.308-3.156c1.791 0 3.31 1.392 3.31 3.192 0 1.806-1.499 3.38-3.758 4.052-2.157.642-3.64-.025-4.348-.548a.9.9 0 0 1-.293-.353.84.84 0 0 1-.036-.614c.15-.46.637-.658.987-.938.382-.305.789-.761.83-1.635M15.702 2.001a1.61 1.61 0 0 1 2.261-.07 1.69 1.69 0 0 1 .17 2.287l-6.08 7.498a.746.746 0 0 1-1.052.108.753.753 0 0 1-.108-1.056l6.074-7.491a.185.185 0 0 0-.017-.242c-.067-.061-.133-.026-.202.04L9.745 9.783a.746.746 0 0 1-1.057-.025.753.753 0 0 1 .025-1.061z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},136161:(e,t,o)=>{o.d(t,{Icon20GiftOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon20GiftOutline","gift_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="gift_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path fill="currentColor" fill-rule="nonzero" d="M14.846 2.314c1.026 1.026 1.23 2.875-.257 4.186h.911a3 3 0 0 1 3 3v.49c0 .827-.093 1.16-.267 1.487-.174.326-.43.582-.756.756a1.9 1.9 0 0 1-.477.182v1.618c0 1.56-.162 2.126-.467 2.696a3.2 3.2 0 0 1-1.324 1.324l-.202.101c-.48.224-1.037.349-2.229.364l-5.291.002c-1.56 0-2.126-.162-2.696-.467a3.2 3.2 0 0 1-1.324-1.324l-.101-.202c-.224-.48-.349-1.037-.364-2.229L3 12.415a1.9 1.9 0 0 1-.477-.182 1.8 1.8 0 0 1-.756-.756c-.16-.299-.251-.605-.265-1.29L1.5 9.5a3 3 0 0 1 3-3h.911c-1.487-1.31-1.283-3.16-.257-4.186C6.369 1.099 8.738 1.038 10 3.569c1.262-2.531 3.631-2.47 4.846-1.255M9.25 12.499 4.5 12.5l.001 1.762.009.399c.021.604.083.924.202 1.2l.078.161q.246.462.708.708l.162.078c.33.143.724.203 1.598.211l1.991-.001zm6.251.001-4.751-.001v4.519l1.993.001.399-.009c.604-.021.924-.083 1.2-.202l.161-.078a1.7 1.7 0 0 0 .708-.708c.186-.348.267-.688.286-1.551l.004-.438zM9.159 7.999 4.5 8A1.5 1.5 0 0 0 3 9.5v.638l.007.232c.012.227.037.315.083.4a.32.32 0 0 0 .14.14c.11.059.223.085.632.09l5.387-.001.002-3L9.16 8zM15.5 8l-4.661-.001h-.09v3h5.39c.408-.004.521-.03.63-.089a.32.32 0 0 0 .141-.14c.065-.122.09-.248.09-.78V9.5A1.5 1.5 0 0 0 15.5 8M9.223 6.159c-.43-3.101-1.96-3.834-3.009-2.785C5.165 4.424 5.898 5.952 9 6.384l.257.032Zm1.554 0-.024.191.007.062.241-.029c3.101-.43 3.834-1.96 2.785-3.009-1.05-1.049-2.578-.316-3.01 2.785" /></g></symbol>',20,20,!1,void 0)},29870:(e,t,o)=>{o.d(t,{Icon20LogoClipsOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon20LogoClipsOutline","logo_clips_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="logo_clips_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.194 1.502a.85.85 0 0 1 .904.792l.25 3.8a.85.85 0 0 1-1.697.112l-.25-3.8a.85.85 0 0 1 .793-.904m5.893.181a.85.85 0 0 1 .58 1.053l-1.35 4.651a.85.85 0 0 1-1.633-.474l1.35-4.65a.85.85 0 0 1 1.053-.58m.589 7.08a.75.75 0 0 1 1.057-.082c1.48 1.268 1.767 2.88 1.767 4.07 0 2.678-2.309 5.75-6.5 5.75-3.118 0-6.504-2.219-6.504-5.75 0-.677.218-1.588.776-2.349C4.854 9.61 5.796 9 7.142 9c.387 0 1.892.13 2.784 1.915a.75.75 0 1 1-1.341.67C8.048 10.513 7.232 10.5 7.143 10.5c-.833 0-1.34.352-1.662.79a2.62 2.62 0 0 0-.485 1.462c0 2.425 2.407 4.25 5.004 4.25 3.36 0 5-2.4 5-4.25 0-.953-.223-2.058-1.243-2.932a.75.75 0 0 1-.081-1.058" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},377250:(e,t,o)=>{o.d(t,{Icon20MessageArrowRightOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon20MessageArrowRightOutline","message_arrow_right_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="message_arrow_right_outline_20"><path d="M10.25 2.5c-2.938 0-5.576 1.391-7.044 3.572a.749.749 0 1 0 1.244.836c1.171-1.738 3.327-2.91 5.8-2.91 3.775 0 6.75 2.694 6.75 5.995s-2.975 5.995-6.75 5.995c-.91 0-1.788-.156-2.6-.455a.75.75 0 0 0-.822.207c-.609.687-1.64 1.105-3.123 1.22.682-1.347 1.045-2.376 1.084-3.13a.75.75 0 0 0-.15-.49 5.8 5.8 0 0 1-.67-1.137.75.75 0 0 0-1.372.607q.275.62.665 1.183c-.082.457-.338 1.189-.896 2.292l-.24.475a1.2 1.2 0 0 0 1.164 1.736l.532-.041c1.472-.115 2.804-.51 3.768-1.361.85.26 1.745.392 2.66.392 4.435 0 8.25-3.206 8.25-7.493S14.685 2.5 10.25 2.5m-.971 3.97a.75.75 0 0 0-1.06 1.06l1.219 1.22H2.75a.75.75 0 1 0 0 1.5h6.688l-1.22 1.22a.75.75 0 1 0 1.06 1.06l2.5-2.5a.75.75 0 0 0 0-1.06l-2.5-2.5Z" /></symbol>',20,20,!1,void 0)},385228:(e,t,o)=>{o.d(t,{Icon20More:()=>r});var r=(0,o(28178).makeIcon)("Icon20More","more_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="more_20"><path fill="currentColor" d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3" /></symbol>',20,20,!1,void 0)},205461:(e,t,o)=>{o.d(t,{Icon20PauseCircle:()=>r});var r=(0,o(28178).makeIcon)("Icon20PauseCircle","pause_circle_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="pause_circle_20"><path fill="currentColor" fill-rule="evenodd" d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10M6 7.5c0-.466 0-.699.076-.883a1 1 0 0 1 .541-.54C6.801 6 7.034 6 7.5 6s.699 0 .883.076a1 1 0 0 1 .54.541C9 6.801 9 7.034 9 7.5v5c0 .466 0 .699-.076.883a1 1 0 0 1-.541.54C8.199 14 7.966 14 7.5 14s-.699 0-.883-.076a1 1 0 0 1-.54-.541C6 13.199 6 12.966 6 12.5zm5.076-.883C11 6.801 11 7.034 11 7.5v5c0 .466 0 .699.076.883a1 1 0 0 0 .541.54c.184.077.417.077.883.077s.699 0 .883-.076a1 1 0 0 0 .54-.541c.077-.184.077-.417.077-.883v-5c0-.466 0-.699-.076-.883a1 1 0 0 0-.541-.54C13.199 6 12.966 6 12.5 6s-.699 0-.883.076a1 1 0 0 0-.54.541" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},17117:(e,t,o)=>{o.d(t,{Icon20ReportOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon20ReportOutline","report_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="report_outline_20"><path d="M10.001 5.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75m-.9 8.4a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0" /><path fill-rule="evenodd" d="m17.326 14.814-2.514 2.514c-.432.433-.648.649-.9.803a2.5 2.5 0 0 1-.723.3c-.288.069-.594.069-1.205.069h-3.97c-.612 0-.918 0-1.206-.07a2.5 2.5 0 0 1-.723-.299c-.252-.154-.468-.37-.9-.803L2.67 14.814c-.432-.432-.648-.648-.802-.9a2.5 2.5 0 0 1-.3-.723c-.068-.288-.068-.593-.069-1.204V8.014c0-.611 0-.917.069-1.205a2.5 2.5 0 0 1 .3-.723c.154-.252.37-.468.803-.9L5.186 2.67c.432-.432.649-.648.9-.803a2.5 2.5 0 0 1 .723-.299c.288-.069.594-.069 1.205-.069h3.97c.611 0 .917 0 1.205.07a2.5 2.5 0 0 1 .723.298c.252.155.468.371.9.804l2.514 2.514c.432.432.648.648.803.9.137.224.238.468.3.723.068.288.068.593.068 1.205v3.972c0 .611 0 .917-.069 1.205a2.5 2.5 0 0 1-.299.723c-.155.252-.37.468-.803.9Zm-.474-1.706c-.062.101-.149.188-.321.36l-3.063 3.063c-.173.173-.26.26-.36.322a1 1 0 0 1-.29.12c-.115.027-.237.027-.482.027H7.662c-.245 0-.367 0-.482-.028a1 1 0 0 1-.29-.12c-.1-.061-.186-.148-.36-.32l-3.06-3.065c-.173-.172-.26-.259-.321-.36a1 1 0 0 1-.12-.289C3 12.704 3 12.582 3 12.338V7.663c0-.245 0-.367.027-.482a1 1 0 0 1 .12-.29c.062-.1.148-.187.321-.36l3.064-3.063c.173-.172.26-.259.36-.32a1 1 0 0 1 .29-.12C7.295 3 7.418 3 7.662 3h4.673c.245 0 .367 0 .482.028a1 1 0 0 1 .29.12c.1.061.187.148.36.32l3.063 3.063c.172.173.259.26.32.36q.084.136.12.29c.028.115.028.237.028.482v4.674c0 .245 0 .367-.027.482a1 1 0 0 1-.12.29Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},77199:(e,t,o)=>{o.d(t,{Icon20Stars:()=>r});var r=(0,o(28178).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367s-1.532 1.14-2.367 1.507c.835.367 1.717.857 2.367 1.507s1.14 1.532 1.507 2.367c.367-.835.857-1.717 1.507-2.367s1.532-1.14 2.367-1.507c-.835-.368-1.717-.857-2.367-1.507s-1.14-1.532-1.507-2.367m-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21 21 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27 27 0 0 1 .912.26q.124.037.25.078c1.317.421 2.716 1.014 3.485 1.782s1.36 2.168 1.782 3.485a21 21 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a28 28 0 0 1 .26-.912q.037-.124.078-.25c.421-1.317 1.014-2.717 1.782-3.485s2.168-1.36 3.485-1.782a21 21 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a28 28 0 0 1-.912-.26l-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21 21 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27 27 0 0 1-.26.912zM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.93 1.93 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.93 1.93 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.93 1.93 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.93 1.93 0 0 1-1.218-1.218z" /></symbol>',20,20,!1,void 0)},359251:(e,t,o)=>{o.d(t,{Icon24BookmarkOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24BookmarkOutline","bookmark_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="bookmark_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M11.083 3h1.834c1.056 0 1.903 0 2.588.056.704.057 1.316.179 1.88.466a4.8 4.8 0 0 1 2.093 2.093c.287.564.408 1.176.466 1.88C20 8.18 20 9.027 20 10.083v7.615c0 .773 0 1.414-.045 1.914-.045.494-.145 1.026-.482 1.454a2.46 2.46 0 0 1-1.896.935c-.544.007-1.027-.238-1.447-.503-.424-.268-.933-.658-1.546-1.128l-1.617-1.24c-.607-.466-.714-.526-.797-.549a.66.66 0 0 0-.34 0c-.083.022-.19.083-.797.549l-1.617 1.24c-.613.47-1.123.86-1.546 1.128-.42.265-.903.51-1.447.503a2.46 2.46 0 0 1-1.896-.936c-.337-.427-.437-.96-.482-1.453C4 19.112 4 18.47 4 17.698v-7.615c0-1.056 0-1.903.056-2.588.057-.704.179-1.316.466-1.88a4.8 4.8 0 0 1 2.093-2.093c.564-.287 1.176-.409 1.88-.466C9.18 3 10.027 3 11.083 3M8.641 4.85c-.593.048-.941.14-1.209.276a3 3 0 0 0-1.306 1.306c-.137.268-.228.616-.276 1.21-.05.603-.05 1.376-.05 2.48v7.532c0 .828 0 1.387.038 1.794.038.414.103.503.103.503a.66.66 0 0 0 .506.25s.11-.003.461-.225c.346-.218.79-.558 1.448-1.062l1.582-1.213.1-.077c.44-.338.85-.654 1.327-.782a2.45 2.45 0 0 1 1.27 0c.478.128.888.444 1.326.782l.101.077 1.582 1.213c.658.504 1.102.844 1.448 1.062.351.222.461.225.461.225a.66.66 0 0 0 .506-.25s.065-.089.103-.503c.037-.407.038-.966.038-1.794v-7.532c0-1.104 0-1.877-.05-2.48-.048-.594-.14-.942-.276-1.21a3 3 0 0 0-1.306-1.306c-.268-.137-.617-.228-1.21-.276-.603-.05-1.376-.05-2.48-.05h-1.756c-1.104 0-1.877 0-2.48.05" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},680237:(e,t,o)=>{o.d(t,{Icon24BooksOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24BooksOutline","books_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="books_outline_24"><path fill-rule="evenodd" d="M17.4 3.9H9.8c-.855 0-1.442 0-1.897.038-.445.036-.684.103-.856.19a2.1 2.1 0 0 0-.918.919c-.088.172-.155.411-.191.856C5.9 6.358 5.9 6.945 5.9 7.8v8.516c.34-.14.71-.216 1.1-.216h11.1V4.6c0-.6-.1-.7-.7-.7M4.1 7.762c0-.808 0-1.469.044-2.006.045-.556.142-1.058.381-1.527A3.9 3.9 0 0 1 6.23 2.525c.47-.239.971-.336 1.527-.381C8.293 2.1 8.954 2.1 9.762 2.1h7.668c.254 0 .496 0 .7.017.223.018.478.06.733.19a1.9 1.9 0 0 1 .83.83c.13.255.172.51.19.733.017.204.017.446.017.7v11.89c0 .504 0 .756-.098.949a.9.9 0 0 1-.393.393c-.193.098-.445.098-.949.098h-.305c-.076.322-.113.51-.131.699a4 4 0 0 0 0 .802c.018.188.055.378.131.699H19a.9.9 0 0 1 0 1.8H7A2.9 2.9 0 0 1 4.1 19zM16.312 20.1a5 5 0 0 1-.08-.523 6 6 0 0 1 0-1.154 6 6 0 0 1 .08-.523H7a1.1 1.1 0 0 0 0 2.2z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},531950:(e,t,o)=>{o.d(t,{Icon24CancelOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24CancelOutline","cancel_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="cancel_outline_24"><path fill="currentColor" d="M5.264 5.264a.9.9 0 0 1 1.272 0L12 10.727l5.464-5.463a.9.9 0 0 1 1.272 1.272L13.273 12l5.463 5.464a.9.9 0 1 1-1.272 1.272L12 13.273l-5.464 5.463a.9.9 0 1 1-1.272-1.272L10.727 12 5.264 6.536a.9.9 0 0 1 0-1.272" /></symbol>',24,24,!1,void 0)},240928:(e,t,o)=>{o.d(t,{Icon24DocumentListOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24DocumentListOutline","document_list_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_list_outline_24"><path d="M7.996 13.901a.9.9 0 0 1 .9-.9h1.2a.9.9 0 0 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m.9 2.297a.9.9 0 1 0 0 1.8h1.2a.9.9 0 0 0 0-1.8zM13 13.901a.9.9 0 0 1 .9-.9h1.2a.9.9 0 0 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m.9 2.297a.9.9 0 1 0 0 1.8h1.2a.9.9 0 0 0 0-1.8z" /><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2zM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.351.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8m3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17 17 0 0 1 13.8 5.9z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},152406:(e,t,o)=>{o.d(t,{Icon24DocumentTextOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24DocumentTextOutline","document_text_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_text_outline_24"><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2zM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.352.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8m3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17 17 0 0 1 13.8 5.9zM7.997 17.104a.9.9 0 0 1 .9-.9h3.199a.9.9 0 1 1 0 1.8H8.897a.9.9 0 0 1-.9-.9m.9-4.106a.9.9 0 1 0 0 1.8h5.197a.9.9 0 0 0 0-1.8z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},66298:(e,t,o)=>{o.d(t,{Icon24DownloadOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24DownloadOutline","download_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="download_outline_24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9m-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},641899:(e,t,o)=>{o.d(t,{Icon24FavoriteOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24FavoriteOutline","favorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="favorite_outline_24"><path fill-rule="evenodd" d="M12.554 4.694a.6.6 0 0 0-1.108 0l-1.614 3.9a.9.9 0 0 1-.774.554l-4.125.266a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.93-3.852a.9.9 0 0 1 .282-.888l3.267-2.858a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554zm-2.772-.689c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-2.856 2.5.802 3.322c.494 2.05-1.706 3.696-3.533 2.642L12 18.539l-3.022 1.744C7.15 21.337 4.95 19.69 5.445 17.64l.802-3.322-2.856-2.5c-1.611-1.41-.71-4.063 1.426-4.201l3.566-.23z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},430790:(e,t,o)=>{o.d(t,{Icon24MessageArrowRightOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24MessageArrowRightOutline","message_arrow_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="message_arrow_right_outline_24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M12.016 4.9c-3.077 0-5.702 1.444-7.065 3.5a.9.9 0 0 1-1.5-.995C5.178 4.799 8.395 3.1 12.016 3.1c5.324 0 9.884 3.729 9.884 8.607s-4.56 8.607-9.884 8.607c-1.173 0-2.3-.178-3.348-.506C7.42 20.961 5.616 21.513 3.42 21.6c-.927.036-1.598-.927-1.209-1.792.529-1.183 1.197-2.403 1.298-3.72a8 8 0 0 1-.34-.54.9.9 0 0 1 1.56-.898q.186.324.413.629a.9.9 0 0 1 .177.537c0 1.38-.54 2.684-1.099 3.92 1.714-.194 2.835-.75 3.513-1.547a.9.9 0 0 1 1.002-.26c1 .376 2.11.586 3.28.586 4.6 0 8.085-3.172 8.085-6.807S16.615 4.9 12.016 4.9" /><path d="M10.864 8.264a.9.9 0 0 1 1.272 0l2.6 2.6a.9.9 0 0 1 0 1.272l-2.6 2.6a.9.9 0 0 1-1.272-1.272l1.063-1.064H2.9a.9.9 0 1 1 0-1.8h9.027l-1.063-1.064a.9.9 0 0 1 0-1.272" /></g></symbol>',24,24,!1,void 0)},775130:(e,t,o)=>{o.d(t,{Icon24MusicOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24MusicOutline","music_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="music_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M16.716 4.105c.61-.127 1.01-.21 1.317-.246.299-.036.408-.013.457.004a.9.9 0 0 1 .485.395c.026.043.07.146.097.446.027.304.028.705.028 1.314L8.9 8.143v-.54c0-.477 0-.786.018-1.024.017-.228.046-.328.073-.39a1.1 1.1 0 0 1 .374-.46c.055-.039.147-.088.366-.15.23-.067.533-.13 1-.227zM7.1 15.1h-.2c-1.795 0-3.125.452-4.02 1.215-.903.768-1.28 1.782-1.28 2.71A3.375 3.375 0 0 0 4.975 22.4c.928 0 1.942-.377 2.71-1.28.763-.895 1.215-2.225 1.215-4.02V9.982l10.2-2.125V13.1h-.2c-1.795 0-3.125.452-4.021 1.215-.902.768-1.279 1.782-1.279 2.71a3.375 3.375 0 0 0 3.375 3.375c.928 0 1.942-.377 2.71-1.28.763-.895 1.215-2.225 1.215-4.02V6.004c0-.573 0-1.061-.035-1.457-.036-.412-.116-.824-.34-1.204a2.7 2.7 0 0 0-1.457-1.185c-.417-.141-.836-.135-1.247-.087-.395.047-.873.147-1.434.264l-.038.007-5.985 1.247-.03.007c-.429.089-.797.166-1.099.252-.32.092-.624.21-.908.41a2.9 2.9 0 0 0-.987 1.214c-.139.32-.192.642-.217.974-.023.313-.023.689-.023 1.126v.031zm8.946.585c-.473.403-.646.901-.646 1.34 0 .87.705 1.575 1.575 1.575.439 0 .937-.173 1.34-.646.408-.479.785-1.349.785-2.854v-.2h-.2c-1.505 0-2.375.377-2.854.785M3.4 19.025c0-.439.173-.937.646-1.34.479-.408 1.349-.785 2.854-.785h.2v.2c0 1.505-.377 2.375-.785 2.854-.403.473-.901.646-1.34.646-.87 0-1.575-.705-1.575-1.575" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},210162:(e,t,o)=>{o.d(t,{Icon24ShoppingCartOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24ShoppingCartOutline","shopping_cart_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="shopping_cart_outline_24"><path fill-rule="evenodd" d="M3.935 4.817a14 14 0 0 0-.94-.017H2.9a.9.9 0 0 1 0-1.8h.127c.401 0 .751 0 1.043.022.31.023.618.075.923.21a2.7 2.7 0 0 1 1.139.952c.094.138.167.28.227.427l11.586.362c.64.02 1.18.037 1.611.09.445.053.892.156 1.284.424a2.7 2.7 0 0 1 1.116 1.655c.101.465.03.917-.088 1.35-.113.42-.3.927-.522 1.527l-.511 1.387c-.495 1.345-.828 2.248-1.426 2.93a4.9 4.9 0 0 1-1.938 1.352c-.848.324-1.81.324-3.243.323H9.804c-.402 0-.752 0-1.043-.022a2.7 2.7 0 0 1-.924-.21 2.7 2.7 0 0 1-1.139-.951 2.7 2.7 0 0 1-.37-.872 15 15 0 0 1-.208-1.022L4.944 6.428a14 14 0 0 0-.183-.921c-.052-.199-.092-.273-.118-.312a.9.9 0 0 0-.38-.317c-.043-.02-.123-.046-.328-.061m2.838 1.608 1.113 6.158c.079.434.13.711.184.921.051.199.091.273.118.313a.9.9 0 0 0 .38.317c.042.019.123.045.328.06a14 14 0 0 0 .939.017h4.213c1.682 0 2.283-.014 2.78-.204a3.1 3.1 0 0 0 1.227-.855c.35-.401.571-.96 1.153-2.538l.435-1.179c.24-.649.398-1.08.487-1.412.089-.328.078-.449.067-.497a.9.9 0 0 0-.372-.552c-.04-.028-.149-.084-.486-.125-.342-.041-.8-.057-1.491-.078zM10 19.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0M16.75 21a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5" /></symbol>',24,24,!1,void 0)},427323:(e,t,o)=>{o.d(t,{Icon24SmileOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4 4 0 0 1-.976.826A5.1 5.1 0 0 1 12 17.15a5.1 5.1 0 0 1-2.727-.762 4 4 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5m-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9M3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},783844:(e,t,o)=>{o.d(t,{Icon24StickerSmileOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24StickerSmileOutline","sticker_smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="sticker_smile_outline_24"><path d="M11.295 10.25a1.256 1.256 0 0 1-1.255 1.251c-.69 0-1.248-.56-1.245-1.25C8.798 9.56 9.36 9 10.05 9s1.248.56 1.245 1.25m4.244.251c.69 0 1.25-.56 1.254-1.25A1.244 1.244 0 0 0 15.549 8c-.69 0-1.251.56-1.254 1.25a1.244 1.244 0 0 0 1.244 1.251" /><path fill-rule="evenodd" d="m11.452 21.295-.005-.025-.399.056c-.845.12-1.406.198-1.906.167a4.89 4.89 0 0 1-4.296-3.245c-.167-.472-.244-1.033-.361-1.879l-.662-4.784c-.149-1.076-.268-1.939-.308-2.644-.04-.724-.003-1.361.208-1.972a4.9 4.9 0 0 1 1.828-2.42c.53-.37 1.132-.58 1.84-.74.689-.155 1.55-.276 2.627-.427l5.096-.717c.783-.11 1.302-.183 1.765-.16a4.885 4.885 0 0 1 4.394 3.317c.148.44.22.96.328 1.742l.02.142h.002l.247 1.655q.036.245.031.483c.082.726.117 1.292.09 1.816a9.93 9.93 0 0 1-6.718 8.896c-.765.26-1.666.407-3.1.612zm5.336-16.992c-.27-.013-.607.03-1.53.16l-4.954.696c-1.124.158-1.914.27-2.522.407-.599.135-.945.278-1.202.458a3.1 3.1 0 0 0-1.156 1.53c-.103.298-.146.67-.112 1.282.035.623.143 1.413.299 2.537l.64 4.635c.139.996.194 1.36.291 1.635a3.09 3.09 0 0 0 2.718 2.053c.292.018.656-.028 1.652-.168l.17-.024.82-.116 1.603-.283c.6-.106 1-.68.893-1.28l-.236-1.324c-1.403.152-3.005.008-4.27-.857a.9.9 0 0 1 1.017-1.487c.817.559 2.008.694 3.23.534a4.41 4.41 0 0 1 3.43-3.475l1.655-.345c.48-.1.824-.499.872-.965a100 100 0 0 0-.263-1.989c-.128-.922-.178-1.258-.265-1.515a3.09 3.09 0 0 0-2.78-2.1Zm-.576 13.853a8.13 8.13 0 0 0 3.885-5.677 3 3 0 0 1-.51.155l-1.655.345a2.606 2.606 0 0 0-2.034 3.008l.271 1.52q.059.328.043.649" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},135826:(e,t,o)=>{o.d(t,{Icon24StorefrontOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20m13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66q.116.293.167.604c.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1 1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1 1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a3 3 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},25155:(e,t,o)=>{o.d(t,{Icon24UgcStickerOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon24UgcStickerOutline","ugc_sticker_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="ugc_sticker_outline_24"><path fill-rule="evenodd" d="M13.481 3.562a1.85 1.85 0 0 0-1.403-.56c-4.963.228-9.045 4.133-9.045 8.592 0 1.527.485 2.952 1.318 4.16-.04.476-.178.986-.382 1.531-.186.496-.406.973-.632 1.462q-.111.24-.223.486c-.394.865.29 1.801 1.194 1.766 2.098-.081 3.83-.6 5.035-1.69 1.002.308 2.079.474 3.199.474 4.124 0 7.977-2.28 9.295-5.631.403-1.024.008-2.063-.635-2.718zM11.2 4.9c-3.67.603-6.362 3.606-6.362 6.695 0 1.222.414 2.37 1.149 3.347.117.155.18.345.18.539 0 .86-.229 1.691-.507 2.434-.156.415-.337.83-.515 1.219 1.595-.191 2.637-.71 3.267-1.442a.9.9 0 0 1 .999-.257 9 9 0 0 0 3.132.551c3.401 0 6.37-1.81 7.484-4.182-1.345 0-2.412-.001-3.273-.071-.891-.073-1.642-.224-2.326-.572a5.9 5.9 0 0 1-2.584-2.575c-.349-.682-.5-1.43-.573-2.319-.071-.87-.071-1.949-.071-3.314zm8.04 7.105-6.236-6.358c.002 1.04.012 1.83.065 2.474.063.777.185 1.262.382 1.649a4.1 4.1 0 0 0 1.796 1.79c.387.196.874.317 1.654.38.616.05 1.366.062 2.338.065Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},366582:(e,t,o)=>{o.d(t,{Icon28AddCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28AddCircleFillBlue","add_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="add_circle_fill_blue_28"><linearGradient id="add_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#add_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M14 7a1 1 0 0 1 1 1v5h5a1 1 0 1 1 0 2h-5v5a1 1 0 1 1-2 0v-5H8a1 1 0 1 1 0-2h5V8a1 1 0 0 1 1-1" /></symbol>',28,28,!1,void 0)},62340:(e,t,o)=>{o.d(t,{Icon28ChainCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28ChainCircleFillBlue","chain_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chain_circle_fill_blue_28"><linearGradient id="chain_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#chain_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" fill-rule="evenodd" d="M13.022 16.184a.837.837 0 0 1-1.187-.001 3.86 3.86 0 0 1 0-5.419l2.618-2.643a3.77 3.77 0 0 1 5.366 0c1.261 1.274 1.557 3.033.67 4.508-.296.49-.947.47-1.326.09-.274-.276-.253-.707-.076-1.019.465-.817.24-1.683-.456-2.379a2.094 2.094 0 0 0-2.997 0l-2.611 2.636a2.143 2.143 0 0 0-.001 3.025.83.83 0 0 1 0 1.202m1.95-3.166c.833.835.832 2.19-.001 3.025L12.36 18.68a2.094 2.094 0 0 1-2.997 0c-.696-.696-.911-1.555-.447-2.371.178-.312.199-.744-.076-1.019-.379-.38-1.03-.4-1.325.09-.888 1.474-.602 3.226.659 4.5a3.77 3.77 0 0 0 5.367 0l2.617-2.643a3.86 3.86 0 0 0 0-5.419.837.837 0 0 0-1.187 0 .83.83 0 0 0 0 1.2" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},658508:(e,t,o)=>{o.d(t,{Icon28ChevronRightOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 7.5 6.5 6.5-6.5 6.5" /><path fill="currentColor" fill-rule="nonzero" d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414z" /></g></symbol>',28,28,!1,void 0)},469531:(e,t,o)=>{o.d(t,{Icon28EditCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28EditCircleFillBlue","edit_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="edit_circle_fill_blue_28"><linearGradient id="edit_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><rect width="28" height="28" fill="url(#edit_circle_fill_blue_28_a)" rx="14" /><path fill="#fff" fill-rule="evenodd" d="m14.987 9.976 3.035 3.035-5.539 5.54a5.7 5.7 0 0 1-2.375 1.426l-2.488.76a.286.286 0 0 1-.358-.358l.76-2.488a5.7 5.7 0 0 1 1.427-2.375zm4.17-2.35 1.216 1.217c.47.468.5 1.209.094 1.714l-.094.104-1.516 1.516-3.035-3.035 1.517-1.515a1.286 1.286 0 0 1 1.819 0" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},535505:(e,t,o)=>{o.d(t,{Icon28GearCircleFillGray:()=>r});var r=(0,o(28178).makeIcon)("Icon28GearCircleFillGray","gear_circle_fill_gray_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="gear_circle_fill_gray_28"><linearGradient id="gear_circle_fill_gray_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b1b6bd" /><stop offset="1" stop-color="#99a2ad" /></linearGradient><path fill="url(#gear_circle_fill_gray_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M15 6.667c.18.6.306 1.201 1.305 1.777 1.118.304 1.665.003 2.173-.337.53-.353.688-.25.9-.043l.515.515c.235.236.33.33 0 .943-.298.552-.633 1.066-.335 2.18.577 1.004 1.176 1.178 1.775 1.298.625.125.664.309.667.606v.727c0 .334 0 .467-.667.667-.6.18-1.201.306-1.777 1.305-.303 1.118-.002 1.665.337 2.173.353.53.25.688.043.9l-.515.515c-.236.235-.33.33-.943 0-.552-.298-1.066-.633-2.18-.335-1.004.577-1.178 1.176-1.298 1.775-.125.625-.309.664-.606.667h-.727c-.334 0-.467 0-.667-.667-.18-.6-.306-1.201-1.305-1.777-1.118-.303-1.665-.002-2.173.337-.53.353-.688.25-.9.043l-.515-.515c-.235-.236-.33-.33 0-.943.298-.552.634-1.066.335-2.18C7.865 15.294 7.266 15.12 6.667 15c-.625-.125-.664-.309-.667-.606v-.727c0-.334 0-.467.667-.667.6-.18 1.201-.306 1.777-1.305.304-1.118.003-1.665-.337-2.173-.353-.53-.25-.688-.043-.9l.515-.515c.236-.235.33-.33.943 0 .552.298 1.066.634 2.18.335C12.706 7.865 12.88 7.266 13 6.667c.125-.625.309-.664.606-.667h.727c.334 0 .467 0 .667.667M14 10.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6" /></symbol>',28,28,!1,void 0)},287865:(e,t,o)=>{o.d(t,{Icon28MentionCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28MentionCircleFillBlue","mention_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="mention_circle_fill_blue_28"><linearGradient id="mention_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#mention_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M13.875 21q-2.078 0-3.63-.822c-1.552-.822-1.835-1.33-2.4-2.343Q7 16.313 7 14.285v-.42q0-2.03.895-3.586a6.2 6.2 0 0 1 2.516-2.418Q12.03 7 14.143 7h.072q1.96 0 3.504.774c1.544.774 1.834 1.234 2.413 2.155Q21 11.312 21 13.06v.428q0 1.207-.398 2.125-.399.919-1.133 1.421-.734.503-1.691.503-.878 0-1.518-.354c-.64-.354-.696-.55-.81-.94h-.08q-.17.585-.739.936-.568.35-1.347.35-.788 0-1.37-.346c-.582-.346-.686-.561-.895-.992q-.313-.648-.313-1.53v-1.068q0-.848.318-1.477.317-.63.9-.976.58-.345 1.36-.345.735 0 1.258.341.524.342.693.918h.063v-.166q0-.42.264-.682t.685-.262q.412 0 .667.262c.255.262.255.402.255.682v3.42q0 .366.224.603c.224.237.343.236.581.236q.403 0 .703-.346.3-.345.466-.975.165-.63.165-1.46v-.236q0-1.338-.653-2.4a4.5 4.5 0 0 0-1.813-1.658q-1.16-.594-2.618-.594h-.08q-1.62 0-2.843.673-1.222.674-1.893 1.91c-.671 1.237-.671 1.78-.671 2.865v.306q0 1.608.644 2.807.645 1.197 1.83 1.85c1.186.652 1.718.65 2.78.65h.09q.599 0 1.414-.122.412-.052.51-.052a.73.73 0 0 1 .52.192.64.64 0 0 1 .205.49q0 .516-.582.7-.779.253-2.184.253zm-1.146-6.637q0 1.59 1.19 1.591.564 0 .855-.371.291-.372.291-1.106v-.735q0-.665-.309-1.04-.308-.377-.854-.377-.573 0-.873.407t-.3 1.176z" /></symbol>',28,28,!1,void 0)},413947:(e,t,o)=>{o.d(t,{Icon28PaletteFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28PaletteFillBlue","palette_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="palette_fill_blue_28"><linearGradient id="palette_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#palette_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" fill-rule="evenodd" d="M14.629 17.702c-.174.375-.104.768.08 1.08.503.87.777 2.218-.68 2.218C10.307 21 7 17.783 7 14c0-3.866 3.147-7 7.03-7a7.03 7.03 0 0 1 6.942 5.894c.284 2.391-1.625 4.091-3.668 4.091-.84 0-2.231-.239-2.675.717M9.75 15a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m6-3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m-4 0a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m6.5 3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},7479:(e,t,o)=>{o.d(t,{Icon28Pause:()=>r});var r=(0,o(28178).makeIcon)("Icon28Pause","pause_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="pause_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M7.3 5h3.4A1.3 1.3 0 0 1 12 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3H7.3A1.3 1.3 0 0 1 6 21.7V6.3A1.3 1.3 0 0 1 7.3 5m9 0h3.4A1.3 1.3 0 0 1 21 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3h-3.4a1.3 1.3 0 0 1-1.3-1.3V6.3A1.3 1.3 0 0 1 16.3 5" /></g></symbol>',28,28,!1,void 0)},776076:(e,t,o)=>{o.d(t,{Icon28PhoneCircleFillGreen:()=>r});var r=(0,o(28178).makeIcon)("Icon28PhoneCircleFillGreen","phone_circle_fill_green_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="phone_circle_fill_green_28"><linearGradient id="phone_circle_fill_green_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#50c750" /><stop offset="1" stop-color="#32b332" /></linearGradient><path fill="url(#phone_circle_fill_green_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M15.642 16.535c1.054-1.054 2.712-1.15 3.814-.224l.797.671c.91.766 1.002 2.145.205 3.08a2.58 2.58 0 0 1-1.707.882q-3.819.514-8.014-3.681t-3.68-8.014q.026-.3.122-.585c.149-.435.41-.822.759-1.122.936-.796 2.314-.705 3.08.205l.67.797c.928 1.101.832 2.76-.222 3.814l-.571.57a.55.55 0 0 0-.128.583q.313.854 1.59 2.131 1.28 1.28 2.132 1.592c.203.075.43.024.582-.128z" /></symbol>',28,28,!1,void 0)},957228:(e,t,o)=>{o.d(t,{Icon28PinCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28PinCircleFillBlue","pin_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="pin_circle_fill_blue_28"><linearGradient id="pin_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#pin_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="m16.235 8.109 3.657 3.663c.225.226.064.633-.263.633h-.523a.9.9 0 0 0-.633.263l-1.715 1.715a.9.9 0 0 0-.262.633v2.996c0 .554-.7.858-1.1.456l-2.301-2.3-3.57 3.57a.893.893 0 1 1-1.264-1.263L11.83 14.9l-2.29-2.29c-.391-.392-.109-1.102.456-1.102h2.995a.9.9 0 0 0 .633-.262l1.715-1.715a.9.9 0 0 0 .263-.634v-.526c0-.32.403-.495.634-.263" /></symbol>',28,28,!1,void 0)},691324:(e,t,o)=>{o.d(t,{Icon28UserCircleFillBlue:()=>r});var r=(0,o(28178).makeIcon)("Icon28UserCircleFillBlue","user_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="user_circle_fill_blue_28"><circle cx="14" cy="14" r="14" fill="url(#user_circle_fill_blue_28_a)" /><path fill="#fff" d="M16.75 11.25a2.75 2.75 0 1 0-5.5 0 2.75 2.75 0 1 0 5.5 0M8.5 18.115v.715c0 .37.3.67.67.67h9.66c.37 0 .67-.3.67-.67v-.715C19.5 15.692 15.836 15 14 15s-5.5.692-5.5 3.115" /><defs><linearGradient id="user_circle_fill_blue_28_a" x1="0" x2="28.733" y1="0" y2=".773" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF" /><stop offset="1" stop-color="#5C9CE6" /></linearGradient></defs></symbol>',28,28,!1,void 0)},996955:(e,t,o)=>{o.d(t,{Icon32Play:()=>r});var r=(0,o(28178).makeIcon)("Icon32Play","play_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="play_32"><path d="M24.948 14.001c1.154.656 1.732.984 1.925 1.412.17.374.17.8 0 1.174-.194.428-.77.756-1.925 1.412l-12.43 7.061c-1.154.656-1.732.984-2.205.935a1.47 1.47 0 0 1-1.033-.587C9 25.03 9 24.373 9 23.061V8.938c0-1.311 0-1.967.28-2.347.244-.33.62-.543 1.033-.586.473-.05 1.05.279 2.205.935z" /></symbol>',32,32,!1,void 0)},999411:(e,t,o)=>{o.d(t,{Icon56BookmarkOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon56BookmarkOutline","bookmark_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="bookmark_outline_56"><path fill="currentColor" fill-rule="evenodd" d="M25.433 5h5.134c2.744 0 4.894 0 6.623.141 1.76.144 3.215.442 4.53 1.112a11.5 11.5 0 0 1 5.027 5.026c.67 1.316.968 2.77 1.112 4.53.141 1.73.141 3.88.141 6.624v20.321c0 1.783 0 3.224-.101 4.336-.1 1.102-.317 2.18-.984 3.02A5 5 0 0 1 43.024 52c-1.072.005-2.054-.491-2.982-1.094-.936-.607-2.07-1.499-3.47-2.6l-6.433-5.06c-1.206-.948-1.476-1.124-1.718-1.19a1.6 1.6 0 0 0-.843 0c-.24.066-.51.242-1.717 1.19l-6.433 5.06c-1.4 1.101-2.534 1.993-3.47 2.6-.928.603-1.91 1.1-2.982 1.094a5 5 0 0 1-3.891-1.89c-.667-.84-.884-1.918-.984-3.02C8 45.978 8 44.536 8 42.754V22.433c0-2.743 0-4.894.141-6.623.144-1.76.442-3.215 1.112-4.53a11.5 11.5 0 0 1 5.026-5.027c1.316-.67 2.77-.968 4.53-1.112C20.54 5 22.69 5 25.434 5zm-6.379 3.131c-1.575.129-2.59.376-3.413.795a8.5 8.5 0 0 0-3.715 3.715c-.419.823-.666 1.838-.795 3.413-.13 1.592-.131 3.621-.131 6.446v20.177c0 1.878.002 3.182.089 4.141.09.986.252 1.309.345 1.426A2 2 0 0 0 12.99 49c.149 0 .503-.071 1.333-.61.808-.524 1.835-1.33 3.31-2.49l6.372-5.012.19-.15c.904-.712 1.684-1.328 2.592-1.576a4.6 4.6 0 0 1 2.424 0c.908.248 1.688.864 2.592 1.576l.19.15 6.371 5.011c1.476 1.161 2.503 1.967 3.31 2.491.83.539 1.185.61 1.334.61a2 2 0 0 0 1.557-.756c.093-.117.256-.44.345-1.426.088-.959.089-2.263.089-4.141V22.5c0-2.825-.001-4.854-.131-6.446-.129-1.575-.376-2.59-.795-3.413a8.5 8.5 0 0 0-3.715-3.715c-.823-.419-1.838-.666-3.413-.795C35.354 8.001 33.325 8 30.5 8h-5c-2.825 0-4.854.001-6.446.131" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},839123:(e,t,o)=>{o.d(t,{Icon56SettingsOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon56SettingsOutline","settings_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 56 56" id="settings_outline_56"><path fill-rule="evenodd" d="M37.004 28.152c0 4.96-4.03 8.98-9.001 8.98s-9.001-4.02-9.001-8.98 4.03-8.98 9-8.98c4.972 0 9.002 4.02 9.002 8.98m-9.001 5.987c3.314 0 6-2.68 6-5.987s-2.686-5.987-6-5.987-6.001 2.68-6.001 5.987 2.687 5.987 6 5.987Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M29.265 4.005c-.798 0-1.598.017-2.396-.002-.41-.01-1.849-.044-3.058.923-1.186.949-1.628 2.398-1.895 3.463a10.3 10.3 0 0 1-.884 2.233q-1.263.502-2.428 1.173a10.3 10.3 0 0 1-2.22-.704c-.996-.463-2.403-1.034-3.89-.708-1.514.33-2.392 1.469-2.642 1.793a48 48 0 0 1-1.427 1.76c-.266.314-1.194 1.407-1.204 2.95-.009 1.516.839 2.77 1.5 3.649.407.54.86 1.32 1.209 2.162a19 19 0 0 0-.582 2.561c-.672.59-1.406 1.08-1.997 1.381-.98.5-2.294 1.257-2.951 2.625-.669 1.391-.314 2.78-.212 3.177q.281 1.099.51 2.209c.083.4.373 1.806 1.586 2.764 1.193.944 2.707 1.048 3.807 1.068.65.012 1.504.127 2.352.353q.766 1.114 1.681 2.104c.028.872-.052 1.724-.186 2.356-.228 1.074-.465 2.569.184 3.94.662 1.396 1.968 1.995 2.34 2.166q1.031.473 2.038.994c.364.188 1.643.85 3.155.51 1.485-.334 2.519-1.444 3.225-2.284a10.3 10.3 0 0 1 1.816-1.65c.864.06 1.75.06 2.614 0a10.3 10.3 0 0 1 1.815 1.65c.707.84 1.74 1.95 3.225 2.284 1.513.34 2.791-.322 3.155-.51q1.007-.521 2.038-.994c.373-.17 1.679-.77 2.34-2.166.65-1.371.412-2.866.184-3.94a10.3 10.3 0 0 1-.186-2.356 19 19 0 0 0 1.681-2.104 10.3 10.3 0 0 1 2.353-.353c1.099-.02 2.614-.124 3.807-1.068 1.213-.958 1.502-2.364 1.585-2.764q.23-1.111.51-2.209c.102-.397.457-1.786-.211-3.177-.658-1.368-1.972-2.125-2.951-2.625a10.3 10.3 0 0 1-1.998-1.38 19 19 0 0 0-.581-2.562 10.3 10.3 0 0 1 1.208-2.162c.662-.878 1.509-2.133 1.5-3.65-.01-1.542-.938-2.635-1.204-2.948a48 48 0 0 1-1.427-1.761c-.25-.324-1.128-1.462-2.641-1.793-1.487-.325-2.895.245-3.891.708a10.3 10.3 0 0 1-2.22.704 19 19 0 0 0-2.428-1.173 10.3 10.3 0 0 1-.884-2.233c-.256-1.024-.666-2.348-1.683-3.281-1.192-1.094-2.595-1.1-3.098-1.103zm8.892 42.739-1.902.927c-.952.464-1.427.696-2.83-.974-.788-.936-2.02-2.026-3.367-2.806a16.3 16.3 0 0 1-4.11 0c-1.348.78-2.58 1.87-3.367 2.806-1.403 1.67-1.88 1.438-2.83.974l-1.903-.927c-.951-.464-1.427-.696-.974-2.83.249-1.175.35-2.779.15-4.297a16 16 0 0 1-2.64-3.302c-1.439-.54-3.033-.804-4.24-.826-2.18-.04-2.3-.555-2.538-1.585l-.476-2.062c-.238-1.03-.357-1.546 1.586-2.537 1.085-.554 2.418-1.503 3.48-2.633.129-1.396.44-2.74.907-4.009-.457-1.494-1.245-2.946-1.983-3.926-1.312-1.743-.98-2.154-.313-2.976l1.332-1.644c.666-.822 1-1.233 2.977-.313 1.084.504 2.615.962 4.133 1.111a15.8 15.8 0 0 1 3.81-1.843c.855-1.284 1.475-2.784 1.768-3.959.53-2.115 1.059-2.115 2.117-2.115h2.299c.939.007 1.437.124 1.935 2.115.294 1.175.913 2.675 1.769 3.959 1.36.445 2.64 1.069 3.81 1.843 1.517-.15 3.048-.607 4.132-1.111 1.978-.92 2.311-.51 2.977.313l1.332 1.644c.666.822 1 1.233-.313 2.976-.738.98-1.526 2.432-1.983 3.927a15.8 15.8 0 0 1 .908 4.008c1.062 1.13 2.394 2.08 3.479 2.633 1.943.991 1.824 1.506 1.586 2.537l-.476 2.062c-.238 1.03-.357 1.546-2.538 1.585-1.207.022-2.8.286-4.24.826a16 16 0 0 1-2.64 3.302c-.2 1.518-.098 3.122.15 4.298.453 2.133-.023 2.365-.974 2.829" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},9752:(e,t,o)=>{o.d(t,{Icon56UsersOutline:()=>r});var r=(0,o(28178).makeIcon)("Icon56UsersOutline","users_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="users_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path fill="currentColor" fill-rule="nonzero" d="M39.5 31c5.609 0 10.5 2.699 10.5 8 0 2.625-1.833 4-4 4h-8.5a1.5 1.5 0 0 1 0-3H46c.667 0 1-.25 1-1 0-3.164-3.328-5-7.5-5-.71 0-1.482.07-2.226.208a1.5 1.5 0 1 1-.548-2.95A15.4 15.4 0 0 1 39.5 31m-19-2c7.356 0 13.5 2.836 13.5 9 0 3.078-1.922 5-4.5 5h-18C8.814 43 7 41.59 7 38.5c0-6.545 6.065-9.5 13.5-9.5m0 3C14.514 32 10 34.2 10 38.5c0 1.244.33 1.5 1.5 1.5h18c.922 0 1.5-.578 1.5-2 0-3.874-4.606-6-10.5-6M39 15a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13m-18.5-4a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15M39 18a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7m-18.5-4a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9" /></g></symbol>',56,56,!1,void 0)},58255:(e,t,o)=>{o.d(t,{default:()=>a});var r=o(111132);function a(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,o)=>{function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}o.d(t,{default:()=>r})},374277:(e,t,o)=>{function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function a(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}o.d(t,{default:()=>a})},759244:()=>{},963328:()=>{},98264:()=>{},760398:()=>{},403658:()=>{},861848:()=>{},178854:()=>{},964294:()=>{},458327:()=>{},80510:()=>{},238931:()=>{},380283:()=>{},320428:()=>{},419308:()=>{},814106:()=>{},181876:()=>{},335106:()=>{},704107:()=>{},128831:()=>{},402752:()=>{},668908:()=>{},170490:()=>{},393999:()=>{},862202:()=>{},895593:()=>{},351667:()=>{},528098:()=>{},974580:()=>{},936021:()=>{},97839:()=>{},628392:()=>{},241676:()=>{},501954:()=>{},848056:()=>{},833249:()=>{},417819:()=>{},542663:()=>{},152440:()=>{},550654:()=>{},126449:()=>{},450390:(e,t,o)=>{o.d(t,{default:()=>r});const r={banner:"AvatarSuggestionRow-module__banner--eGRGM",character:"AvatarSuggestionRow-module__character--KkvTP",placeholder:"AvatarSuggestionRow-module__placeholder--KSNYt"}},777459:(e,t,o)=>{o.d(t,{default:()=>r});const r={emoji:"Emoji-module__emoji--TaIGF"}},808209:(e,t,o)=>{o.d(t,{default:()=>r});const r={item:"EmojiItem-module__item--uN2hU",itemActive:"EmojiItem-module__itemActive--ki278"}},473684:(e,t,o)=>{o.d(t,{default:()=>r});const r={keyboard:"EmojiKeyboard-module__keyboard--S0TS4",scroll:"EmojiKeyboard-module__scroll--Z6QkW",in:"EmojiKeyboard-module__in--uXIEN",item:"EmojiKeyboard-module__item--WospX",itemHeader:"EmojiKeyboard-module__itemHeader--U9ggI"}},791677:(e,t,o)=>{o.d(t,{default:()=>r});const r={header:"EmojiKeyboardHeader-module__header--TVWvF",headerWide:"EmojiKeyboardHeader-module__headerWide--e3DNC",headerRegular:"EmojiKeyboardHeader-module__headerRegular--yGl2Q",headerAdaptive:"EmojiKeyboardHeader-module__headerAdaptive--tCJxs",headerCompact:"EmojiKeyboardHeader-module__headerCompact--UVbey",title:"EmojiKeyboardHeader-module__title--PiK_M"}},327503:(e,t,o)=>{o.d(t,{default:()=>r});const r={row:"EmojiKeyboardRow-module__row--p_0Uh",rowWide:"EmojiKeyboardRow-module__rowWide--GoPtY",rowRegular:"EmojiKeyboardRow-module__rowRegular--vJoFW",rowAdaptive:"EmojiKeyboardRow-module__rowAdaptive--WgL5l",rowCompact:"EmojiKeyboardRow-module__rowCompact--NII_p",emoji:"EmojiKeyboardRow-module__emoji--zhit4"}},419928:(e,t,o)=>{o.d(t,{default:()=>r});const r={keyboard:"StickersEmojiKeyboard-module__keyboard--NDNV7",keyboardWide:"StickersEmojiKeyboard-module__keyboardWide--EQCpB",keyboardCompact:"StickersEmojiKeyboard-module__keyboardCompact--fap13",keyboardRegular:"StickersEmojiKeyboard-module__keyboardRegular--gcobA",keyboardAdaptive:"StickersEmojiKeyboard-module__keyboardAdaptive--uuxWL",in:"StickersEmojiKeyboard-module__in--GCR5_"}},585851:(e,t,o)=>{o.d(t,{default:()=>r});const r={keyboard:"StickersKeyboard-module__keyboard--HhSGu",scroll:"StickersKeyboard-module__scroll--B3uRG",scrollDisabled:"StickersKeyboard-module__scrollDisabled--eFR0P",in:"StickersKeyboard-module__in--SrA5_",item:"StickersKeyboard-module__item--RVgIo",itemHeader:"StickersKeyboard-module__itemHeader--UiOMF"}},87613:(e,t,o)=>{o.d(t,{default:()=>r});const r={group:"StickersKeyboardGroup-module__group--SaD_D",groupActive:"StickersKeyboardGroup-module__groupActive--FCxnW",groupHidden:"StickersKeyboardGroup-module__groupHidden--oelXz",item:"StickersKeyboardGroup-module__item--kWotN"}},92031:(e,t,o)=>{o.d(t,{default:()=>r});const r={in:"Icon-module__in--LRLH3"}},371300:(e,t,o)=>{o.d(t,{default:()=>r});const r={in:"StickersKeyboardGroupItem-module__in--CKjkC",inPlaceholder:"StickersKeyboardGroupItem-module__inPlaceholder--nDIkG",inActive:"StickersKeyboardGroupItem-module__inActive--iqstp",inHidden:"StickersKeyboardGroupItem-module__inHidden--LDS5f",icon:"StickersKeyboardGroupItem-module__icon--XsoKM",iconService:"StickersKeyboardGroupItem-module__iconService--v_5Us",inIndicator:"StickersKeyboardGroupItem-module__inIndicator--qfChl",inIndicatorRed:"StickersKeyboardGroupItem-module__inIndicatorRed--mfiwZ",inIndicatorGray:"StickersKeyboardGroupItem-module__inIndicatorGray--nmH3R",tooltip:"StickersKeyboardGroupItem-module__tooltip--k5ROd"}},127509:(e,t,o)=>{o.d(t,{default:()=>r});const r={button:"ShopButton-module__button--dpi8u"}},396893:(e,t,o)=>{o.d(t,{default:()=>r});const r={groups:"StickersKeyboardGroups-module__groups--D_rpD",container:"StickersKeyboardGroups-module__container--qnM6L",in:"StickersKeyboardGroups-module__in--LGJQC",items:"StickersKeyboardGroups-module__items--yuHSj",group:"StickersKeyboardGroups-module__group--jgk6H",groupIn:"StickersKeyboardGroups-module__groupIn--Rl88a",chevron:"StickersKeyboardGroups-module__chevron--bVU_v",shadow:"StickersKeyboardGroups-module__shadow--_mze3",groupsForced:"StickersKeyboardGroups-module__groupsForced--JQmGC",shadowVisible:"StickersKeyboardGroups-module__shadowVisible--QazqK",shadowLeft:"StickersKeyboardGroups-module__shadowLeft--Af04P",shadowRight:"StickersKeyboardGroups-module__shadowRight--uhxM3",chevronActive:"StickersKeyboardGroups-module__chevronActive--iEtYU",chevronLeft:"StickersKeyboardGroups-module__chevronLeft--HV3LI",chevronRight:"StickersKeyboardGroups-module__chevronRight--W2OoP"}},440652:(e,t,o)=>{o.d(t,{default:()=>r});const r={peer:"GiftButton-module__peer--Roaf8"}},711857:(e,t,o)=>{o.d(t,{default:()=>r});const r={tooltip:"PeerInfo-module__tooltip--oh4tT",text:"PeerInfo-module__text--e0b2H",icon:"PeerInfo-module__icon--IHiet"}},344786:(e,t,o)=>{o.d(t,{default:()=>r});const r={header:"StickersKeyboardHeader-module__header--xV4wQ",headerWide:"StickersKeyboardHeader-module__headerWide--zmtrG",headerRegular:"StickersKeyboardHeader-module__headerRegular--qtnWn",headerAdaptive:"StickersKeyboardHeader-module__headerAdaptive--ovPUg",headerCompact:"StickersKeyboardHeader-module__headerCompact--Jtngb",headerAside:"StickersKeyboardHeader-module__headerAside--baqTV",title:"StickersKeyboardHeader-module__title--KIn6h",icon:"StickersKeyboardHeader-module__icon--xG3gi"}},926904:(e,t,o)=>{o.d(t,{default:()=>r});const r={icon:"StyleSettingsButton-module__icon--kV7Xh"}},144295:(e,t,o)=>{o.d(t,{default:()=>r});const r={tooltip:"Tooltip-module__tooltip--hXKeG",icon:"Tooltip-module__icon--r0CMV"}},692531:(e,t,o)=>{o.d(t,{default:()=>r});const r={brush:"VmojiEditButton-module__brush--ePe_r",counter:"VmojiEditButton-module__counter--pQbPl"}},310690:(e,t,o)=>{o.d(t,{default:()=>r});const r={row:"StickersKeyboardRow-module__row--rSTw0",rowWide:"StickersKeyboardRow-module__rowWide--SqyXn",rowRegular:"StickersKeyboardRow-module__rowRegular--OrVVI",rowAdaptive:"StickersKeyboardRow-module__rowAdaptive--oty8d",rowCompact:"StickersKeyboardRow-module__rowCompact--RdH0D",rowStickers:"StickersKeyboardRow-module__rowStickers--yfhOE",sticker:"StickersKeyboardRow-module__sticker--m7W0R",stickerRich:"StickersKeyboardRow-module__stickerRich--QIoWg"}},319972:(e,t,o)=>{o.d(t,{default:()=>r});const r={card:"StickersKeyboardRowCard-module__card--mjZxc",hide:"StickersKeyboardRowCard-module__hide--wJMEC",image:"StickersKeyboardRowCard-module__image--AOl2R",title:"StickersKeyboardRowCard-module__title--d7X63",action:"StickersKeyboardRowCard-module__action--WLWqS"}},356238:(e,t,o)=>{o.d(t,{default:()=>r});const r={tabbar:"Tabbar-module__tabbar--BM4FY",item:"Tabbar-module__item--go6yE"}},425061:(e,t,o)=>{o.d(t,{default:()=>r});const r={item:"TabbarItem-module__item--ZNNPf",itemActive:"TabbarItem-module__itemActive--V_wMj",indicator:"TabbarItem-module__indicator--_3TfR",indicatorNone:"TabbarItem-module__indicatorNone--WNOVV",indicatorPrimary:"TabbarItem-module__indicatorPrimary--AnXZT",indicatorSecondary:"TabbarItem-module__indicatorSecondary--tycLm",indicatorDestructive:"TabbarItem-module__indicatorDestructive--SFvfQ"}},469872:(e,t,o)=>{o.d(t,{default:()=>r});const r={view:"View-module__view--D7qOP",panel:"View-module__panel--WNKKi",panelSwitched:"View-module__panelSwitched--hg3jP"}},30705:(e,t,o)=>{o.d(t,{default:()=>r});const r={wrapper:"PopupRoot-module__wrapper--VTIvI"}},429697:(e,t,o)=>{o.d(t,{default:()=>h});var r=o(487462),a=o(263366),n=o(894578),s=o(58255),i=o(374277),c=o(667294),l=o(696630),d=o(559391),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},m=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,o){var r=t.resolveArguments(e,o),a=r[0],n=r[1];t.removeClasses(a,"exit"),t.addClass(a,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,o)},t.onEntering=function(e,o){var r=t.resolveArguments(e,o),a=r[0],n=r[1]?"appear":"enter";t.addClass(a,n,"active"),t.props.onEntering&&t.props.onEntering(e,o)},t.onEntered=function(e,o){var r=t.resolveArguments(e,o),a=r[0],n=r[1]?"appear":"enter";t.removeClasses(a,n),t.addClass(a,n,"done"),t.props.onEntered&&t.props.onEntered(e,o)},t.onExit=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"appear"),t.removeClasses(o,"enter"),t.addClass(o,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var o=t.resolveArguments(e)[0];t.addClass(o,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"exit"),t.addClass(o,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,o){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,o]},t.getClassNames=function(e){var o=t.props.classNames,r="string"==typeof o,a=r?""+(r&&o?o+"-":"")+e:o[e];return{baseClassName:a,activeClassName:r?a+"-active":o[e+"Active"],doneClassName:r?a+"-done":o[e+"Done"]}},t}(0,n.default)(t,e);var o=t.prototype;return o.addClass=function(e,t,o){var r=this.getClassNames(t)[o+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===o&&a&&(r+=" "+a),"active"===o&&e&&(0,d.forceReflow)(e),r&&(this.appliedClasses[t][o]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))}(e,r))},o.removeClasses=function(e,t){var o=this.appliedClasses[t],r=o.base,a=o.active,n=o.done;this.appliedClasses[t]={},r&&u(e,r),a&&u(e,a),n&&u(e,n)},o.render=function(){var e=this.props,t=(e.classNames,(0,a.default)(e,["classNames"]));return c.createElement(l.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);m.defaultProps={classNames:""},m.propTypes={};const h=m},696630:(e,t,o)=>{o.d(t,{default:()=>g});var r=o(263366),a=o(894578),n=o(667294),s=o(973935),i=o(806035),c=o(500220),l=o(559391),d="unmounted",u="exited",m="entering",h="entered",p="exiting",f=function(e){function t(t,o){var r;r=e.call(this,t,o)||this;var a,n=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?n?(a=u,r.appearStatus=m):a=h:a=t.unmountOnExit||t.mountOnEnter?d:u,r.state={status:a},r.nextCallback=null,r}(0,a.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:u}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var o=this.state.status;this.props.in?o!==m&&o!==h&&(t=m):o!==m&&o!==h||(t=p)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,o,r=this.props.timeout;return e=t=o=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,o=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:o}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===m){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);o&&(0,l.forceReflow)(o)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:d})},o.performEnter=function(e){var t=this,o=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[s.findDOMNode(this),r],n=a[0],c=a[1],l=this.getTimeouts(),d=r?l.appear:l.enter;!e&&!o||i.default.disabled?this.safeSetState({status:h},(function(){t.props.onEntered(n)})):(this.props.onEnter(n,c),this.safeSetState({status:m},(function(){t.props.onEntering(n,c),t.onTransitionEnd(d,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(n,c)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,o=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!i.default.disabled?(this.props.onExit(r),this.safeSetState({status:p},(function(){e.props.onExiting(r),e.onTransitionEnd(o.exit,(function(){e.safeSetState({status:u},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:u},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,o=!0;return this.nextCallback=function(r){o&&(o=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var o=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(o&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],n=a[0],i=a[1];this.props.addEndListener(n,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,o=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(c.default.Provider,{value:null},"function"==typeof o?o(e,a):n.cloneElement(n.Children.only(o),a))},t}(n.Component);function v(){}f.contextType=c.default,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},f.UNMOUNTED=d,f.EXITED=u,f.ENTERING=m,f.ENTERED=h,f.EXITING=p;const g=f},500220:(e,t,o)=>{o.d(t,{default:()=>r});const r=o(667294).createContext(null)},806035:(e,t,o)=>{o.d(t,{default:()=>r});const r={disabled:!1}},559391:(e,t,o)=>{o.d(t,{forceReflow:()=>r});var r=function(e){return e.scrollTop}},273313:(e,t,o)=>{o.d(t,{ErrorBoundary:()=>s});var r=o(667294);const a=(0,r.createContext)(null),n={didCatch:!1,error:null};class s extends r.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=n}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,o,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];null===(t=(o=this.props).onReset)||void 0===t||t.call(o,{args:a,reason:"imperative-api"}),this.setState(n)}}componentDidCatch(e,t){var o,r;null===(o=(r=this.props).onError)||void 0===o||o.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:o}=this.state,{resetKeys:r}=this.props;var a,s;o&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,o)=>!Object.is(e,t[o])))}(e.resetKeys,r)&&(null===(a=(s=this.props).onReset)||void 0===a||a.call(s,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(n))}render(){const{children:e,fallbackRender:t,FallbackComponent:o,fallback:n}=this.props,{didCatch:s,error:i}=this.state;let c=e;if(s){const e={error:i,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)c=t(e);else if(o)c=(0,r.createElement)(o,e);else{if(null!==n&&!(0,r.isValidElement)(n))throw i;c=n}}return(0,r.createElement)(a.Provider,{value:{didCatch:s,error:i,resetErrorBoundary:this.resetErrorBoundary}},c)}}},395595:(e,t,o)=>{o.d(t,{Cache:()=>s});var r,a,n=o(891047);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(r||(r={})),function(e){e.HELP_HINTS="helpHints"}(a||(a={}));class s{getHelpHints(){return this.getItem(a.HELP_HINTS)}setHelpHints(e){return this.setItem(a.HELP_HINTS,e)}clear(){return(0,n.clear)(this.store)}async getItem(e){const t=this.buildItemKey(e),o=s.cache.get(t);return(0,n.get)(t,this.store).then((e=>e||o)).catch((()=>o))}async setItem(e,t){const o=this.buildItemKey(e);s.cache.set(o,t),await(0,n.set)(o,t,this.store).catch((()=>{}))}deleteItem(e){const t=this.buildItemKey(e);return(0,n.del)(t,this.store)}buildItemKey(e){return`${e}-${s.VERSION}-${this.userId}`}getItemSync(e,t){const o=this.buildSyncItemKey(e);try{let e=localStorage.getItem(o);if(!e)return;switch(t){case r.OBJECT:try{e=JSON.parse(e)}catch{return}break;case r.NUMBER:e=Number(e)||0;break;case r.STRING_NUMBER:e=Number(e)||e;break;case r.BOOLEAN:e=Boolean(Number(e))}return e}catch{return s.cache.get(o)}}setItemSync(e,t,o){const a=this.buildSyncItemKey(e);switch(o){case r.OBJECT:t=JSON.stringify(t);break;case r.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(a,t)}catch{s.cache.set(a,t)}}buildSyncItemKey(e){return`${s.DB_NAME}_${e}_${s.VERSION}_${this.userId}`}constructor({userId:e=window.vk?.id,categories:t}={}){this.userId=e||0;let o="cache";t?.length&&(o=`${o}-${t.join("-")}`),this.store=(0,n.createStore)(s.DB_NAME,o)}}s.DB_NAME="help-hints",s.VERSION=1,s.CACHE_UPDATE_EVENT_NAME=`${s.DB_NAME}_cache_update`,s.cache=new Map},177303:(e,t,o)=>{o.d(t,{HelpHintsProvider:()=>i});var r=o(785893),a=o(667294),n=o(717731),s=o(965554);function i({api:e,noToken:t,...o}){const[i,c]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{e&&(n.HelpHints.setAPI(e),t&&!e.options.token&&"function"!=typeof e.options.requestMethod)||(async()=>{c(!0),await n.HelpHints.reload(),c(!1)})()}),[e,t]),(0,r.jsx)(s.HelpHintsContext.Provider,{value:{isHelpHintsReloading:i},...o})}},822257:(e,t,o)=>{o.d(t,{HelpHint:()=>r});class r{get id(){return this.hint.id}get title(){return this.hint.title}get description(){return this.hint.description}getResource(e){return this.hint.resources?.find((({key:t})=>t===e))?.value}constructor(e){this.hint=e}}},845434:(e,t,o)=>{o.d(t,{useHelpHint:()=>s});var r=o(667294),a=o(717731),n=o(965554);function s(e){const{isHelpHintsReloading:t}=(0,n.useHelpHints)();return(0,r.useMemo)((()=>{if(e)return a.HelpHints.getSync(e)}),[t])}},937339:(e,t,o)=>{o.d(t,{useHelpHintResource:()=>s});var r=o(667294),a=o(717731),n=o(965554);function s(e,t){const{isHelpHintsReloading:o}=(0,n.useHelpHints)();return(0,r.useMemo)((()=>{if(e&&t)return a.HelpHints.getSync(e)?.getResource(t)}),[e,t,o])}},965554:(e,t,o)=>{o.d(t,{HelpHintsContext:()=>a,useHelpHints:()=>n});var r=o(667294);const a=(0,r.createContext)({});function n(){return(0,r.useContext)(a)}},717731:(e,t,o)=>{o.d(t,{HelpHints:()=>c});var r=o(413151),a=o(166695),n=o(822257),s=o(395595),i=o(650640);class c{static setAPI(e){this.api=e}static setUserId(e){this.cacheOptions.userId=e,this.cache=void 0}static setCategories(e){Array.isArray(e)||(e=[e]),this.cacheOptions.categories=e,this.cache=void 0}static async get(e){return await this.reload(),this.getSync(e)}static getSync(e){const t=this.helpHints?.items.find((({id:t})=>t===e));if(t)return new n.HelpHint(t)}static show(e){return e instanceof n.HelpHint&&(e=e.id),this.api.account.showHelpHint({hint_id:e})}static async hide(e){e instanceof n.HelpHint&&(e=e.id);let t=!1;return await this.reloading,this.helpHints&&(this.helpHints.items=this.helpHints.items.filter((({id:o})=>(o===e&&(t=!0),o!==e))),this.cache?.setHelpHints(this.helpHints)),t?this.api.account.hideHelpHint({hint_id:e}):Promise.resolve()}static async getResource(e,t){const o=await this.get(e);if(o)return o.getResource(t)}static async reload(){return await this.reloading,this.cache||(this.cache=new s.Cache(this.cacheOptions)),this.reloading=new Promise((async e=>{if(!this.api.options.token&&"function"!=typeof this.api.options.requestMethod){const t=await this.getAccessToken();if(!t)return e();this.api=new r.API({token:t}),this.api.onTokenRegenerate((async t=>{const o=await this.getAccessToken();if(!o)return e();t(o)}))}if(this.helpHints=await(this.cache?.getHelpHints()),this.helpHints&&Date.now()-this.helpHints.date<i.TEN_MINUTES&&!this.isDevMode())return e();const{categories:t}=this.cacheOptions;this.helpHints=await this.api.account.getHelpHints({categories:t?String(t):void 0}).then((e=>({...e,date:Date.now()}))).catch((()=>{})),await(this.cache?.setHelpHints(this.helpHints)),this.refresh(),e()})),this.reloading}static refresh(){try{localStorage.setItem(s.Cache.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(s.Cache.CACHE_UPDATE_EVENT_NAME)}catch{}}static async getAccessToken(){const e=await(0,a.login)("web_token").catch((()=>{}));if(!e)return;const{access_token:t}=e;return t}}c.api=new r.API({token:""}),c.cacheOptions={},c.reloading=Promise.resolve(),c.isDevMode=()=>localStorage.getItem("help-hints-dev"),window.addEventListener("storage",(({key:e,newValue:t})=>{e===s.Cache.CACHE_UPDATE_EVENT_NAME&&null!==t&&c.reload()}))},952258:(e,t,o)=>{var r,a;o.d(t,{HelpHintId:()=>a}),function(e){e.DEFAULT="default",e.STICKERS_UGC="stickers_ugc"}(r||(r={})),function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji",e.POSTING_POST_FEED_BADGES="posting:post_feed_badges",e.POSTING_POST_BADGES_ONBOARDING="posting:post_badges_onboarding",e.POSTING_POST_FEED_BADGES_UNSEEN="posting:post_feed_badges_unseen",e.POSTING_POST_BADGES_PAGE_UNSEEN="posting:post_badges_page_unseen",e.POSTING_POST_BADGES_CATALOG_USER="posting:post_badges_catalog_user",e.POSTING_POST_BADGES_FEEDBACK_USER="posting:post_badges_feedback_user",e.POSTING_POST_BADGES_FEEDBACK_USER_UNSEEN="posting:post_badges_feedback_user_unseen",e.STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.STICKERS_UGC_KEYBOARD_ONBOARDING="stickers:ugc_keyboard_onboarding",e.STICKERS_UGC_APP_ONBOARDING_MODAL="stickers:ugc_app_onboarding_modal",e.STICKERS_UGC_KEYBOARD_ONBOARDING_TOOLTIP="stickers:ugc_keyboard_onboarding_tooltip"}(a||(a={}))},799051:(e,t,o)=>{var r;o.d(t,{KeyboardStickersVmojiResourceKey:()=>r}),function(e){e.VMOJI_ON_BOARDING_DARK="vmoji_kb_onboarding_dark",e.VMOJI_ON_BOARDING_LIGHT="vmoji_kb_onboarding_light"}(r||(r={}))},639106:(e,t,o)=>{var r,a;o.d(t,{StickersUGCKeyboardOnboardingResourceKey:()=>a}),function(e){e.CLOSE="close",e.IMAGE="image"}(r||(r={})),function(e){e.IMAGE="image"}(a||(a={}))},650640:(e,t,o)=>{o.d(t,{TEN_MINUTES:()=>r});const r=6e5},964910:(e,t,o)=>{o.d(t,{Content:()=>n});var r=o(785893),a=o(667294);const n=(0,a.memo)((0,a.forwardRef)((({children:e,...t},o)=>(0,r.jsx)("div",{ref:o,...t,children:e}))));n.displayName="Content"},841832:(e,t,o)=>{o.d(t,{Cropped:()=>n});var r=o(785893),a=o(667294);const n=(0,a.memo)((0,a.forwardRef)((({children:e,style:t={},...o},a)=>(0,r.jsx)("div",{ref:a,style:{...s,...t},...o,"data-scrollbar":"cropped",children:e}))));n.displayName="Cropped";const s={position:"relative",width:"100%",height:"100%",overflow:"hidden"}},143112:(e,t,o)=>{o.d(t,{Scrollable:()=>n});var r=o(785893),a=o(667294);const n=(0,a.memo)((0,a.forwardRef)((({children:e,...t},o)=>(0,r.jsx)("div",{ref:o,...t,children:e}))));n.displayName="Scrollable"},530830:(e,t,o)=>{o.d(t,{ScrollbarProvider:()=>f});var r=o(785893),a=o(667294),n=o(964910),s=o(841832),i=o(143112),c=o(158573),l=o(75275),d=o(483759),u=o(235451),m=o(422843),h=o(667079),p=o(919540);const f=(0,a.memo)((0,a.forwardRef)((({children:e,scrollableProps:t,contentProps:o,overflowX:f,overflowY:v,forceVisible:g,minBarSize:_=25,maxBarSize:k=0,clickOnTrack:b=!0,...E},y)=>{const w=(0,a.useRef)({overflowX:f,overflowY:v,forceVisible:g,minBarSize:_,maxBarSize:k,clickOnTrack:b});w.current={overflowX:f,overflowY:v,forceVisible:g,minBarSize:_,maxBarSize:k,clickOnTrack:b};const C=(0,a.useRef)(null),[I,A]=(0,a.useState)(0),[S,x]=(0,a.useState)(!0),[P,M]=(0,a.useState)(!0),N=(0,a.useRef)(null),R=(0,a.useRef)({content:{width:0,height:0,scrollWidth:0,scrollHeight:0},cropped:{width:0,height:0,offsetWidth:0,offsetHeight:0},scrollable:{scrollLeft:0,scrollTop:0}}),T=(0,a.useRef)((()=>{const{content:e,cropped:t,scrollable:o}=R.current,{minBarSize:r,maxBarSize:a,overflowX:n,overflowY:s}=w.current,i={min:r,max:a};if("hidden"!==n){const{size:r,position:a}=(0,h.calculateThumbStyles)(o.scrollLeft,t.width,e.width,i);x(e.scrollWidth>t.offsetWidth&&r<t.offsetWidth),N.current?.setWidth?.(r),N.current?.setX?.(a)}if("hidden"!==s){const{size:r,position:a}=(0,h.calculateThumbStyles)(o.scrollTop,t.height,e.height,i);M(e.scrollHeight>t.offsetHeight&&r<t.offsetHeight),N.current?.setHeight?.(r),N.current?.setY?.(a)}})),O=(0,a.useCallback)((e=>{if(e.target instanceof HTMLDivElement){const{scrollTop:t,scrollLeft:o}=e.target;Object.assign(R.current.scrollable,{scrollLeft:o,scrollTop:t}),T.current()}}),[]),j=(0,a.useRef)(null),L=(0,a.useMemo)((()=>({...t,style:{...(0,m.applyScrollableStyles)(I,{overflowY:v,overflowX:f}),...t?.style},ref:e=>{j.current=e,(0,u.applyRefValueMutation)(t?.ref,e),A((0,p.getNativeScrollbarWidth)(e))}})),[I,f,v,t]),D=(0,a.useRef)(null),V=(0,a.useMemo)((()=>({...o,style:{...(0,d.applyContentStyles)({overflowX:f,overflowY:v}),...o?.style},ref:e=>{D.current=e,(0,u.applyRefValueMutation)(o?.ref,e)}})),[o,f,v]),{observe:K}=(0,l.useResizeObserver)(),U=(0,a.useCallback)((e=>t=>{if(!t)return;const{height:o,width:r}=t.contentRect;if("cropped"===e&&(Object.assign(R.current.cropped,{width:r,height:o}),t.target instanceof HTMLElement)){const{offsetHeight:e,offsetWidth:o}=t.target;Object.assign(R.current.cropped,{offsetWidth:o,offsetHeight:e})}if("content"===e&&(Object.assign(R.current.content,{width:r,height:o}),t.target instanceof HTMLElement)){const{scrollWidth:e,scrollHeight:o}=t.target;Object.assign(R.current.content,{scrollWidth:e,scrollHeight:o})}T.current()}),[]);(0,a.useEffect)((()=>{const e=C.current;if(e)return K(e,U("cropped"))}),[U,K]),(0,a.useEffect)((()=>{const e=D.current;if(e)return K(e,U("content"))}),[U,K]);const B=(0,a.useRef)(null),H=(0,a.useCallback)((e=>{B.current||(B.current=window.requestAnimationFrame((()=>{j.current&&e(j.current),B.current=null})))}),[j]);return(0,a.useEffect)((()=>()=>{B.current&&window.cancelAnimationFrame(B.current)}),[]),(0,a.useEffect)((()=>{const e=j.current;if(!e)return;e.setAttribute("data-scrollbar","scrollable"),e.addEventListener("scroll",O,{passive:!0});const{scrollTop:t,scrollLeft:o}=e;return Object.assign(R.current.scrollable,{scrollLeft:o,scrollTop:t}),()=>{e.removeEventListener("scroll",O)}}),[O]),(0,a.useEffect)((()=>{const e=D.current;e&&e.setAttribute("data-scrollbar","content")}),[]),(0,r.jsxs)(s.Cropped,{...E,ref:e=>{C.current=e,(0,u.applyRefValueMutation)(y,e)},children:["function"==typeof e?e({contentRef:D,contentProps:V,scrollableRef:j,scrollableProps:L}):(0,r.jsx)(i.Scrollable,{...L,children:(0,r.jsx)(n.Content,{...V,children:e})}),(0,r.jsx)(c.Track,{ref:N,overflowX:f,overflowY:v,forceVisible:g,xTrackNeeded:S,yTrackNeeded:P,clickOnTrack:b,dispatchScrollAction:H})]})})));f.displayName="ScrollbarProvider"},714087:(e,t,o)=>{o.d(t,{Thumb:()=>s});var r=o(785893),a=o(667294),n=o(372141);const s=(0,a.forwardRef)((({axis:e,dispatchScrollAction:t},o)=>{const[s,i]=(0,a.useState)(0),[c,l]=(0,a.useState)(0),[d,u]=(0,a.useState)(0),[m,h]=(0,a.useState)(0),[p,f]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),_=(0,a.useRef)({width:d,height:s});_.current={width:d,height:s};const k=(0,a.useRef)(null);(0,a.useImperativeHandle)(o,(()=>({..."x"===e?{setX:h,setWidth:u}:{setHeight:i,setY:l},ref:k})),[e]);const b=(0,a.useRef)({x:0,y:0}),E=(0,a.useCallback)((o=>{o.preventDefault(),o.stopPropagation();const{clientX:r,clientY:a}=o;t((t=>{const{width:o,height:n,left:s,top:i}=t.getBoundingClientRect(),c="x"===e?o:n,l="x"===e?s:i,d=t["x"===e?"scrollWidth":"scrollHeight"],u=_.current["x"===e?"width":"height"];let m=("x"===e?r:a)-l-b.current[e];m=m/(c-u)*(d-c),t["x"===e?"scrollLeft":"scrollTop"]=m}))}),[e,t]),y=(0,a.useCallback)((()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",y),f(!1)}),[E]),w=(0,a.useCallback)((t=>{const o=k.current;if(!o)return;t.stopPropagation();const{clientX:r,clientY:a}=t,{left:n,top:s}=o.getBoundingClientRect();b.current[e]="x"===e?r-n:a-s,document.addEventListener("mousemove",E),document.addEventListener("mouseup",y),f(!0)}),[e,E,y]);return(0,a.useEffect)((()=>y),[y]),(0,a.useEffect)((()=>{const e=window.setTimeout((()=>{g(!1)}),1e3);return g(!0),()=>{window.clearTimeout(e)}}),[m,c]),(0,r.jsx)("div",{ref:k,onMouseDown:w,style:{position:"absolute",..."x"===e?{width:d,left:0,bottom:0,transform:`translate3d(${m}px, 0px, 0)`}:{height:s,top:0,right:0,transform:`translate3d(0, ${c}px, 0)`}},className:(0,n.cx)(`sbarThumb sbarThumb${e.toUpperCase()}`,p&&"sbarThumb--dragging",v&&"sbarThumb--scrolling"),"data-scrollbar":"thumb"})}));s.displayName="Thumb"},158573:(e,t,o)=>{o.d(t,{Track:()=>i});var r=o(785893),a=o(667294),n=o(714087),s=o(372141);const i=(0,a.memo)((0,a.forwardRef)((({overflowY:e,overflowX:t,forceVisible:o,xTrackNeeded:i,yTrackNeeded:d,clickOnTrack:u,dispatchScrollAction:m},h)=>{const p=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useImperativeHandle)(h,(()=>({setX:p.current?.setX,setWidth:p.current?.setWidth,setY:f.current?.setY,setHeight:f.current?.setHeight})),[i,d,t,e]);const v=(0,a.useCallback)((e=>t=>{if(!u||"string"==typeof u&&u!==e)return;const{clientX:o,clientY:r,target:a}=t,n=("x"===e?p:f).current?.ref.current;n&&a instanceof HTMLElement&&(t.preventDefault(),m((t=>{const{scrollLeft:a,scrollTop:s}=t,{width:i,height:c}=t.getBoundingClientRect(),{left:l,top:d}=n.getBoundingClientRect(),u="x"===e?l:d,m="x"===e?o:r,h=("x"===e?a:s)+("x"===e?i:c)*Math.sign(m-u),p="x"===e?{left:h}:{top:h};t.scrollTo({...p,behavior:"auto"})})))}),[u,m]),g=(0,a.useCallback)((e=>t=>{const{deltaX:o,deltaY:r}=t,a="x"===e?o:r;m((t=>{t["x"===e?"scrollLeft":"scrollTop"]+=a}))}),[m]);return(0,r.jsxs)(r.Fragment,{children:["hidden"!==t&&i&&(0,r.jsx)("div",{"data-scrollbar":"track",onMouseDown:v("x"),onWheel:g("x"),className:(0,s.cx)("sbarTrack sbarTrackX",l("x",o)),style:c("x"),children:(0,r.jsx)(n.Thumb,{axis:"x",ref:p,dispatchScrollAction:m})}),"hidden"!==e&&d&&(0,r.jsx)("div",{"data-scrollbar":"track",onMouseDown:v("y"),onWheel:g("y"),className:(0,s.cx)("sbarTrack sbarTrackY",l("y",o)),style:c("y"),children:(0,r.jsx)(n.Thumb,{axis:"y",ref:f,dispatchScrollAction:m})})]})})));function c(e){return{position:"absolute",..."x"===e?{left:0,bottom:0,width:"100%",height:"11px"}:{top:0,right:0,width:"11px",height:"100%"}}}function l(e,t){return t&&("boolean"==typeof t||t===e)?`sbarTrack${e.toUpperCase()}--visible`:""}i.displayName="Track"},75275:(e,t,o)=>{o.d(t,{useResizeObserver:()=>a});var r=o(667294);function a(e){const t=(0,r.useRef)(),o=(0,r.useRef)(new Map),a=(0,r.useRef)();a.current=e;const n=(0,r.useCallback)((()=>{const e=new Map;t.current=new ResizeObserver((t=>{t.forEach((t=>{e.set(t.target,t)})),(()=>{const t=Array.from(e.values());t.forEach((e=>{const t=o.current.get(e.target);t&&t(e)})),a.current&&a.current(t),e.clear()})()}))}),[]);(0,r.useEffect)((()=>(n(),()=>{t.current&&(t.current.disconnect(),t.current=void 0),o.current.clear()})),[n]);return{observe:(0,r.useCallback)(((e,r)=>{t.current||n();const a=t.current,s=o.current;return a.observe(e),r&&s.set(e,r),()=>{r&&s.delete(e),a.unobserve(e)}}),[t,n])}}},819258:(e,t,o)=>{o.d(t,{ScrollbarProvider:()=>r.ScrollbarProvider});var r=o(530830)},483759:(e,t,o)=>{function r(e){return{width:"hidden"===e.overflowX?"100%":"min-content",height:"hidden"===e.overflowY?"100%":"min-content"}}o.d(t,{applyContentStyles:()=>r})},235451:(e,t,o)=>{function r(e,t){e&&("function"==typeof e?e(t):e.current=t)}o.d(t,{applyRefValueMutation:()=>r})},422843:(e,t,o)=>{function r(e,{overflowX:t,overflowY:o}){return{WebkitOverflowScrolling:"touch",msOverflowStyle:"-ms-autohiding-scrollbar",width:"hidden"!==o&&e>0?`calc(100% + ${e}px)`:"100%",height:"hidden"!==t&&e>0?`calc(100% + ${e}px)`:"100%",maxWidth:"inherit",maxHeight:"inherit",overflowX:t||"auto",overflowY:o||"auto"}}o.d(t,{applyScrollableStyles:()=>r})},667079:(e,t,o)=>{function r(e,t,o,r){const a=e/(o-t),n=t/o;let s=Math.max(~~(n*t),r.min);r.max&&(s=Math.min(s,r.max));return{size:s,position:~~((t-s)*a)}}o.d(t,{calculateThumbStyles:()=>r})},372141:(e,t,o)=>{o.d(t,{cx:()=>r});const r=(...e)=>e.filter(Boolean).join(" ")},919540:(e,t,o)=>{function r(e){if(void 0!==window.sbarNativeScrollbarWidth)return window.sbarNativeScrollbarWidth;try{if("getComputedStyle"in window&&"none"===window.getComputedStyle(e,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style)return window.sbarNativeScrollbarWidth=0,window.sbarNativeScrollbarWidth}catch{}const t=document.body,o=document.createElement("div");o.style.position="fixed",o.style.left="0",o.style.visibility="hidden",o.style.overflowY="scroll",t.appendChild(o);const r=o.getBoundingClientRect().right;return t.removeChild(o),window.sbarNativeScrollbarWidth=r,window.sbarNativeScrollbarWidth}o.d(t,{getNativeScrollbarWidth:()=>r})},114626:(e,t,o)=>{o.d(t,{ConvoAudiosPlaylist:()=>l,audioTrackSourceFromMessage:()=>u,getAudioThumb:()=>w,isConvoAudioTrack:()=>E,isRestoredConvoAudiosPlaylist:()=>y,mapAudioTrackSourceToPlaylistMetaSource:()=>b,mapChannelToConvoAudioTrackList:()=>g,mapConvoToConvoAudioTrackList:()=>v,mapConvoToConvoVoiceTrackList:()=>k,mapPostCommentsToConvoAudioTrackList:()=>_,toConvoAudioTrack:()=>d});var r=o(503048),a=o(548007),n=o(377836),s=o(360686),i=o(345543),c=o(522089);class l{getNext(e,t,o){const r=t?this.shuffledList:this.list;return(0,s.getNextTrackFromPlaylist)(e,r,o)}getPrev(e,t,o){const r=t?this.shuffledList:this.list;return(0,s.getPrevTrackFromPlaylist)(e,r,o)}getConvoAudiosList(){return this.list}getConvoAudiosShuffledList(){return this.shuffledList}getPlaylistMeta(){return this.meta}shuffle(){this.shuffledList=(0,i.shuffleArray)(this.list)}constructor(e){this.list=e.list,this.shuffledList=(0,i.shuffleArray)(this.list),this.meta=e.meta}}function d(e,t,o,r){const a=w(t.thumb,r?270:135);return{title:t.title,artist:t.artist,trackCode:t.trackCode,source:o,thumb:a,audioTrack:{id:`${t.ownerId}_${t.id}`,url:t.url,progress:e,duration:t.duration}}}function u(e){return"Foreign"===e.kind&&"rootCmid"in e&&e.rootCmid?{kind:"message",cmid:e.rootCmid,peerId:e.rootPeerId}:e.peerId?{kind:"message",peerId:e.peerId,cmid:e.cmid}:void 0}function m(e){if("Normal"!==e.kind&&"Queued"!==e.kind&&"Foreign"!==e.kind)return[];const t=f(e.attaches),o=e.forwardedMessages;Array.isArray(o)&&o.reduce(((e,t)=>(e.push(...m(t)),e)),t);const r="ForeignExpired"===e.replyMessage?.kind?void 0:e.replyMessage;return r&&t.push(...m(r)),t}function h(e){return f(e.attaches)}function p(e){return f(e.attaches)}function f(e){const t=[];Array.isArray(e.audios)&&t.push(...e.audios);const o=e.wall?.attaches.audios;return Array.isArray(o)&&t.push(...o),t}function v(e,t){const o=[],a=r.allHistoryNodes(e).map((e=>({message:e.item})));for(const{message:e}of a){const r="Normal"===e.kind,a="Queued"===e.kind;if(r||a){m(e).filter((e=>!!e.url)).forEach((r=>{o.push(d(0,r,"Normal"===e.kind?u(e):void 0,t))}))}}return(0,s.excludeTracksDoubling)(o)}function g(e,t){const o=[],r=a.allHistoryNodes(e).map((e=>e.item));for(const e of r){h(e).filter((e=>!!e.url)).forEach((r=>{o.push(d(0,r,"Normal"===e.kind?{kind:"post",cmid:e.cmid,channelId:e.channelId}:void 0,t))}))}return(0,s.excludeTracksDoubling)(o)}function _(e,t){const o=[],r=n.allNormalSpreadedComments(e);for(const e of r){p(e).filter((e=>!!e.url)).forEach((r=>{o.push(d(0,r,"Normal"===e.kind?{kind:"comment",postCmid:e.postCmid,channelId:e.channelId,commentCmid:e.cmid}:void 0,t))}))}return(0,s.excludeTracksDoubling)(o)}function k(e){return r.allHistoryNodes(e).reduce(((e,{item:t})=>{if("Normal"!==t.kind&&"Queued"!==t.kind||!t.attaches?.voice)e.push(void 0);else{const o="Normal"===t.kind?t:void 0,r=t.sentAt,a=t.authorId;e.push((0,c.toMessagedConvoVoiceTrackFromMessage)(0,t.attaches.voice,r,a,o))}return e}),[])}function b(e){switch(e.kind){case"message":return{kind:"message",peerId:e.peerId};case"post":case"comment":return{kind:"channel",channelId:e.channelId};default:(0,i.exhaustivenessCheck)(e)}}function E(e){if(!e||"object"!=typeof e)return!1;const{title:t,artist:o,audioTrack:r,trackCode:a,source:n,thumb:s}=e;if("string"!=typeof t||"string"!=typeof o||!r||"object"!=typeof r||"string"!=typeof a||!n||"object"!=typeof n||"string"!=typeof s)return!1;const{url:i,id:c,duration:l,progress:d}=r;if("string"!=typeof i||"string"!=typeof c||"number"!=typeof l||"number"!=typeof d)return!1;switch(n.kind){case"message":if("number"!=typeof n.cmid||"number"!=typeof n.peerId)return!1;break;case"post":if("number"!=typeof n.cmid||"number"!=typeof n.channelId)return!1;break;case"comment":if("number"!=typeof n.postCmid||"number"!=typeof n.channelId||"number"!=typeof n.commentCmid)return!1;break;default:}return!0}function y(e){if(e&&"object"==typeof e){const{meta:t,list:o}=e;let r=!1,a=!1;if(t&&"object"==typeof t){const{source:e,type:o}=t,a="temp"===o;if(e&&"object"==typeof e)switch(e.kind){case"message":r="number"==typeof e.peerId&&a;break;case"channel":r="number"==typeof e.channelId&&a;break;default:}}return o&&Array.isArray(o)&&o.length&&(a=!!o.filter((e=>E(e))).length),r&&a}return!1}function w(e,t){const o=t&&e?.[`photo_${t}`];return o||(e?.photo_34||e?.photo_68||e?.photo_135||e?.photo_270||e?.photo_300||e?.photo_600||e?.photo_1200)}},522089:(e,t,o)=>{o.d(t,{ConvoVoicesPlaylist:()=>a,toMessagedConvoVoiceTrackFromMessage:()=>n,toRecordedConvoVoiceTrack:()=>s});var r=o(360686);class a{getNext(e){return(0,r.getNextTrackFromPlaylist)(e,this.list)}getPrev(e){return(0,r.getPrevTrackFromPlaylist)(e,this.list)}getPlaylistMeta(){return{type:"voices",source:this.source}}constructor(e,t,o){this.source=o;const r=[];let a;for(let t=0;t<e.length;t++){const o=e[t];o?(Array.isArray(a)||(a=[]),a.push(o)):Array.isArray(a)&&(r.push(a),a=void 0),t===e.length-1&&Array.isArray(a)&&r.push(a)}this.list=r.find((e=>e.find((e=>e.audioTrack.id===t.audioTrack.id))))||[]}}function n(e,t,o,r,a){const n=i()?t.linkOgg:t.linkMp3,s=t.linkOgg;let c;return"Foreign"===a?.kind&&"rootCmid"in a&&a.rootCmid?c={cmid:a.rootCmid,peerId:a.rootPeerId}:a&&a.cmid&&a.peerId&&(c={cmid:a.cmid,peerId:a.peerId}),{kind:"MessagedConvoVoiceTrack",sentAt:o,authorId:r,source:c&&{kind:"message",...c},urlOgg:s,audioTrack:{duration:t.duration,progress:e,url:n,id:`${t.ownerId}_${t.id}`}}}function s(e,t,o){const r=i()?t.linkOgg:t.linkMp3;return{kind:"RecordedConvoVoiceTrack",authorId:o,audioTrack:{duration:t.duration,progress:e,url:r,id:`${t.ownerId}_${t.id}`}}}function i(){return!!document.createElement("audio").canPlayType('audio/ogg;codecs="opus"')}},360686:(e,t,o)=>{function r(e,t,o){const r=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),a=r>=0?t[r+1]:void 0;if(a)return{...a,audioTrack:{...a.audioTrack,progress:0}};if(!a&&"all"===o){const e=t[0];return e?{...e,audioTrack:{...e.audioTrack,progress:0}}:void 0}}function a(e,t,o){const r=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),a=t[r-1];if(a)return{...a,audioTrack:{...a.audioTrack,progress:0}};if(!a&&"all"===o){const e=t[t.length-1];return e?{...e,audioTrack:{...e.audioTrack,progress:0}}:void 0}}function n(e){const t=new Set;return e.filter((e=>!t.has(e.audioTrack.id)&&(t.add(e.audioTrack.id),!0)))}o.d(t,{excludeTracksDoubling:()=>n,getNextTrackFromPlaylist:()=>r,getPrevTrackFromPlaylist:()=>a})},364287:(e,t,o)=>{o.d(t,{VideoPlayer:()=>s});var r=o(803854),a=o(419249),n=o(887601);class s{initPlayer(e,t=!1,o="",r=void 0){if(e&&!this.initialized&&(this.initialized=!0,this.player=this.choosePlayer(e,t,o,r),this.player))try{this.player.start(this.video)}catch(e){console.error(e)}}destroy(){this.initialized=!1,this.player&&this.player.destroy()}choosePlayer(e,t=!1,o,r){if(!this.sources.external)return new c(e,this.sources,t,o,r);const a=this.sources.external;if(this.video.player)return new i(e);const n=function(e){const t=RegExp("^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?(?<hash>[^#&?]*).*"),{hash:o}=t.exec(e)?.groups||{};return 11===o?.length?o:""}(a);if(n)return new l(e,n);if(function(e){return/^(https?:)?\/\/(.+\.)?coub\.com\/embed\/.+/.test(e)}(a))return new d(e,a);const s=function(e){const t=RegExp("^(https?:)?\\/\\/vimeo\\.com\\/(?<videoId>\\d+)(\\?|$)"),{videoId:o}=t.exec(e)?.groups||{};return o?`//player.vimeo.com/video/${o}`:""}(a);return s?new u(e,s):null}constructor(e,t=!1,o,r){this.initialized=!1,this.player=null,this.video=e,this.needShadowPlay=t,this.openTitle=o,this.onOpen=r,this.sources=function(e){const t={};if(!e)return t;if(e.external)return{external:e.external};new Map([["dash_webm_av1",a.VideoFormat.DASH_WEBM_AV1],["dash_live_playback",a.VideoFormat.DASH_LIVE],["hls",a.VideoFormat.HLS],["hls_live_playback",a.VideoFormat.HLS_LIVE],["hls_ondemand",a.VideoFormat.HLS_ONDEMAND],["dash_uni",a.VideoFormat.DASH],["dash_sep",a.VideoFormat.DASH_SEP],["dash_ondemand",a.VideoFormat.DASH_ONDEMAND]]).forEach(((o,r)=>{const a=e[r];a&&(t[o]={type:"url",url:m(a)})}));const o=new Map([["mp4_144",a.VideoQuality.Q_144P],["mp4_240",a.VideoQuality.Q_240P],["mp4_360",a.VideoQuality.Q_360P],["mp4_480",a.VideoQuality.Q_480P],["mp4_720",a.VideoQuality.Q_720P],["mp4_1080",a.VideoQuality.Q_1080P],["mp4_1440",a.VideoQuality.Q_1440P],["mp4_2160",a.VideoQuality.Q_2160P]]),r={};o.forEach(((t,o)=>{const a=e[o];a&&(r[t]=m(a))})),Object.keys(r).length&&(t.MPEG=r);return t}(e.files),this.initPlayer=this.initPlayer.bind(this)}}class i{appendPlayer(e){this.videoPlayerElement.hasChildNodes()||this.videoPlayerElement.appendChild(e)}createIframe(e){const t=document.createElement("iframe");return Object.assign(t,{src:e,allowFullscreen:"true",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; fullscreen; encrypted-media",preventHide:"1",type:"text/html",scrolling:"no",allowTransparency:"true"}),t}start(e){if(!e||!e.player)return;const t=this.createIframe(e.player);this.appendPlayer(t)}destroy(){const e=this.videoPlayerElement.children[0];e&&e.remove()}constructor(e){this.videoPlayerElement=e;const{offsetWidth:t,offsetHeight:o}=e;this.width=t,this.height=o}}class c extends i{registerPlayer(){window.customElements.get("vk-video-player")||(0,n.registerPlayerWebComponent)()}start(e){this.openAnnotation.addEventListener("click",this.onListerOpen),this.openAnnotation.innerText=this.openTitle,this.openAnnotation.style.fontWeight="bold",this.openAnnotation.style.cursor="pointer",this.openAnnotation.style.fontSize="14px",this.player.initPlayer({videos:[{sources:this.sources,title:e.title||"",thumbUrl:r.preview(e,this.width,this.height)?.url||"",duration:e.duration||0,unitedVideoId:e.id,previewThumbsData:e.timelineThumbs,videoEpisodes:e.videoEpisode}],repeat:this.needShadowPlay,autoplay:!0,volume:this.needShadowPlay?0:void 0,canDownload:2===e.canDownload,showThumbTimer:this.needShadowPlay,callbacks:{uiInfo:{onControlsVisibleChanged:e=>{this.openAnnotation.style.display=e?"block":"none"}}}}),this.player.setRepeat(this.needShadowPlay);const t=this.player.annotationsApi?.addLayer("red");t&&this.needShadowPlay&&(t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.append(this.openAnnotation))}destroy(){super.destroy(),this.openAnnotation.removeEventListener("click",this.onListerOpen),this.openAnnotation.remove()}constructor(e,t,o,r,a){super(e),this.openAnnotation=document.createElement("div"),this.onListerOpen=()=>{this.player.pause(),this.onOpen?.()},this.videoPlayerElement=e,this.sources=t,this.needShadowPlay=o,this.openTitle=r,this.onOpen=a,this.registerPlayer(),this.player=document.createElement("vk-video-player"),this.appendPlayer.call(this,this.player),this.needShadowPlay=o}}class l extends i{installYoutubeScript(){if(window.YT)return void(this.isScriptEvaluating=!1);const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t?.parentNode?.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{this.isScriptEvaluating=!1}}start(){this.isScriptEvaluating?window.onYouTubeIframeAPIReady=()=>{this.isScriptEvaluating=!1,this.start()}:this.player=new window.YT.Player(this.videoPlayerElement,{videoId:this.videoId,events:{onReady:this.onReady.bind(this),onStateChange:this.onStateChange.bind(this)},height:this.height,width:this.width})}onReady(e){e&&e.target.playVideo()}onStateChange(e){e&&e.data===YT.PlayerState.ENDED&&setTimeout(this.stopVideo,6e3)}stopVideo(){this.player&&this.player.stopVideo()}constructor(e,t){super(e),this.isScriptEvaluating=!0,this.videoPlayerElement=e,this.videoId=t,this.installYoutubeScript(),this.start=this.start.bind(this)}}class d extends i{installCoubScript(){if(document.querySelector("#coub-player"))return void(this.isScriptEvaluating=!1);this.script=document.createElement("script"),this.script.src="//c-cdn.coub.com/embed-runner.js",this.script.async=!0,this.script.id="coub-player";const e=document.getElementsByTagName("script")[0];e?.parentNode?.insertBefore(this.script,e),this.script.onload=()=>{this.isScriptEvaluating=!1}}start(){this.isScriptEvaluating&&this.script?this.script.onload=()=>{this.isScriptEvaluating=!1,this.start()}:this.appendPlayer(this.player)}constructor(e,t){super(e),this.isScriptEvaluating=!0,this.script=null,this.videoPlayerElement=e,this.url=t,this.player=this.createIframe(t+"?autostart=true"),this.installCoubScript.call(this)}}class u extends i{start(){this.appendPlayer(this.player)}constructor(e,t){super(e),this.videoPlayerElement=e,this.url=t,this.player=this.createIframe(t+"?title=0&byline=0&portrait=0")}}function m(e){const{host:t,origin:o}=window.location;return"localhost"===t?`${o}/anyUrlProxy/${e}`:e}},794881:(e,t,o)=>{o.d(t,{ChannelComposerDraftsProvider:()=>m,CommentsComposerDraftsProvider:()=>f,ComposerDraftsProvider:()=>l,useChannelComposerDraft:()=>d,useCommentsComposerDraft:()=>h,useComposerDraft:()=>i});var r=o(667294),a=o(841),n=o(236634),s=o(300749);function i(e){const t=(0,r.useContext)(c);if(!t)throw new Error("ComposerDraftsProvider не добавлен в дерево Реакта!");const o=t[e],n=(0,r.useMemo)((()=>a.empty()),[]);return o?o[o.length-1]??n:n}const c=r.createContext({}),l=c.Provider;function d(e){const t=(0,r.useContext)(u);if(!t)throw new Error("ChannelComposerDraftsProvider не добавлен в дерево Реакта!");const o=(0,r.useMemo)((()=>n.empty()),[]);return t[e]||o}const u=r.createContext({}),m=u.Provider;function h(e,t){const o=(0,r.useContext)(p);if(!o)throw new Error("CommentsComposerDraft не добавлен в дерево Реакта!");const a=(0,r.useMemo)((()=>s.empty()),[]);return o[`${e}-${t}`]||a}const p=r.createContext({}),f=p.Provider},628245:(e,t,o)=>{o.d(t,{useConvoAttaches:()=>d,useConvoAttachesGetMissedPeers:()=>h});var r=o(207739),a=o(24513),n=o(361084),s=o(667294),i=o(345543),c=o(795947);const l=30;function d(e){const[t,o]=(0,s.useState)(null),r=(0,a.useInsertIntoCache)(),{api:i}=(0,a.useBrowserEnv)(),d=(0,a.useOwner)();(0,s.useLayoutEffect)((()=>()=>{o(null)}),[e]);const h=(0,s.useCallback)((async a=>{const s=t||{};if(s[a]?.isLoading||s[a]?.isAllLoaded)return;m(s,!0,a),o({...s});const h=await async function(e,t,o,r,a,s){try{const i=await e.fetch("messages.getHistoryAttachments",{peer_id:t,media_type:u(r),count:l,start_from:s,extended:1,group_id:(0,c.getOwnerGroupId)(o)},{retries:5});if(!i.items||0===i.items.length)return{[r]:{items:[],isAllLoaded:!0,cursorNextLoad:null}};a({profiles:i.profiles,groups:i.groups,contacts:i.contacts});return{[r]:{items:(0,n.fromApiConvoAttach)(i.items)[r]||[],isAllLoaded:!i.next_from,cursorNextLoad:i.next_from}}}catch(e){return{}}}(i,e,d.id,a,r,s[a]?.cursorNextLoad||void 0);!function(e,t){t.audios&&(e.audios={items:(e.audios?.items||[]).concat(t.audios.items),cursorNextLoad:t.audios.cursorNextLoad||null,isAllLoaded:t.audios.isAllLoaded});t.docs&&(e.docs={items:(e.docs?.items||[]).concat(t.docs.items),cursorNextLoad:t.docs.cursorNextLoad||null,isAllLoaded:t.docs.isAllLoaded});t.links&&(e.links={items:(e.links?.items||[]).concat(t.links.items),cursorNextLoad:t.links.cursorNextLoad||null,isAllLoaded:t.links.isAllLoaded});t.photos&&(e.photos={items:(e.photos?.items||[]).concat(t.photos.items),cursorNextLoad:t.photos.cursorNextLoad||null,isAllLoaded:t.photos.isAllLoaded});t.videos&&(e.videos={items:(e.videos?.items||[]).concat(t.videos.items),cursorNextLoad:t.videos.cursorNextLoad||null,isAllLoaded:t.videos.isAllLoaded});t.miniAppWidgets&&(e.miniAppWidgets={items:(e.miniAppWidgets?.items||[]).concat(t.miniAppWidgets.items),cursorNextLoad:t.miniAppWidgets.cursorNextLoad||null,isAllLoaded:t.miniAppWidgets.isAllLoaded})}(s,h),m(s,!1,a),o({...s})}),[i,t,d.id,e,r]);return{attaches:t,getNextPage:h}}const u=e=>({audios:"audio",videos:"video",docs:"doc",links:"share",photos:"photo",miniAppWidgets:"app_action_mini_apps"}[e]);function m(e,t,o){e[o]||function(e,t){switch(t){case"audios":case"videos":case"docs":case"links":case"photos":case"miniAppWidgets":e[t]={items:[],cursorNextLoad:null,isAllLoaded:!1};break;default:(0,i.exhaustivenessCheck)(t)}}(e,o);const r=e[o];r&&(r.isLoading=t)}function h(e){const t=(0,a.useInsertIntoCache)(),{api:o}=(0,a.useBrowserEnv)(),n=e.filter((e=>r.isUserPeerId(e))).join(","),i=e.filter((e=>r.isGroupPeerId(e))).map((e=>r.toRealId(e))).join(",");return{fetchProfilesAndGroups:(0,s.useCallback)((async()=>{const[e,r]=await o.fetchMany([0!==n.length&&{method:"users.get",params:{user_ids:n,extended:1}},0!==i.length&&{method:"groups.getById",params:{group_ids:i,extended:1}}],{retries:3});t({profiles:e||[],groups:r?.groups||[]})}),[o,i,t,n])}}},418592:(e,t,o)=>{o.d(t,{useDeviceData:()=>a});var r=o(86894);function a(){return{isTouchOnly:!(0,r.useAdaptivityWithJSMediaQueries)().hasPointer}}},384665:(e,t,o)=>{o.d(t,{useFastActionsState:()=>a});var r=o(667294);const a=()=>{const[e,t]=(0,r.useState)(!1),[o,a]=(0,r.useState)(!1);return{isDropdownFastActionsOpened:e,isContextMenuFastActionsOpened:o,openDropdownFastActions:(0,r.useCallback)((()=>{a(!1),t(!0)}),[]),openContextMenuFastActions:(0,r.useCallback)((()=>{t(!1),a(!0)}),[]),closeDropdownFastActions:(0,r.useCallback)((()=>{t(!1)}),[]),closeContextMenuFastActions:(0,r.useCallback)((()=>{a(!1)}),[])}}},655922:(e,t,o)=>{o.d(t,{useHover:()=>a});var r=o(667294);const a=()=>{const[e,t]=r.useState(!1),o=r.useCallback((()=>t(!0)),[]),a=r.useCallback((()=>t(!1)),[]),n=r.useRef();return[r.useCallback((e=>{n.current&&(n.current.removeEventListener("mouseenter",o),n.current.removeEventListener("mouseleave",a)),n.current=e,n.current&&(n.current.addEventListener("mouseenter",o),n.current.addEventListener("mouseleave",a))}),[o,a]),e]}},84905:(e,t,o)=>{o.d(t,{Module:()=>s,useGlobalKeyBoardHandlers:()=>d,useModuleKeyBoardHandlers:()=>l});var r=o(345543),a=o(667294),n=o(720186);e=o.hmd(e);const s={MediaViewer:"MediaViewer",Modal:"Modal",Dropdown:"Dropdown",FCComposer:"FCComposer",FCWindow:"FCWindow",RightPanel:"RightPanel",Composer:"Composer",ConvoMain:"ConvoMain",ChannelMain:"ChannelMain"},i={[s.Dropdown]:{priority:1002,blockGlobalHandlers:!0,blockOtherModules:!0},[s.MediaViewer]:{priority:1001},[s.Modal]:{priority:1e3,blockGlobalHandlers:!0,blockOtherModules:!0},[s.FCComposer]:{priority:901},[s.FCWindow]:{priority:900},[s.RightPanel]:{priority:500},[s.Composer]:{priority:200},[s.ConvoMain]:{priority:100},[s.ChannelMain]:{priority:100}};const c=new class{constructor(){this.isSubscribed=!1,this.isGlobalHandlersBlocked=!1,this.globalHandlers=new Map,this.moduleConfig=new Map(Object.entries(i)),this.moduleHandlers=new Map,this.subscribeModuleKeyDown=(t,o)=>{if(r.isDev&&!this.moduleConfig.has(t))throw new Error(`Module ${e} must be in moduleConfig.`);const a=this.moduleHandlers.get(t)??new Set;return a.add(o),this.moduleHandlers.set(t,a),this.onModuleHandlersUpdated(),()=>{a.delete(o),0===a.size&&this.moduleHandlers.delete(t),this.onModuleHandlersUpdated()}},this.subscribeGlobalKeyDown=(e,t)=>{const o=this.globalHandlers.has(e);if(r.isDev&&o)throw new Error(`Global keyCombo ${e} is already subscribed. Unsubscribe it first`);return this.globalHandlers.set(e,t),this.updateSubscription(),()=>{this.globalHandlers.delete(e),this.updateSubscription()}},this.addModuleConfig=(e,t)=>{this.moduleConfig.set(e,t)},this.updateSubscription=()=>{const e=this.globalHandlers.size>0||this.moduleHandlers.size>0;e&&!this.isSubscribed&&(document.addEventListener("keydown",this.keyDownHandler),this.isSubscribed=!0),!e&&this.isSubscribed&&(document.removeEventListener("keydown",this.keyDownHandler),this.isSubscribed=!1)},this.onModuleHandlersUpdated=()=>{this.updateGlobalHandlersBlocked(),this.updateSubscription()},this.callModuleSubscription=(e,t)=>{const o=[...this.moduleConfig.entries()].sort(((e,t)=>t[1].priority-e[1].priority)).map((([e])=>e));for(let r=0;r<o.length;r++){const a=o[r];if(void 0===a)continue;const n=this.moduleHandlers.get(a);if(!n)continue;let s=!1;const i=t=>{const o=t===e;return o&&(s=!0),o};for(const e of Array.from(n).reverse())if(e(i,t),s)break;if(s=s||!!this.moduleConfig.get(a)?.blockOtherModules,s)break}},this.callGlobalSubscription=(e,t)=>{if(this.isGlobalHandlersBlocked)return void t();const o=this.globalHandlers.get(e);o&&(!1!==o.autoPreventDefault?(t(),o.handler()):o.handler(t))},this.updateGlobalHandlersBlocked=()=>{const e=[...this.moduleHandlers.keys()].some((e=>this.moduleConfig.get(e)?.blockGlobalHandlers));this.isGlobalHandlersBlocked=e},this.keyDownHandler=e=>{if(!(e instanceof KeyboardEvent))return;const t=(0,n.getKeyCombo)(e),o=e.preventDefault.bind(e);(0,n.isGlobalKeyCombo)(t)?this.callGlobalSubscription(t,o):(0,n.isModuleKeyCombo)(t)&&this.canCallModuleSubscription()&&this.callModuleSubscription(t,o)},this.canCallModuleSubscription=()=>{const e=document.activeElement;return null===e||(!!(e instanceof HTMLElement&&e.dataset.unlockModalKeydown)||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!(e instanceof HTMLElement&&!0===e.isContentEditable))}}};function l({moduleName:e,config:t}){void 0!==t&&c.addModuleConfig(e,t);return{subscribeKeyDown:(0,a.useCallback)((t=>c.subscribeModuleKeyDown(e,t)),[e])}}const d=()=>({subscribeGlobalKeyDown:c.subscribeGlobalKeyDown})},197254:(e,t,o)=>{o.d(t,{useLongTouch:()=>n});var r=o(667294);const a=500;function n(e,t,o,n=a){(0,r.useEffect)((()=>{const r=t.current;if(!e||!r)return;let a;const s=()=>{a&&(window.clearTimeout(a),a=void 0)},i=e=>{s(),a=window.setTimeout((e=>()=>{s();const t=e=>{r.removeEventListener("touchend",t,!0),e.preventDefault(),e.stopPropagation()};r.addEventListener("touchend",t,{capture:!0,once:!0}),o(e)})(e),n)};return r.addEventListener("touchstart",i,{passive:!0}),r.addEventListener("touchcancel",s,!0),r.addEventListener("touchend",s,!0),r.addEventListener("touchmove",s,{passive:!0}),()=>{s(),r.removeEventListener("touchstart",i),r.removeEventListener("touchcancel",s,!0),r.removeEventListener("touchend",s,!0),r.removeEventListener("touchmove",s)}}),[o,e,n,t])}},942514:(e,t,o)=>{o.d(t,{useModal:()=>s,useModalGroup:()=>c,useSubModal:()=>i});var r=o(667294),a=o(311329),n=o(932111);const s=(e,t="popup")=>l({groupId:e,stackName:t}),i=e=>l({groupId:e,isSubModal:!0}),c=()=>{const{closeGroup:e}=(0,a.useModalContext)(),t=(0,r.useRef)((0,n.createGroupId)()),o=(0,r.useCallback)((()=>e(t.current)),[e]);return{id:t.current,closeGroup:o}},l=e=>{const{closeModalForced:t}=(0,a.useModalContext)(),o=e?.stackName??"popup",s=(0,r.useRef)(e?.groupId??(0,n.createGroupId)()),i=(0,r.useRef)(e?.id?(0,n.resolveModalId)(e?.id):(0,n.createModalId)());return(0,r.useEffect)((()=>()=>{t(i.current,o)}),[]),d((0,r.useMemo)((()=>({modalId:i.current,groupId:s.current,isSubModal:e?.isSubModal})),[e?.isSubModal]),o)},d=(e,t)=>{const{modalId:o}=e,{openedModals:n,openModal:s,closeModal:i,findIndexInStack:c}=(0,a.useModalContext)(),l=(0,r.useCallback)((()=>s(e,t)),[s,e,t]),d=(0,r.useCallback)((()=>i(o,t)),[i,o,t]),u=c(o,t);return(0,r.useMemo)((()=>({isActive:Boolean(n[t].find((({modalId:e})=>e===o))),indexInStack:u,isInStack:null!==u,open:l,close:d})),[d,o,l,n,u,t])}},11316:(e,t,o)=>{o.d(t,{NowContextProvider:()=>s,useNow:()=>i});var r=o(667294);const a=r.createContext(null),n=6e4,s=({children:e})=>{const t=(0,r.useRef)(new Map),o=(0,r.useCallback)(((e,o)=>{let r=t.current.get(e);return r||(r={intervalId:window.setInterval((()=>{const e=Date.now();r?.callbacks.forEach((t=>t(e)))}),e),callbacks:new Set},t.current.set(e,r)),r.callbacks.add(o),()=>{const r=t.current.get(e);r&&(r.callbacks.delete(o),0===r.callbacks.size&&(window.clearInterval(r.intervalId),t.current.delete(e)))}}),[]);return r.createElement(a.Provider,{value:o},e)};function i(e=n){const t=(0,r.useContext)(a);if(null===t)throw new Error("NowContextProvider не добавлен в дерево Реакта!");const[o,s]=(0,r.useState)((()=>Date.now()));return(0,r.useEffect)((()=>t(e,s)),[e,t]),o}},148900:(e,t,o)=>{o.d(t,{useResizeObserver:()=>n});var r=o(667294),a=o(345543);function n({throttleInterval:e,debounceInterval:t}={},o){const n=(0,r.useRef)(),s=(0,r.useRef)(new Map),i=(0,r.useRef)();i.current=o;const c=(0,r.useCallback)((()=>{const o=new Map,r=()=>{const e=Array.from(o.values());e.forEach((e=>{const t=s.current.get(e.target);t&&t(e)})),i.current&&i.current(e),o.clear()};r.cancel=a.noop;const c=e?(0,a.throttle)(r,e):t?(0,a.debounce)(r,t,!0):r;n.current=new ResizeObserver((e=>{e.forEach((e=>{o.set(e.target,e)})),c()}));return[...s.current.keys()].forEach((e=>{n.current?.observe(e)})),()=>{c.cancel(),n.current&&(n.current.disconnect(),n.current=void 0)}}),[e,t]);(0,r.useEffect)((()=>c()),[c]),(0,r.useEffect)((()=>()=>{s.current.clear()}),[]);return{observe:(0,r.useCallback)(((e,t)=>(n.current?.observe(e),t&&s.current.set(e,t),()=>{t&&s.current.delete(e),n.current?.unobserve(e)})),[])}}},329675:(e,t,o)=>{o.d(t,{StickersConfigProvider:()=>c,useStickersConfig:()=>s});var r=o(667294),a=o(474033),n=o(345543);function s(){const e=(0,r.useContext)(i);if(void 0===e)throw new Error("StickersConfigProvider не добавлен в дерево Реакта!");return e}const i=r.createContext(void 0),c=({children:e})=>{const t=(0,a.useStickersApi)(),[o,s]=(0,r.useState)(null);return(0,r.useEffect)((()=>{let e=!1;return t.cache.reload().then((()=>t.cache.imageConfigs.get())).then((t=>!e&&s(t))).catch(n.noop),()=>{e=!0}}),[t.cache]),r.createElement(i.Provider,{value:o},e)}},823190:(e,t,o)=>{o.d(t,{ActionsMenu:()=>c,ActionsMenuAction:()=>l,ActionsMenuDropdownAction:()=>d,ActionsMenuSeparator:()=>u});o(759244);var r=o(667294),a=o(294184),n=o.n(a),s=o(364548),i=o(660798);const c=({className:e,children:t,...o})=>r.createElement("div",{...o,className:n()("ActionsMenu",e)},t),l=({leftIcon:e,rightIcon:t,title:o,subtitle:a,type:s="secondary",size:i="regular",isActive:c=!1,isLoading:l,className:d,onClick:u,titleClassName:m,...h})=>r.createElement("button",{...h,className:n()("ActionsMenuAction",s&&`ActionsMenuAction--${s}`,l&&"ActionsMenuAction--loading",c&&"ActionsMenuAction--active",`ActionsMenuAction--size-${i}`,d),onClick:u},e&&r.createElement("i",{className:"ActionsMenuAction__icon"},e),r.createElement("span",{className:n()("ActionsMenuAction__title",m)},o,a&&r.createElement("span",{className:"ActionsMenuAction__subtitle"},a)),t&&r.createElement("i",{className:"ActionsMenuAction__icon"},t)),d=({children:e,icon:t,openType:o,hideOnClick:a=!0,position:d,align:u,actionsMenuClassName:m,layoutMode:h,...p})=>{const[f,v]=(0,r.useState)(!1),g=(0,r.useMemo)((()=>{const e="two-column"===h?{position:"right",align:"left"}:{position:"bottom",align:"right"};return d&&(e.position=d),u&&(e.align=u),e}),[h,d,u]);return r.createElement(i.Dropdown,{content:r.createElement(c,{className:n()(m,{"ActionsMenu--dropdown":"two-column"===h})},e),..."click"===o?{openType:"click"}:{openType:"hover",hideDelay:0,delay:300},...g,classNames:{trigger:"ActionsMenu--dropdown-trigger"},adaptation:"vertical",onOpen:()=>v(!0),onClose:()=>v(!1),hideOnClick:a,canOpen:!p.disabled},r.createElement(l,{...p,isActive:f,leftIcon:t,rightIcon:r.createElement(s.Icon16Chevron,null)}))},u=({className:e})=>r.createElement("div",{role:"separator",className:n()("ActionsMenuAction__separator",e)})},773420:(e,t,o)=>{o.d(t,{AttachAudio:()=>x});o(963328);var r=o(667294),a=o(294184),n=o.n(a),s=o(345543),i=o(24513),c=o(410388),l=o(114626),d=o(842281),u=o(7479),m=o(205461),h=o(140518),p=o(579643),f=o(473216),v=o(800697),g=o(757342),_=o(385228),k=o(86894),b=o(655922),E=o(97451),y=o(467741),w=o(660798),C=o(823190),I=o(418592),A=o(896704),S=o(384665);const x=r.memo((function({audio:e,withPhoto:t=!0,isOut:o,isInBubble:a,isPrimary:n,actions:s,className:i,withDuration:c,highlightActiveTrackTitle:l,source:d,onWidthChange:u}){const m=a&&o;return Boolean(e.contentRestricted)?r.createElement(M,{audio:e,withPhoto:t,isInOutBubble:m,isPrimary:n,className:i,withDuration:c,highlightActiveTrackTitle:l,onWidthChange:u}):r.createElement(P,{audio:e,withPhoto:t,isInOutBubble:m,isPrimary:n,actions:s,className:i,withDuration:c,highlightActiveTrackTitle:l,source:d,onWidthChange:u})})),P=r.memo((function({audio:e,withPhoto:t,isInOutBubble:o,isPrimary:a,actions:n,className:s,withDuration:d,highlightActiveTrackTitle:u,source:m,onWidthChange:h}){const{player:p}=(0,i.useBrowserEnv)(),f=(0,r.useContext)(c.ConvoAudiosPlaylistContext),v=(0,i.usePixelDensity)(),[g,_]=(0,r.useState)("stopped"),[k,b]=(0,r.useState)(0),E=(0,r.useRef)(`${e.ownerId}_${e.id}`),y=(0,r.useCallback)((e=>{const{currentTrackEntity:t,status:o}=e;if(t?.audioTrack&&t.audioTrack.id===E.current){const{progress:e}=t.audioTrack;_(o),b(e)}else _("stopped"),b(0)}),[]);(0,r.useEffect)((()=>(p.subscribe("stateupdated",y),()=>{p.unsubscribe("stateupdated",y)})),[e,y,p]),(0,r.useEffect)((()=>{y(p.getState())}),[]);const w=(0,r.useCallback)((t=>{if(e.url){if("playing"===g)p.pause();else{const t=f();p.play((0,l.toConvoAudioTrack)(k,e,m,v),t)}t.preventDefault()}}),[e,g,p,f,k,m,v]);return r.createElement(N,{progress:k,artist:e.artist,title:e.title,duration:e.duration,status:g,thumb:e.thumb,isExplicit:e.isExplicit,isInOutBubble:o,isPrimary:a,actions:n,onClick:w,withPhoto:t,className:s,withDuration:d,highlightActiveTrackTitle:u,onWidthChange:h})}));function M({audio:e,withPhoto:t,isInOutBubble:o,isPrimary:a,className:s,withDuration:i,highlightActiveTrackTitle:c,onWidthChange:l}){const{navigate:u}=(0,d.useRouter)();return r.createElement(N,{progress:0,artist:e.artist,title:e.title,duration:e.duration,status:"stopped",thumb:e.thumb,isExplicit:e.isExplicit,isInOutBubble:o,isPrimary:a,withPhoto:t,withDuration:i,highlightActiveTrackTitle:c,className:n()("AttachAudio__restricted",s),onClick:()=>{u({kind:"AudioRestrictionRuntimeRoute",audio:e})},onWidthChange:l})}const N=({progress:e,duration:t,artist:o,title:a,status:c,thumb:d,withPhoto:x,isInOutBubble:P,isPrimary:M,isExplicit:N,className:R,withDuration:T,highlightActiveTrackTitle:O,actions:j,onClick:L,onWidthChange:D})=>{const{lang:V}=(0,i.useBrowserEnv)(),{isTouchOnly:K}=(0,I.useDeviceData)(),U=(0,i.usePixelDensity)(),B="dark"===(0,k.useAppearance)(),{settings:H}=(0,i.useViewer)(),F=H.fastActionsTrigger,{isDropdownFastActionsOpened:G,isContextMenuFastActionsOpened:$,openDropdownFastActions:W,openContextMenuFastActions:z,closeDropdownFastActions:q,closeContextMenuFastActions:Y}=(0,S.useFastActionsState)(),[J,X]=(0,r.useState)(null),Q=M?u.Icon28Pause:m.Icon20PauseCircle,Z=M?h.Icon28Play:p.Icon20PlayCircle,ee=M?f.Icon28SongOutline:v.Icon20SongOutline,te=M?k.Subhead:k.Footnote,[oe,re]=(0,b.useHover)(),ae="playing"===c||"paused"===c,ne=U?135:68,se=U?270:135,ie=(0,l.getAudioThumb)(d,M?se:ne),ce=O&&ae;return(0,r.useEffect)((()=>{if(M){const e=220;D?.(e)}}),[M,D]),r.createElement("div",{ref:e=>{oe(e),X(e)},className:n()("AttachAudio",R,{"AttachAudio--dark":B,"AttachAudio--out":P,"AttachAudio--primary MEAppThemeStylesContrastDisable":M}),onClick:L},x&&r.createElement("div",{className:"AttachAudio__album"},d?r.createElement("img",{className:"AttachAudio__albumImg",alt:`${a} — ${o}`,src:ie}):r.createElement("div",{className:"AttachAudio__albumImg AttachAudio__albumImg--placeholder"},!re&&!ae&&r.createElement(ee,null)),(()=>{const t=ae||re;return r.createElement("div",{className:"AttachAudio__albumControls"},r.createElement("div",{className:n()("AttachAudio__albumControlsBackdrop",{"AttachAudio__albumControlsBackdrop--show":t})}),r.createElement("div",{className:"AttachAudio__albumControlsIcon"},(()=>{const e=V.use("me_attach_track_play_aria_label"),t=V.use("me_attach_track_play_aria_label");return"playing"===c?(re||M)&&r.createElement(Q,{"aria-label":t}):"paused"===c?(re||M)&&r.createElement(Z,{"aria-label":e}):"stopped"===c?re&&r.createElement(Z,{"aria-label":e}):void 0})()),!M&&ae&&r.createElement(E.AttachAudioSoundBar,{isActive:"playing"===c,className:n()("AttachAudio__albumControlsBar",{"AttachAudio__albumControlsBar--hide":re})}),M&&ae&&r.createElement(y.ProgressCircle,{className:"AttachAudio__albumControlsProgress",progress:Number((100*e).toFixed(2)),size:46,ariaLabel:V.use("me_attach_track_progress_aria_label")}))})()),r.createElement("div",{className:"AttachAudio__info"},r.createElement(k.Headline,{level:M?"1":"2",weight:M?"2":"3",className:"AttachAudio__title"},ce&&r.createElement(E.AttachAudioSoundBar,{isActive:"playing"===c,color:"var(--vkui--color_text_accent)"}),r.createElement("span",{className:n()("AttachAudio__titleText",{"AttachAudio__titleText--highlight":ce})},a),N&&r.createElement("span",{className:"AttachAudio__titleExplicit","aria-label":V.use("me_attach_track_explicit_aria_label")},r.createElement(g.Icon12Explicit,null))),M?r.createElement(k.Subhead,{className:"AttachAudio__artist"},o):r.createElement(k.Footnote,{className:"AttachAudio__artist"},o)),T&&r.createElement(te,{className:"AttachAudio__duration"},r.createElement("span",{role:"timer",className:"AttachAudio__durationProgress","aria-label":V.use("me_attach_track_time_left_aria_label")},ae?function(e,t){return(0,s.formatDuration)(Math.ceil(t*e))}(e,t):(0,s.formatDuration)(t))),j&&"rightClick"!==F&&r.createElement("div",{className:"AttachAudio__actions"},r.createElement(w.Dropdown,{open:G,onOpen:W,onClose:q,classNames:{wrapper:n()("AttachAudio__dropdown",{"AttachAudio__dropdown--open":K}),wrapperOpened:"AttachAudio__dropdown--open"},content:r.createElement(C.ActionsMenu,null,j),align:"center",position:"bottom",openType:K?"click":"hover"},r.createElement("button",{className:"AttachAudio__action","aria-label":V.use("me_actions_more")},K&&r.createElement("div",{className:"AttachAudio__actionTapArea"}),r.createElement(_.Icon20More,null)))),j&&"hover"!==F&&r.createElement(A.ContextMenu,{ref:{current:J},open:$,onOpen:z,onClose:Y,allowNativeContextMenu:!0,content:r.createElement(C.ActionsMenu,null,j)}))}},97451:(e,t,o)=>{o.d(t,{AttachAudioSoundBar:()=>i});o(98264);var r=o(667294),a=o(294184),n=o.n(a),s=o(345543);const i=({isActive:e,color:t,className:o})=>{const a=(0,r.useRef)(null),i=(0,r.useRef)(e);i.current=e;const c=(0,r.useRef)(!1),l=[[.4,1],[.3,.85],[.2,.65],[.05,.5]];(0,r.useEffect)((()=>{const e=setInterval((()=>{if(!a.current)return;if(!i.current&&c.current)return;const e=a.current.children;for(let t=0;t<e.length;t++){const o=e[t],r=o instanceof HTMLDivElement&&o.style;if(!r)return;if(!i.current){r.height="2px";continue}const[a=0,n=0]=l[t]??[];r.height=(0,s.getRandomFloat)(14*a,14*n)+"px"}c.current=!i.current}),150);return()=>{clearInterval(e)}}),[]);const d={...t&&{color:t}};return r.createElement("div",{ref:a,className:n()("AttachAudioSoundBar",o),style:d},r.createElement("div",{className:"AttachAudioSoundBar__bar"}),r.createElement("div",{className:"AttachAudioSoundBar__bar"}),r.createElement("div",{className:"AttachAudioSoundBar__bar"}),r.createElement("div",{className:"AttachAudioSoundBar__bar"}))}},671947:(e,t,o)=>{o.d(t,{AttachCard:()=>d,getExpectedAttachPhotoWidth:()=>u});o(760398);var r=o(667294),a=o(489267),n=o(24513),s=o(803854),i=o(613787),c=o(294184),l=o.n(c);const d=({href:e,attach:t,picture:o,title:c,subtitle:d,alt:u,isInBubble:m,isOut:h,picturePlaceholder:p,className:f})=>{const{calls:v,router:g}=(0,n.useBrowserEnv)(),_=r.createElement(i.AttachmentCell,{isInBubble:m,isOut:h,alt:u,image:o||p,title:c,subtitle:d}),k=t?{kind:"AttachProxyRoute",attach:t,fallbackUrl:e||void 0}:null,b="ConvoRoute"===g.screenRoute.kind?g.screenRoute:null;if(e&&k&&b&&g.toUrl(k)&&(s.isCallJoinLink(e)&&v||s.isChatInviteLink(e))){const[,t]=e.split("/join/");if(t)return r.createElement(a.ExternalLink,{href:e,onClick:o=>{o.preventDefault(),g.push({...b,chatJoinHash:s.isChatInviteLink(e)?t:void 0,callJoinHash:s.isCallJoinLink(e)?t:void 0})},className:"AttachCard"},_)}return k?r.createElement(a.Link,{to:k,className:l()(f,"AttachCard")},_):e?r.createElement(a.ExternalLink,{href:e,className:l()(f,"AttachCard")},_):r.createElement("span",{className:"AttachCard"},_)};function u(){return 40*("undefined"!=typeof window?window.devicePixelRatio:1)}},490583:(e,t,o)=>{o.d(t,{AttachDoc:()=>M});o(403658);var r=o(667294),a=o(803854),n=o(240928),s=o(775130),i=o(583685),c=o(50901),l=o(680237),d=o(738199),u=o(152406),m=o(824283),h=o(489267),p=o(345543),f=o(294184),v=o.n(f),g=o(24513),_=o(260349),k=o(373775),b=o(942514),E=o(86894),y=o(613787),w=o(131854),C=o(851644),I=o(855419),A=o(422177),S=o(492858),x=o(387337),P=o(804931);const M=({doc:e,variant:t="inline",isInBubble:o=!1,forwardLevel:f=0,isOut:E=!1,className:w,subtitle:C,isClickDisabled:I=!1})=>{const A=(0,g.usePixelDensity)(),[,S]=(0,_.getExpectedAttachWidth)(A,o,f,232),x=(0,b.useModal)(),P=(0,r.useCallback)((t=>{e.isUnsafe&&(0!==t.button&&1!==t.button||(t.preventDefault(),x.open()))}),[e.isUnsafe,x]),M=a.preview(e,S),R=[e.ext.toUpperCase(),(0,p.formatFileSize)(e.size)],T=(0,r.useMemo)((()=>{switch(e.type){case"spreadsheet":return r.createElement(n.Icon24DocumentListOutline,null);case"audio":return r.createElement(s.Icon24MusicOutline,null);case"video":return r.createElement(i.Icon24VideoOutline,null);case"image":case"gif":return r.createElement(c.Icon24PictureOutline,null);case"ebook":return r.createElement(l.Icon24BooksOutline,null);case"archive":return r.createElement(d.Icon28ZipOutline,{width:24});case"text":return r.createElement(u.Icon24DocumentTextOutline,null);case"default":return r.createElement(m.Icon24DocumentOutline,null);default:(0,p.exhaustivenessCheck)(e.type)}}),[e.type]);return"preview"===t&&e.image?r.createElement(k.AttachDocPreview,{doc:e,meta:C||R[0]+" · "+R[1],isInBubble:o,forwardLevel:f}):r.createElement(r.Fragment,null,r.createElement(h.ExternalLink,{onClick:P,onAuxClick:P,disabled:I,href:e.url,className:v()("AttachDoc",w)},r.createElement(y.AttachmentCell,{isInBubble:o,isOut:E,image:M?M.url:T,title:e.title,subtitle:C||R,alt:e.title})),x.isActive&&r.createElement(N,{onClose:x.close,title:e.title,url:e.url}))},N=({onClose:e,url:t,title:o})=>{const{lang:a}=(0,g.useBrowserEnv)();return r.createElement(A.ModalView,{onEscape:e,contextClass:"MEConfig"},r.createElement(C.ModalBackdrop,{onClick:e},r.createElement(I.ModalPanel,{className:"AttachDoc__unsafe-modal"},r.createElement(S.ModalHeader,{closeLabel:a.use("me_close"),onClose:e,title:a.use("me_download_unsafe_title")}),r.createElement(x.ModalBody,null,r.createElement(w.FormattedLangKey,{langkey:"me_download_unsafe_text",values:{filename:r.createElement("b",{className:"AttachDoc__unsafe-filename"},o)}})),r.createElement(P.ModalFooter,{buttons:[r.createElement(E.Button,{mode:"tertiary",key:"cancel",onClick:e},a.use("me_cancel")),r.createElement(E.Button,{href:t,download:!0,mode:"primary",onClick:e,key:"download"},a.use("me_download"))]}))))}},373775:(e,t,o)=>{o.d(t,{AttachDocPreview:()=>u});o(861848);var r=o(667294),a=o(803854),n=o(489267),s=o(366750),i=o(996955),c=o(24513),l=o(260349),d=o(854367);const u=({doc:e,meta:t,isInBubble:o=!1,forwardLevel:u=0})=>{const[m,h]=(0,r.useState)(!1),p=(0,c.usePixelDensity)(),f="gif"===e.ext,[v,g]=(0,l.getExpectedAttachWidth)(p,o,u,232),_=a.preview(e,g);if(!_)return null;const k=Math.min(_.width,v),b=Math.ceil(_.height/_.width*k);return r.createElement(n.ExternalLink,{href:e.url,className:"AttachDocPreview",style:{width:Math.max(k,120),height:Math.max(b,120)},onClick:f?e=>{h((e=>!e)),e.preventDefault()}:void 0,target:f?"_self":"_blank"},r.createElement(d.PhotoItem,{className:"AttachDocPreview__photoItem",alt:e.title,src:m?e.url:_.url,width:Math.max(k,120),height:Math.max(b,120)}),f&&!m&&r.createElement("div",{className:"AttachDocPreview__play"},r.createElement(i.Icon32Play,null)),r.createElement(s.ComposerAttachPreviewMeta,{rounded:!0,top:!0,left:!0},r.createElement("span",{className:"AttachDocPreview__meta"},t)))}},701130:(e,t,o)=>{o.d(t,{AttachLink:()=>c});o(178854);var r=o(667294),a=o(803854),n=o(671947),s=o(784847),i=o(24513);const c=({link:e,isInBubble:t,isOut:o})=>{const{lang:c}=(0,i.useBrowserEnv)(),{url:l,subtitle:d,title:u}=e,m=a.preview(e,(0,n.getExpectedAttachPhotoWidth)(),0,!0),h=u||c.use("me_attaches_link_title_fallback");return r.createElement(n.AttachCard,{attach:e,href:l,title:h,subtitle:d,picture:m?.url,picturePlaceholder:r.createElement(s.Icon24ExternalLinkOutline,null),alt:h,isInBubble:t,isOut:o})}},815647:(e,t,o)=>{o.d(t,{AttachMiniApp:()=>i});o(964294);var r=o(667294),a=o(24513),n=o(489267),s=o(613787);const i=r.memo((function({miniApp:e,isInBubble:t,isOut:o}){const{title:i,images:c}=e,l=(0,a.usePixelDensity)(),{lang:d}=(0,a.useBrowserEnv)(),[u,m]=c,h=(l?m:u)||u;return r.createElement(n.Link,{to:{kind:"AttachProxyRoute",attach:e},className:"AttachMiniApp"},r.createElement(s.AttachmentCell,{isInBubble:t,isOut:o,title:i,subtitle:d.use("me_attaches_mini_app_description"),image:h.url,alt:d.use("me_attaches_mini_app_alt")}))}))},463279:(e,t,o)=>{o.d(t,{AttachVideos:()=>S,getDuration:()=>P});o(458327);var r=o(667294),a=o(803854),n=o(294184),s=o.n(n),i=o(996955),c=o(96715),l=o(345543),d=o(489267),u=o(260349),m=o(682021),h=o(919057),p=o(854367),f=o(977657),v=o(207739),g=o(24513),_=o(86894),k=o(480365),b=o(775878),E=o(628245),y=o(997650),w=o(364287),C=o(720186);const I=220,A=100,S=({videos:e,isCompact:t=!1,forwardLevel:o=0,attachmentsCount:n,showDateOutInsidePublicVideo:s,isUnread:i,forceAutoPlay:c,message:l,withSwipeNavigation:d,getAdditionalLinkPayload:p,onWidthChange:f})=>{const _=(0,u.getAttachForwardIndent)(o),{width:k,minHeight:b,maxSingleHeight:y,preferredRatio:w}=(0,m.useImagesLayout)(),C=k-_,S=1===e.length,P=(0,g.usePeers)(),M=(0,g.useFeatureFlags)(),N=function(e,t,o){if(!o)return t;return"width"===e?Math.max(I,t):Math.max(A,t)}("width",k,S),R=(0,r.useMemo)((()=>e.reduce(((e,t)=>e+"__"+t.id),`${C}__${b}__${w}`)),[e,C,b,w]),T=(0,r.useMemo)((()=>{const t=e.reduce(((e,t)=>{const o=a.preview(t,C);return o&&e.push({...o,width:o.width||t.width||1600,height:o.height||t.height||900,videoAttach:t}),e}),[]);if(!t.length)return null;const o=(0,h.computeAttachePhotosLayout)(w,C,{minHeight:b,maxSingleHeight:y},t),r=(0,h.applyGap)(o,2),n=r[0][0];if(S){const e=a.preview(n.videoAttach,C),t=e&&e.height<n.height?Math.max(e.height,A):Math.max(n.height,A),o=e&&e.width<n.width?Math.max(e.width,I):Math.max(n.width,I);return[[{...n,height:t,width:o}]]}return r}),[R,b,y,w,C]),O=M.vkm_new_attach_video&&1===n&&T&&!T[0][0].videoAttach.isFromMessage&&void 0===T[0][0].videoAttach.platform&&"short_video"!==T[0][0].videoAttach.type&&T[0][0],j=e.filter((e=>!P.has(v.resolveId(e.ownerId)))).map((e=>v.resolveId(e.ownerId))),{fetchProfilesAndGroups:L}=(0,E.useConvoAttachesGetMissedPeers)(j);return(0,r.useEffect)((()=>{f?.(S?O?N:T?.[0]?.[0]?.width||0:C)}),[C,S,f,R]),(0,r.useEffect)((()=>{L()}),[]),T?r.createElement("div",{className:"AttachVideos AttachVideos--inBubble",style:{maxWidth:S?O?N:"max-content":C,"--videoAttachGap":"2px"}},T.map(((o,a)=>r.createElement("div",{className:"AttachVideos__layoutRow",key:`${a}__${R}`},o.map((({width:o,height:a,url:u,videoAttach:m})=>{const{id:h,duration:f,platform:v,files:g,restriction:_}=m;return r.createElement(x,{key:h,src:u,width:o,height:a,video:m,showPlayIcon:e.length<=3,duration:f,isCompact:t,platform:v,files:g,restriction:_,attachmentsCount:n,forceAutoPlay:c,isTheOnlyAttach:S,isUnread:i,maxWidthPublicVideo:N,message:l,showDateOutInsidePublicVideo:s,position:d?(k=m,"short_video"===k.type||!k.isFromMessage||k.files?.external?void 0:k.position):0,getAdditionalLinkPayload:p});var k})))))):null},x=({src:e,width:t,height:o,video:a,duration:n,isCompact:l,restriction:u,files:m,platform:h,showPlayIcon:E,attachmentsCount:I,forceAutoPlay:A,isTheOnlyAttach:S,maxWidthPublicVideo:x,showDateOutInsidePublicVideo:M,isUnread:N,message:R,position:T,getAdditionalLinkPayload:O})=>{const j=(0,g.useFeatureFlags)(),L=(0,g.usePeers)(),{lang:D,vkDomain:V,router:K}=(0,g.useBrowserEnv)(),U=(0,r.useRef)(null),{inView:B}=(0,y.useInView)(),H=!!u?.isBlur,F=void 0===u?.canPlay||u.canPlay,G=P(n,!!m?.external)||h,[$,W]=(0,r.useState)(null),z=j.vkm_new_attach_video&&1===I&&!a.isFromMessage&&void 0===a.platform&&"short_video"!==a.type&&a,q=j.vkm_new_attach_video&&1===I&&void 0!==a.platform&&a&&a;let Y;!1!==z&&S&&L.has(v.resolveId(z.ownerId))&&(Y=v.safeGet(L,v.resolveId(z.ownerId)));const J=!1!==z&&function(e,t){if(!e)return"";const o=Date.now()/1e3-e/1e3;if(o<60)return t.use("me_video_added_less_than_a_minute_ago");if(o<3600)return t.use("me_video_mins_ago",{num:Math.floor(o/60)});if(o<86400)return t.use("me_video_hours_ago",{num:Math.floor(o/3600)});if(o<2592e3)return t.use("me_video_days_ago",{num:Math.floor(o/86400)});if(o<31536e3)return t.use("me_video_months_ago",{num:Math.floor(o/2592e3)});return t.use("me_video_years_ago",{num:Math.floor(o/31363200)})}(z.uploadDate,D),X=!!u&&(H||!F),Q=j.vkm_autoplay_video&&I&&1===I&&!a.files?.external&&A,Z=()=>{const e={kind:"AttachMediaProxyRoute",attach:a,source:O?.({mediaViewerItemPosition:T})};K.push(e)};return(0,r.useEffect)((()=>{U.current&&(B?U.current.play().catch((()=>{})):U.current.pause())}),[B]),(0,r.useEffect)((()=>{const e=new w.VideoPlayer(a,!0,D.use("me_open_video_annotation"),Z);return W(e),()=>{e.destroy()}}),[a.id]),r.createElement("div",{className:s()("AttachVideos__base",{"AttachVideos__base--withFooter":z&&Y||q}),onClick:e=>{if(Q)return e.stopPropagation()}},r.createElement(d.Link,{to:{kind:"AttachMediaProxyRoute",attach:a,source:O?.({mediaViewerItemPosition:T})},className:"AttachVideos__link",disabled:!F||Boolean(Q)&&"short_video"!==a.type},"short_video"===a.type?r.createElement(f.AttachVideosClip,{ownerId:a.ownerId,clip:a,previewUrl:e,isRestricted:X,isCompact:l}):r.createElement(r.Fragment,null,Q?$&&r.createElement("div",{onKeyDown:e=>{if((0,C.getKeyCombo)(e)!==C.LangPersistentKey.Escape)return e.stopPropagation()},style:{height:o,width:z?x:t},id:`inlineVideoContainer_${a.id}`,ref:e=>{$.initPlayer(e,!0,D.use("me_open_video_annotation"),Z)}}):r.createElement(p.PhotoItem,{width:z?x:t,height:o,src:e,alt:a.title,widthAndHeightAsAttr:!!z,className:s()({AttachVideos__previewBackdrop:H||!F})}),!(H||!F||Q)&&r.createElement(r.Fragment,null,E&&r.createElement("div",{className:"AttachVideos__videoPlay"},r.createElement(i.Icon32Play,null)),G&&"live"!==a.type&&r.createElement("div",{className:"AttachVideos__videoInfo"},G),"live"===a.type&&r.createElement("div",{className:"AttachVideos__videoLive"},r.createElement(k.IconLiveText20h,{className:"AttachVideos__videoLive--icon"}))),(H||!F)&&r.createElement("div",{className:"AttachVideos__videoRestrictionWrap"},r.createElement("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:`url('${u?.cardIcon?.slice(-1).pop()?.url}')`,filter:"invert(100%)"}}),void 0!==u?.title&&r.createElement("div",null,u.title)))),z&&Y&&r.createElement("div",{className:"AttachVideos__info"},r.createElement(_.Subhead,{className:"AttachVideos__videoName"},r.createElement(d.Link,{to:{kind:"AttachMediaProxyRoute",attach:a,source:O?.({mediaViewerItemPosition:T})},className:"AttachVideos__videoName--link",disabled:!F},z.title)),r.createElement("div",{className:"AttachVideos__authorName"},a.mainArtists&&a.mainArtists.map(((e,t,o)=>r.createElement(d.ExternalLink,{href:`https://${V}/artist/${e.domain}`,className:"AttachVideos__authorLink AttachVideos__artistLink"},r.createElement("span",null,e.name),t<o.length-1&&r.createElement("span",null,", ")))),!a.mainArtists&&r.createElement(d.ExternalLink,{href:`https://${V}/${"short_video"===z.type?"clips/":"video/@"}${v.linkVideo(Y)}`,className:"AttachVideos__authorLink"},r.createElement("span",null,v.name(Y)),"isVerified"in Y&&Y.isVerified&&r.createElement("span",null,r.createElement(c.Icon16Verified,{className:"AttachVideos__authorVerified"})))),F&&r.createElement("div",{className:"AttachVideos__views"},D.use("me_convo_attaches_video_views",{num:z.views,formatted:"short",values:{count:D.formatNumber(z.views,"short")}}),J&&r.createElement(r.Fragment,null," · ",J),M&&"Normal"===R?.kind&&void 0!==N&&r.createElement(b.ConvoMessageBottomInfo,{className:"ConvoMessage__info",dateClassName:"ConvoMessage__date",message:R,isUnread:N,showDate:!0}))),q&&r.createElement("div",{className:"AttachVideos__info"},r.createElement(_.Subhead,{className:"AttachVideos__videoName AttachVideos__videoName--external"},q.title),r.createElement("div",{className:"AttachVideos__views"},r.createElement(d.ExternalLink,{href:q.files?.external||"",className:"AttachVideos__authorLink"},q.platform,M&&"Normal"===R?.kind&&void 0!==N&&r.createElement(b.ConvoMessageBottomInfo,{className:"ConvoMessage__info ConvoMessage__info--external",dateClassName:"ConvoMessage__date",message:R,isUnread:N,showDate:!0})))))};function P(e,t){return void 0===e?"":!t||t&&e?(0,l.formatDuration)(e):""}},977657:(e,t,o)=>{o.d(t,{AttachVideosClip:()=>p});var r=o(667294),a=o(294184),n=o.n(a),s=o(300993),i=o(29870),c=o(522300),l=o(24513),d=o(713020),u=o(27932),m=o(854367),h=o(207739);o(80510);const p=({ownerId:e,clip:t,previewUrl:o,isRestricted:a=!1,isCompact:p=!1})=>{const f=(0,l.usePeers)(),{lang:v}=(0,l.useBrowserEnv)(),g=h.safeGet(f,h.resolveId(e));return r.createElement("div",{className:n()("AttachVideosClip",{"AttachVideosClip--restricted":a}),style:{width:(p?132:200)+"px",height:(p?236:356)+"px"}},r.createElement("div",{className:"AttachVideosClip__container"},!a&&r.createElement(r.Fragment,null,r.createElement("div",{className:"AttachVideosClip__head"},r.createElement(u.Avatar,{peer:g,size:20,className:"AttachVideosClip__avatar"}),r.createElement(d.PeerTitle,{peer:g,className:"AttachVideosClip__title",iconColor:"var(--vkui--color_text_contrast)"})),r.createElement(m.PhotoItem,{width:p?132:200,height:p?236:356,src:o,alt:t.title}),r.createElement("div",{className:"AttachVideosClip__videoPlay"},r.createElement(s.Icon24Play,null)),r.createElement("span",{className:"AttachVideosClip__logo"},r.createElement(i.Icon20LogoClipsOutline,null))),a&&r.createElement("div",{className:"AttachVideosClip__restrictedContainer"},r.createElement(c.Icon28LockOutline,{className:"AttachVideosClip__restrictedIcon"}),r.createElement("p",{className:"AttachVideosClip__restrictedText"},v.use("me_attach_clip_private")))))}},613787:(e,t,o)=>{o.d(t,{AttachmentCell:()=>c,AttachmentCellButton:()=>l});var r=o(86894),a=(o(238931),o(667294)),n=o(854367),s=o(294184),i=o.n(s);const c=({className:e,isAvailable:t=!0,isClickable:o,isOut:s=!1,isInBubble:c=!1,title:l,subtitle:d,image:u,onClick:m,imageShape:h="square",icon:p,alt:f,imageDetailRightBottom:v,buttonRight:g,additionalBlock:_})=>{o=void 0===o?!g:o;const k=(0,a.useCallback)((()=>{const e="roundWithBorder"===h?"calc(var(--attachmentCellImageHeight) - 5px)":"var(--attachmentCellImageHeight)";return a.createElement("div",{className:i()("AttachmentCell__imageBlockContainer",{"AttachmentCell__imageBlockContainer--inOutBubble":c&&s,"AttachmentCell__imageBlockContainer--roundWithBorder":"roundWithBorder"===h,"AttachmentCell__imageBlockContainer--round":"round"===h,"AttachmentCell__imageBlockContainer--square":"square"===h})},a.createElement("div",{className:"AttachmentCell__imageBlockBackground"}),a.createElement("div",{className:i()("AttachmentCell__imageBlock")},"string"==typeof u?a.createElement(n.PhotoItem,{className:"AttachmentCell__photoItem",src:u,height:e,width:e,alt:f,cover:!0}):u),p&&a.createElement("div",{className:i()("AttachmentCell__icon",{"AttachmentCell__icon--withImage":u,"AttachmentCell__icon--roundWithBorder":"roundWithBorder"===h,"AttachmentCell__icon--round":"round"===h,"AttachmentCell__icon--square":"square"===h})},p),v&&a.createElement("div",{className:"AttachmentCell__imageDetailLeftBottom"},v))}),[h,c,s,u,f,p,v]),b=(0,a.useCallback)((()=>Array.isArray(d)?`${d[0]} ᐧ ${d[1]}`:d),[d]);return a.createElement("div",{className:i()(e,"AttachmentCell",{"AttachmentCell--withButton":g,"AttachmentCell--clickable":o}),onClick:m},k(),a.createElement("div",{className:"AttachmentCell__infoBlockContainer"},a.createElement("div",{className:"AttachmentCell__infoBlock"},t?a.createElement(a.Fragment,null,a.createElement(r.Headline,{level:"1",className:"AttachmentCell__headline"},l),a.createElement(r.Footnote,{className:i()("AttachmentCell__footnote",{"AttachmentCell__footnote--inOutBubble":c&&s})},b())):a.createElement(r.Headline,{level:"1",className:"AttachmentCell__headline AttachmentCell__headline--unavailable"},l)),_&&a.createElement("div",{className:"AttachmentCell_additionalBlockContainer"},_)),g&&a.createElement("div",{className:"AttachmentCell_buttonContainer"},g))},l=e=>a.createElement(r.Button,{size:"s",mode:"primary",...e},e.children)},27932:(e,t,o)=>{o.d(t,{Avatar:()=>d});o(380283);var r=o(667294),a=o(294184),n=o.n(a),s=o(24513),i=o(345543),c=o(83298),l=o(642602);const d=r.memo((function({peer:e,size:t,activityIndicator:o,withOnline:a=!1,withBirthday:i=!1,activeCall:c,className:d}){const m=function(e,t){if(!e?.isOnline)return"Offline";if(t)switch(e.platform){case"vkme":case"mobile":return"Mobile";case"other":return"Online";default:e.platform;return"Online"}return"Offline"}((0,s.useLastSeen)(e.id),a),h=!!c,p=i&&function(e){if("User"!==e.kind||!e.bdate)return!1;const t=new Date,o=String(t.getDate()),r=String(t.getMonth()+1),{day:a,month:n}=RegExp("(?<day>\\d+)\\.(?<month>\\d+)").exec(e.bdate)?.groups||{};return a===o&&n===r}(e),f=(0,r.useMemo)((()=>({width:t,height:t})),[t]),v=function(e,t,o){return`mePeerFrame${e}${t}${o?"c":""}`}(m,t,h||p),g=`url(#${v}Mask${e.id})`,_=n()("MEAvatar",`MEAvatar--size-${t}`,{"MEAvatar--withActivity":!!o,"MEAvatar--emptyCall":"empty"===c},d);return r.createElement("figure",{style:f,className:_},r.createElement("div",{className:"MEAvatar__imgWrapper",style:{clipPath:g}},r.createElement(l.PeerAvatar,{peer:e,size:t}),o&&r.createElement("div",{className:"MEAvatar__activityIndicator"},o)),r.createElement(u,{frameType:m}),p&&r.createElement("div",{className:"MEAvatar__upperRightIcon MEAvatar__birthday"},r.createElement("svg",{className:"MEAvatar__upperRightIconSvg"},r.createElement("use",{href:"#meCake10"}))),h&&r.createElement("div",{className:"MEAvatar__upperRightIcon MEAvatar__call"},r.createElement("svg",{className:"MEAvatar__upperRightIconSvg"},r.createElement("use",{href:"#mePhone10"}))),r.createElement("svg",{className:"MEAvatar__svg"},r.createElement("clipPath",{id:v+"Mask"+e.id},r.createElement("use",{href:"#"+v})),r.createElement("use",{href:"#"+v,className:"MEAvatar__shadow",clipPath:g})))}));const u=({frameType:e})=>{switch(e){case"Mobile":return r.createElement("div",{className:"MEAvatar__mobile"},r.createElement(c.Icon12OnlineMobile,null));case"Online":return r.createElement("div",{className:"MEAvatar__online"});case"Offline":return null;default:(0,i.exhaustivenessCheck)(e)}}},661622:(e,t,o)=>{o.d(t,{AvatarFavorites:()=>l});var r=o(667294),a=(o(320428),o(294184)),n=o.n(a),s=o(24513),i=o(359251),c=o(999411);const l=({size:e,className:t})=>{const{lang:o}=(0,s.useBrowserEnv)(),a=(0,r.useMemo)((()=>({width:e,height:e})),[e]),i=n()("AvatarFavorites",t);return r.createElement("div",{style:a,className:i,"aria-label":o.use("me_favorites")},d[e])},d={24:r.createElement("svg",{fill:"currentColor",height:"12",width:"12",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r.createElement("path",{d:"M5.55 1.29h.9c.58 0 1.05 0 1.42.03.38.03.71.1 1.01.25.49.24.88.64 1.13 1.12.15.3.21.63.25 1.01.03.38.03.84.03 1.42v3.7c0 .44 0 .8-.03 1.07-.02.27-.08.55-.25.77-.24.3-.61.48-1 .48-.28 0-.53-.12-.76-.27-.23-.15-.51-.36-.85-.63l-.82-.64a1.8 1.8 0 00-.47-.32.43.43 0 00-.22 0 1.8 1.8 0 00-.47.32l-.82.64c-.34.27-.62.48-.85.63-.23.15-.48.28-.76.27-.39 0-.76-.18-1-.48-.17-.22-.23-.5-.25-.77-.03-.28-.03-.63-.03-1.06v-3.7c0-.59 0-1.05.03-1.43.04-.38.1-.71.25-1.01.25-.48.64-.88 1.13-1.12.3-.16.63-.22 1-.25.38-.03.85-.03 1.43-.03zm-1.35.88c-.33.03-.53.08-.7.16-.32.16-.58.43-.74.75-.08.16-.13.36-.16.69-.03.34-.03.77-.03 1.37v3.67c0 .46 0 .77.02 1 .02.24.06.3.07.32.08.1.2.16.34.16.01 0 .09-.01.29-.14.2-.12.44-.32.8-.6l.8-.62.06-.04c.25-.2.46-.37.71-.43.22-.06.46-.06.68 0 .25.06.46.23.71.43l.06.04.8.62c.36.28.6.48.8.6.2.13.28.14.3.14.12 0 .25-.06.33-.16 0-.02.05-.08.07-.32.02-.23.02-.54.02-1V5.14c0-.6 0-1.03-.03-1.37a1.81 1.81 0 00-.16-.7 1.71 1.71 0 00-.75-.74 1.81 1.81 0 00-.69-.16c-.33-.03-.76-.03-1.37-.03h-.86c-.6 0-1.04 0-1.37.03z"})),32:r.createElement("svg",{fill:"currentColor",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r.createElement("path",{d:"M7.4 1.71h1.2c.78 0 1.4 0 1.9.05.5.04.94.12 1.34.33.65.33 1.17.85 1.5 1.5.2.4.3.83.33 1.34.04.5.04 1.12.04 1.9v4.94c0 .58 0 1.05-.03 1.41-.03.37-.1.74-.34 1.03-.32.4-.8.65-1.33.65-.37 0-.7-.17-1.01-.36-.31-.2-.68-.5-1.14-.84l-1.09-.85a2.4 2.4 0 00-.62-.43.57.57 0 00-.3 0 2.4 2.4 0 00-.62.43l-1.1.85c-.45.35-.82.64-1.13.84-.3.2-.64.36-1.01.36-.52 0-1.01-.24-1.33-.65-.24-.3-.3-.66-.34-1.03-.03-.36-.03-.83-.03-1.4V6.82c0-.78 0-1.4.04-1.9s.13-.94.33-1.34c.33-.65.85-1.17 1.5-1.5.4-.2.83-.3 1.35-.33.5-.05 1.11-.05 1.9-.05zM5.6 2.9c-.44.04-.71.1-.92.22-.43.22-.78.57-1 1-.11.2-.18.48-.21.92a24.9 24.9 0 00-.04 1.83v4.88c0 .61 0 1.03.03 1.34.03.32.08.4.1.42.1.14.26.22.44.22.02 0 .12-.01.38-.19.26-.16.6-.42 1.08-.8l1.07-.83.07-.05c.33-.26.62-.48.95-.57.3-.08.6-.08.9 0 .33.09.62.31.95.57l.07.05 1.07.84c.49.37.82.63 1.08.8.26.17.36.18.38.18.18 0 .34-.08.45-.22.01-.02.06-.1.1-.42.02-.3.02-.73.02-1.34V6.86c0-.81 0-1.39-.04-1.83-.03-.44-.1-.71-.2-.92a2.29 2.29 0 00-1-1c-.22-.11-.49-.18-.93-.22a24.9 24.9 0 00-1.83-.03H7.43c-.81 0-1.38 0-1.83.03z"})),40:r.createElement("svg",{fill:"currentColor",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r.createElement("path",{d:"M9.25 2.14h1.5c.97 0 1.74 0 2.37.05a4.4 4.4 0 011.68.42c.8.41 1.46 1.07 1.88 1.87.25.5.36 1.05.41 1.69.05.62.05 1.4.05 2.37v6.18c0 .71 0 1.3-.04 1.76-.04.45-.13.92-.42 1.28-.4.51-1.01.8-1.66.81-.47 0-.89-.2-1.27-.45-.39-.25-.85-.6-1.42-1.05L10.96 16a3 3 0 00-.77-.54.71.71 0 00-.38 0 3 3 0 00-.77.54l-1.37 1.06c-.57.44-1.03.8-1.42 1.05-.38.24-.8.46-1.27.45-.65 0-1.26-.3-1.66-.8a2.36 2.36 0 01-.42-1.29c-.04-.46-.04-1.05-.04-1.76V8.54c0-.97 0-1.75.05-2.37a4.4 4.4 0 01.41-1.69A4.29 4.29 0 015.2 2.61a4.4 4.4 0 011.68-.42c.63-.05 1.4-.05 2.37-.05zM7 3.62c-.55.04-.89.13-1.15.26-.54.28-.98.71-1.25 1.25-.14.27-.22.6-.27 1.15-.04.56-.04 1.28-.04 2.3v6.1c0 .76 0 1.29.03 1.67.04.4.1.5.12.52.13.17.34.27.55.28.03 0 .16-.02.5-.23.32-.21.73-.53 1.33-1l1.34-1.04a41 41 0 00.09-.07c.4-.32.77-.6 1.19-.72.37-.1.75-.1 1.12 0 .42.12.78.4 1.2.72l.08.07 1.34 1.04c.6.47 1.01.79 1.34 1 .33.21.46.23.49.23.21 0 .42-.1.55-.27.02-.03.08-.13.12-.53.03-.38.03-.9.03-1.67v-6.1c0-1.02 0-1.74-.04-2.3a3.02 3.02 0 00-.27-1.15 2.86 2.86 0 00-1.25-1.25c-.26-.13-.6-.22-1.15-.26-.56-.05-1.27-.05-2.29-.05H9.3c-1.02 0-1.73 0-2.3.05z"})),44:r.createElement("svg",{fill:"currentColor",height:"22",width:"22",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r.createElement("path",{d:"M10.18 2.36h1.64c1.07 0 1.92 0 2.61.05.7.06 1.3.18 1.85.46.89.45 1.61 1.17 2.06 2.06.28.55.4 1.15.46 1.85.06.7.06 1.54.06 2.61v6.8c0 .79 0 1.44-.05 1.94-.04.5-.14 1-.46 1.4-.44.57-1.12.9-1.83.9a2.6 2.6 0 01-1.4-.5c-.42-.27-.93-.67-1.56-1.15l-1.5-1.17a3.3 3.3 0 00-.85-.59.78.78 0 00-.42 0 3.3 3.3 0 00-.85.59l-1.5 1.17c-.63.48-1.14.88-1.56 1.15-.42.27-.89.5-1.4.5-.71 0-1.39-.33-1.83-.9a2.6 2.6 0 01-.46-1.4c-.05-.5-.05-1.15-.05-1.94v-6.8c0-1.07 0-1.92.06-2.6.06-.7.18-1.3.46-1.86a4.71 4.71 0 012.06-2.06c.55-.28 1.15-.4 1.85-.46.69-.05 1.54-.05 2.61-.05zM7.7 3.98c-.6.05-.98.14-1.27.3-.6.3-1.07.77-1.37 1.36-.15.3-.25.67-.3 1.27-.05.62-.05 1.4-.05 2.52v6.72c0 .84 0 1.41.04 1.84.04.43.11.55.13.57.15.19.38.3.61.3.04 0 .17-.01.54-.25.36-.23.81-.58 1.47-1.1l1.47-1.14.1-.08c.45-.35.85-.66 1.31-.79.4-.1.83-.1 1.24 0 .46.13.86.44 1.3.8l.1.07 1.48 1.14c.66.52 1.11.87 1.47 1.1.37.24.5.25.54.25.23 0 .46-.11.6-.3.03-.02.1-.14.14-.57.03-.43.04-1 .04-1.84V9.43c0-1.11 0-1.9-.06-2.52-.04-.6-.14-.97-.29-1.27-.3-.59-.78-1.07-1.37-1.37-.3-.15-.66-.24-1.27-.29-.61-.05-1.4-.05-2.51-.05H10.2c-1.1 0-1.9 0-2.51.05z"})),46:r.createElement("svg",{fill:"currentColor",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r.createElement("path",{d:"M11.1 2.57h1.8c1.16 0 2.1 0 2.84.06.77.07 1.42.2 2.02.5.97.5 1.76 1.28 2.25 2.25.3.6.44 1.25.5 2.02.06.75.06 1.68.06 2.85v7.4c0 .87 0 1.58-.05 2.13-.05.54-.16 1.1-.5 1.53-.49.61-1.22.97-2 .98-.56 0-1.06-.25-1.52-.55-.47-.3-1.02-.73-1.7-1.26l-1.64-1.27a3.6 3.6 0 00-.94-.64.86.86 0 00-.44 0 3.6 3.6 0 00-.94.64L9.2 20.48c-.68.53-1.23.97-1.7 1.26-.46.3-.96.55-1.52.55-.78 0-1.51-.37-2-.98-.34-.44-.45-1-.5-1.53-.05-.55-.05-1.26-.05-2.12v-7.41c0-1.17 0-2.1.06-2.85.06-.77.2-1.42.5-2.02a5.14 5.14 0 012.25-2.25c.6-.3 1.25-.43 2.02-.5.75-.06 1.68-.06 2.85-.06zM8.4 4.34c-.66.06-1.07.16-1.39.32-.64.33-1.16.85-1.5 1.5-.16.32-.26.72-.31 1.38-.06.67-.06 1.53-.06 2.75v7.32c0 .92 0 1.55.05 2.01.04.48.12.6.14.63.16.2.4.32.66.33.04 0 .19-.02.59-.28.39-.25.88-.63 1.6-1.2l1.61-1.24.1-.09c.5-.38.93-.72 1.44-.86.44-.12.9-.12 1.34 0 .5.14.94.48 1.43.86l.11.09 1.6 1.24c.73.57 1.22.95 1.61 1.2.4.26.55.28.59.28.26 0 .5-.13.66-.33.02-.03.1-.15.14-.63.05-.46.05-1.09.05-2v-7.33c0-1.22 0-2.08-.06-2.75a3.62 3.62 0 00-.32-1.38 3.43 3.43 0 00-1.5-1.5 3.62 3.62 0 00-1.38-.32c-.67-.05-1.53-.05-2.74-.05h-1.72c-1.21 0-2.07 0-2.74.05z"})),48:r.createElement(i.Icon24BookmarkOutline,null),56:r.createElement(c.Icon56BookmarkOutline,{width:36,height:36}),80:r.createElement(c.Icon56BookmarkOutline,null)}},51346:(e,t,o)=>{o.d(t,{BasicAvatar:()=>s,useAvatarPhoto:()=>i});var r=o(667294),a=o(659397),n=o(24513);o(419308);const s=({url:e,alt:t,content:o,size:n,color:s,className:i,onError:c})=>{const[l,d]=(0,r.useState)(!1),u="contact"===s?"BasicAvatar__noImg--color-contact":`BasicAvatar__noImg--color-${Math.abs((s??0)%6)}`,m=(0,a.classNames)("BasicAvatar",`BasicAvatar--size-${n}`,i),h=(0,r.useMemo)((()=>"string"==typeof o?[...o].slice(0,2).join(""):o),[o]);return r.createElement("div",{className:m},e&&!l?r.createElement("img",{className:"BasicAvatar__img",alt:t,src:e,onError:()=>{d(!0),c?.()}}):r.createElement("div",{className:(0,a.classNames)("BasicAvatar__noImg",{[u]:void 0!==s})},h))};function i(e,t){const o=(0,n.usePixelDensity)();if(!e)return;o&&(t*=2);const r=[{size:50,url:e.photo50},{size:100,url:e.photo100||e.photo50},{size:200,url:e.photo200||e.photo100||e.photo50}];return r.find((e=>t<=e.size&&Boolean(e.url)))?.url}},366750:(e,t,o)=>{o.d(t,{ComposerAttachPreviewMeta:()=>s});o(814106);var r=o(667294),a=o(294184),n=o.n(a);const s=({children:e,rounded:t,offsetLength:o=5,top:a,right:s,bottom:i,left:c})=>{const l=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":t}],d=o+"px",u={...a&&{top:d},...s&&{right:d},...i&&{bottom:d},...c&&{left:d},maxWidth:`calc(100% - ${2*o}px)`};return r.createElement("div",{className:n()(l),style:u},e)}},896704:(e,t,o)=>{o.d(t,{ContextMenu:()=>h});o(181876);var r=o(667294),a=o(61698),n=o(429697),s=o(294184),i=o.n(s),c=o(24513),l=o(345543),d=o(197254),u=o(418592),m=o(660798);const h=(0,r.forwardRef)((({classNames:e={},content:t,forceUpdateContent:o,canOpen:s=!0,open:h=!1,hideOnClick:f=!0,hideOnWheel:v=!0,allowNativeContextMenu:g=!1,onStartOpening:_,onOpen:k,onClose:b,children:E,position:y="bottom",align:w="left",onPositionChange:C,getToggleOpen:I,contentPreventDefault:A=!0},S)=>{const{isTouchOnly:x}=(0,u.useDeviceData)(),[P,M]=(0,r.useState)(!1),N=(0,c.usePrevious)(P),R=(0,c.usePrevious)(h),T=(0,r.useRef)(P);T.current=P;const[O,j]=(0,r.useState)(t),[L,D]=(0,r.useState)({x:-999,y:-999}),[V,K]=(0,r.useState)("closed"),U=(0,r.useContext)(m.DropdownDepthContext),B=(0,r.useCallback)((e=>{K((t=>{let o;switch(o="function"==typeof e?e(t):e,o){case"opening":case"opened":U?.setChildOpen(!0);break;case"closing":case"closed":U?.setChildOpen(!1);break;default:(0,l.exhaustivenessCheck)(o)}return o}))}),[U]),H=(0,r.useCallback)((({preventDefault:e,x:t,y:o})=>{g||e?.(),B((r=>{switch(r){case"opened":case"opening":case"closing":return"closing";case"closed":return g&&e?.(),D({x:t,y:o}),"opening";default:(0,l.exhaustivenessCheck)(r)}}))}),[g,B]);I?.(H),(0,r.useLayoutEffect)((()=>{if(!p(S))return;const e=S.current,t=e=>{H({x:e.clientX,y:e.clientY,preventDefault:e.preventDefault.bind(e)})};return e?.addEventListener("contextmenu",t),()=>{e?.removeEventListener("contextmenu",t)}}),[S,g,B,H]),(0,d.useLongTouch)(x&&p(S),p(S)?S:{current:null},(({touches:e})=>{H({x:e[0]?.clientX||0,y:e[0]?.clientY||0})}));const F=(0,r.useCallback)((()=>{B((e=>{switch(e){case"opening":case"closed":return"closed";case"opened":case"closing":return"closing";default:return(0,l.exhaustivenessCheck)(e)}}))}),[B]),G=(0,r.useCallback)((e=>{A&&e.preventDefault(),e.stopPropagation(),f&&F()}),[f,F,A]);(0,r.useLayoutEffect)((()=>{B((e=>h&&s||"closed"===e?s&&h&&"opened"!==e?"opening":e:$.current?"closing":"closed"))}),[h,s,B]);const $=(0,r.useRef)(null),W=(0,r.useCallback)((e=>e instanceof Node&&$.current?.contains(e)),[]);return(0,r.useLayoutEffect)((()=>{const e=e=>{W(e.target)||T.current||F()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[g,W,V,F]),(0,r.useEffect)((()=>{"opening"===V&&_?.(),"opened"===V&&k?.(),"closed"===V&&(b?.(),M(!1))}),[V]),(0,r.useEffect)((()=>{const e=!P&&N,r=!h&&R;!o&&(["closing","opening"].includes(V)||e||r)||j(t)}),[P,t,V,N,o,h,R]),(0,r.useEffect)((()=>{if(!v||"opened"!==V)return;const e=({target:e})=>{W(e)||T.current||F()};return window.addEventListener("wheel",e,!0),()=>{window.removeEventListener("wheel",e,!0)}}),[W,V,F,v]),r.createElement(m.DropdownRootCloseContext.Provider,{value:F},r.createElement(m.DropdownDepthContext.Provider,{value:(0,r.useMemo)((()=>({setChildOpen:M})),[M])},r.createElement(a.Popper,{mode:"cursor",cursor:L,align:w,position:y,portalClassName:e.portal,open:"closed"!==V,onPositionChange:C,watchContentChange:!0,content:r.createElement(n.default,{nodeRef:$,in:"opening"===V||"opened"===V,addEndListener:e=>$.current?.addEventListener("transitionend",e,!1),mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"ContextMenu__contentWrapper-",onEntered:()=>B("opened"),onExited:()=>B("closed")},r.createElement("div",{ref:$,className:i()("ContextMenu__contentWrapper",e.contentWrapper),onClickCapture:e=>{P||"closing"===V&&(e.preventDefault(),e.stopPropagation())},onClick:G},O))})))}));function p(e){return!!e&&"function"!=typeof e}},69705:(e,t,o)=>{o.d(t,{ConvoAttachAudioActionsMenu:()=>c});var r=o(667294),a=o(823190),n=o(345543),s=o(24513),i=o(430790);const c=({cmid:e,goToMessage:t})=>{const{lang:o}=(0,s.useBrowserEnv)(),c=(0,r.useCallback)((o=>{switch(o){case"share":return;case"go_to_message":return void t(e);default:return(0,n.exhaustivenessCheck)(o)}}),[e,t]);return r.createElement(a.ActionsMenu,null,r.createElement(a.ActionsMenuAction,{onClick:()=>c("go_to_message"),title:o.use("me_attach_action_go_to_message"),leftIcon:r.createElement(i.Icon24MessageArrowRightOutline,null),type:"secondary"}))}},735803:(e,t,o)=>{o.d(t,{ConvoAttachDocActionsMenu:()=>c});var r=o(667294),a=o(823190),n=o(430790),s=o(24513),i=o(345543);const c=({cmid:e,goToMessage:t})=>{const{lang:o}=(0,s.useBrowserEnv)(),c=(0,r.useCallback)((o=>{switch(o){case"share":return;case"go_to_message":return void t(e);default:return(0,i.exhaustivenessCheck)(o)}}),[e,t]);return r.createElement(a.ActionsMenu,null,r.createElement(a.ActionsMenuAction,{title:o.use("me_attach_action_go_to_message"),leftIcon:r.createElement(n.Icon24MessageArrowRightOutline,null),onClick:()=>c("go_to_message"),type:"secondary"}))}},768075:(e,t,o)=>{o.d(t,{ConvoAttachLinkActionsMenu:()=>i});var r=o(667294),a=o(823190),n=o(430790),s=o(24513);const i=({cmid:e,goToMessage:t})=>{const{lang:o}=(0,s.useBrowserEnv)();return r.createElement(a.ActionsMenu,null,r.createElement(a.ActionsMenuAction,{title:o.use("me_attach_action_go_to_message"),leftIcon:r.createElement(n.Icon24MessageArrowRightOutline,null),onClick:()=>t(e),type:"secondary"}))}},144790:(e,t,o)=>{o.d(t,{ConvoAttachesLinks:()=>f});var r=o(667294),a=o(385228),n=o(24513),s=(o(335106),o(294184)),i=o.n(s),c=o(660798),l=o(768075),d=o(418592),u=o(896704),m=o(701130),h=o(815647),p=o(384665);const f=({items:e,goToMessage:t})=>(()=>{const o=new Set;return r.createElement("ul",{className:"ConvoAttachesLinks"},e.map(((e,a)=>{const n=`${e.cmid}_${e.attach.url}`,s=o.has(n)?`${n}_${a}`:n;return o.add(n),r.createElement(v,{key:s,item:e,goToMessage:t})})))})(),v=({item:e,goToMessage:t})=>{const{isTouchOnly:o}=(0,d.useDeviceData)(),{settings:s}=(0,n.useViewer)(),f=s.fastActionsTrigger,{isDropdownFastActionsOpened:v,isContextMenuFastActionsOpened:g,openDropdownFastActions:_,openContextMenuFastActions:k,closeDropdownFastActions:b,closeContextMenuFastActions:E}=(0,p.useFastActionsState)(),[y,w]=(0,r.useState)(null),{lang:C}=(0,n.useBrowserEnv)(),{attach:I}=e;return r.createElement("li",{ref:e=>{w(e)},className:"ConvoAttachesLinks__itemContainer"},r.createElement("div",{className:"ConvoAttachesLinks__item"},"Link"===I.kind&&r.createElement(m.AttachLink,{link:I,isOut:!1,isInBubble:!1}),"MiniApp"===I.kind&&r.createElement(h.AttachMiniApp,{miniApp:I,isOut:!1,isInBubble:!1})),"rightClick"!==f&&r.createElement(c.Dropdown,{open:v,onOpen:_,onClose:b,classNames:{wrapper:i()("ConvoAttachesLinkItem__dropdown",{"ConvoAttachesLinkItem__dropdown--open":o}),wrapperOpened:"ConvoAttachesLinkItem__dropdown--open"},content:r.createElement(l.ConvoAttachLinkActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"center",position:"bottom",openType:o?"click":"hover"},r.createElement("button",{className:"ConvoProfileAttachments__action","aria-label":C.use("me_actions_more")},r.createElement(a.Icon20More,null),o&&r.createElement("div",{className:"ConvoProfileAttachments__actionTapArea"}))),"hover"!==f&&r.createElement(u.ContextMenu,{ref:{current:y},open:g,onOpen:k,onClose:E,allowNativeContextMenu:!0,content:r.createElement(l.ConvoAttachLinkActionsMenu,{cmid:e.cmid,goToMessage:t})}))}},558777:(e,t,o)=>{o.d(t,{ConvoAttachesPhotos:()=>k});o(704107);var r=o(667294),a=o(803854),n=o(489267),s=o(660798),i=o(377250),c=o(277659),l=o(432483),d=o(24513),u=o(345543),m=o(823190),h=o(418592),p=o(294184),f=o.n(p),v=o(896704),g=o(384665),_=o(11316);const k=({photos:e,goToMessage:t,withDateSeparator:o})=>{const a=(0,_.useNow)(),{api:n,lang:s}=(0,d.useBrowserEnv)(),[i,c]=(0,r.useState)(0),l=(0,r.useRef)(null),[m,h]=(0,r.useState)([]);(0,r.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==i)return;if(!l.current)return;const e=new ResizeObserver((t=>{t[0]&&c(t[0].contentRect.width),0===t[0]?.contentRect.width&&e.disconnect()}));return e.observe(l.current),()=>{e.disconnect()}}),[]);const p=(0,r.useCallback)(((e,o)=>{switch(e){case"set_as_avatar":case"copy_link":case"download":case"tag_item":case"tag_service":break;case"delete":n.fetch("photos.delete",{photo_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{h((e=>[...e,o.attach.id]))}));break;case"restore":n.fetch("photos.restore",{photo_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{h((e=>e.filter((e=>e!==o.attach.id))))}));break;case"go_to_message":t(o.cmid);break;default:(0,u.exhaustivenessCheck)(e)}}),[t,n]);if(!o)return r.createElement("ul",{className:"ConvoAttachesPhotos"},e.map(((e,t)=>{const o=0===t,a=0!==i?E(e.attach,i):void 0;return r.createElement(b,{key:`${e.cmid}-${e.attach.id}-${t}`,isDeleted:m.includes(e.attach.id),photo:e,photoSource:a||void 0,measuredElRef:o?l:void 0,onActionClick:p})})));const f=e.reduce(((t,o,r)=>{const a=0===r,n=e[r-1];return(a||n&&!(0,u.isSameMonth)(1e3*n.date,1e3*o.date))&&t.push([]),t[t.length-1]?.push(o),t}),[]);return r.createElement(r.Fragment,null,f.map(((e,t)=>{const o=e[0]?.date||0;return r.createElement(r.Fragment,{key:t},r.createElement("div",{className:"ConvoAttachesPhotos__dateSeparator"},s.use("me_month_year_date",{now:a,date:1e3*o,genMonths:!1})),r.createElement("ul",{className:"ConvoAttachesPhotos--separated"},e.map(((e,o)=>{const a=0===t&&0===o,n=0!==i?E(e.attach,i):void 0;return r.createElement(b,{key:`${e.cmid}-${e.attach.id}-${o}`,isDeleted:m.includes(e.attach.id),photo:e,photoSource:n||void 0,measuredElRef:a?l:void 0,onActionClick:p})}))))})))},b=({photo:e,measuredElRef:t,photoSource:o,isDeleted:a,onActionClick:u})=>{const{isTouchOnly:p}=(0,h.useDeviceData)(),{lang:_}=(0,d.useBrowserEnv)(),k=(0,d.useOwner)(),{settings:b}=(0,d.useViewer)(),E=b.fastActionsTrigger,{isDropdownFastActionsOpened:y,isContextMenuFastActionsOpened:w,openDropdownFastActions:C,openContextMenuFastActions:I,closeDropdownFastActions:A,closeContextMenuFastActions:S}=(0,g.useFastActionsState)(),x=(0,r.useRef)(null),P=(0,r.useMemo)((()=>r.createElement(r.Fragment,null,r.createElement(m.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>u("go_to_message",e),title:_.use("me_attach_action_go_to_message"),leftIcon:r.createElement(i.Icon20MessageArrowRightOutline,null),type:"secondary"}),e.attach.ownerId===k.id&&r.createElement(m.ActionsMenuAction,{key:"action_delete",onClick:()=>u("delete",e),title:_.use("me_attach_action_delete_photo"),leftIcon:r.createElement(c.Icon20DeleteOutline,null),type:"danger"}))),[_,e,k.id,u]),M={kind:"message",peerId:e.authorId,cmid:e.cmid};return r.createElement("li",{className:"ConvoAttachesPhotos__item",ref:t},o&&!a&&r.createElement(r.Fragment,null,r.createElement(n.Link,{ref:x,to:{kind:"AttachMediaProxyRoute",attach:e.attach,source:M},key:e.attach.id,className:"ConvoAttachesPhotos__link"},r.createElement("img",{...o,alt:"",className:"ConvoAttachPhoto__img"})),"rightClick"!==E&&r.createElement(s.Dropdown,{open:y,onOpen:C,onClose:A,classNames:{wrapper:f()("ConvoAttachPhoto__dropdown",{"DropdownReforged--opened":p})},content:r.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},P),align:"right",position:"bottom",...p?{adaptation:"horizontal"}:{},hideOnClick:!0},r.createElement("button",{className:"ConvoAttachPhoto__action","aria-label":_.use("me_actions_more")},p&&r.createElement("div",{className:"ConvoAttachPhoto__actionTapArea"}),r.createElement(l.Icon24MoreHorizontal,null))),"hover"!==E&&r.createElement(v.ContextMenu,{ref:x,open:w,onOpen:I,onClose:S,allowNativeContextMenu:!0,content:r.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},P)})),o&&a&&r.createElement("div",{className:"ConvoAttachesPhotos__restore"},r.createElement("div",{className:"ConvoAttachesPhoto__restore-button",onClick:()=>u("restore",e)},_.use("me_attach_action_restore"))))};function E(e,t){const o=a.preview(e,t,t,!1),r=a.preview(e,2*t,2*t,!1);return o||r?o&&r?{srcSet:`${o.url}, ${r.url} 2x`,src:r.url}:{src:o?o.url:r?r.url:""}:null}},400217:(e,t,o)=>{o.d(t,{ConvoAttachesVideos:()=>k});o(128831);var r=o(667294),a=o(803854),n=o(207739),s=o(345543),i=o(24513),c=o(660798),l=o(377250),d=o(385228),u=o(489267),m=o(823190),h=o(294184),p=o.n(h),f=o(463279),v=o(418592),g=o(896704),_=o(384665);const k=({videos:e,goToMessage:t})=>{const[o,n]=(0,r.useState)(0),{api:c,lang:l}=(0,i.useBrowserEnv)(),d=(0,r.useRef)(null),[u,m]=(0,r.useState)([]),{viewer:h}=(0,i.useViewer)();(0,r.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==o)return;if(!d.current)return;const e=new ResizeObserver((t=>{t[0]&&n(t[0].contentRect.width),0===t[0]?.contentRect.width&&e.disconnect()}));return e.observe(d.current),()=>{e.disconnect()}}),[]);const p=(0,r.useCallback)(((e,o)=>{switch(e){case"go_to_message":t(o.cmid);break;case"delete_from_own":c.fetch("video.delete",{video_id:o.attach.id,owner_id:o.attach.ownerId,target_id:h.id}).then((()=>{m((e=>[...e,o.attach.id]))}));break;case"restore":c.fetch("video.restore",{video_id:o.attach.id,owner_id:o.attach.ownerId}).then((()=>{m((e=>e.filter((e=>e!==o.attach.id))))}));break;case"copy_link":case"download":case"report":case"share":case"add":case"add_to_playlist":break;default:(0,s.exhaustivenessCheck)(e)}}),[t,c,h.id]),f=Date.now();let v=null;return r.createElement("ul",{className:"ConvoAttachesVideos"},e.map(((e,t)=>{const n=0===t,s=new Date(1e3*e.date).getMonth(),i=null===v||s!==v;v=s;const c=0!==o?function(e,t){const o=a.preview(e,t),r=a.preview(e,2*t);if(!o&&!r)return null;if(!o||!r)return{src:o?o.url:r?r.url:""};return{srcSet:`${o.url}, ${r.url} 2x`,src:r.url}}(e.attach,o):void 0;return r.createElement(r.Fragment,null,i&&r.createElement("div",{className:"ConvoAttachesVideos__separator"},l.use("me_month_year_date",{now:f,date:1e3*e.date,genMonths:!1})),r.createElement(b,{key:`${e.cmid}-${e.attach.id}`,measuredElRef:n?d:void 0,isDeleted:u.includes(e.attach.id),onActionClick:p,video:e,videoSource:c||void 0}))})))},b=({video:e,videoSource:t,isDeleted:o,measuredElRef:a,onActionClick:s})=>{const{isTouchOnly:h}=(0,v.useDeviceData)(),{settings:k}=(0,i.useViewer)(),b=k.fastActionsTrigger,{isDropdownFastActionsOpened:E,isContextMenuFastActionsOpened:y,openDropdownFastActions:w,openContextMenuFastActions:C,closeDropdownFastActions:I,closeContextMenuFastActions:A}=(0,_.useFastActionsState)(),[S,x]=(0,r.useState)(null),{lang:P}=(0,i.useBrowserEnv)(),M=(0,i.usePeers)(),N=n.safeGet(M,e.authorId),R=(0,f.getDuration)(e.attach.duration,!!e.attach.files?.external)||e.attach.platform,T=(0,r.useMemo)((()=>r.createElement(m.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>s("go_to_message",e),title:P.use("me_attach_action_go_to_message"),leftIcon:r.createElement(l.Icon20MessageArrowRightOutline,null),type:"secondary"})),[P,e,s]);return r.createElement("li",{ref:a},(()=>{const a=!!t&&!o,s=r.createElement(r.Fragment,null,a&&r.createElement("div",{className:"ConvoAttachesVideoItem__preview"},!!R&&r.createElement("div",{className:"ConvoAttachesVideos__previewInfo"},R),r.createElement("img",{src:t.src,srcSet:t.srcSet,alt:""})),r.createElement("div",{className:"ConvoAttachesVideoItem__content"},r.createElement("div",{className:"ConvoAttachesVideoItem__title"},e.attach.title),r.createElement("div",{className:"ConvoAttachesVideoItem__info"},r.createElement("div",{className:"ConvoAttachesVideoItem__infoSide"},r.createElement(u.Link,{to:{kind:"PeerPanel",peerId:e.authorId,screenName:n.screenName(N)},className:"ConvoAttachesVideoItem__peer"},n.name(N)),r.createElement("div",{className:"ConvoAttachesVideo__views"},P.use("me_convo_attaches_video_views",{num:e.attach.views,formatted:"short",values:{count:P.formatNumber(e.attach.views,"short")}}))),a&&"rightClick"!==b&&r.createElement(c.Dropdown,{open:E,onOpen:w,onClose:I,classNames:{wrapper:p()("ConvoAttachVideo__dropdown",{"ConvoAttachVideo__dropdown--open":h}),wrapperOpened:"ConvoAttachVideo__dropdown--open"},content:r.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},T),align:"center",position:"bottom",openType:h?"click":"hover"},r.createElement("button",{className:"ConvoAttachVideo__action","aria-label":P.use("me_actions_more"),onClick:e=>{h&&(e.preventDefault(),e.stopPropagation(),w())}},h&&r.createElement("div",{className:"ConvoAttachVideo__actionTapArea"}),r.createElement(d.Icon20More,null))))),a&&"hover"!==b&&r.createElement(g.ContextMenu,{ref:{current:S},open:y,onOpen:C,onClose:A,allowNativeContextMenu:!0,content:r.createElement(m.ActionsMenu,{className:"ConvoActionsMenu"},T)}));return a?r.createElement(u.Link,{ref:e=>{x(e)},to:{kind:"AttachMediaProxyRoute",attach:e.attach},className:"ConvoAttachesVideoItem"},s):r.createElement("div",{className:"ConvoAttachesVideoItem"},s)})())}},660855:(e,t,o)=>{o.d(t,{ConvoAttachments:()=>k});o(402752);var r=o(667294),a=o(86894),n=o(773420),s=o(490583),i=o(265394),c=o(628245),l=o(24513),d=o(558777),u=o(400217),m=o(660798),h=o(735803),p=o(432483),f=o(69705),v=o(144790),g=o(294184),_=o.n(g);const k=({peerId:e,goToMessage:t,className:o})=>{const[g,k]=(0,r.useState)("photos"),{attaches:b,getNextPage:E}=(0,c.useConvoAttaches)(e),{lang:y}=(0,l.useBrowserEnv)(),w=e=>{e!==g&&(b&&!b[e]&&E(e),k(e))};(0,r.useEffect)((()=>{null===b&&E(g)}));const C=(0,r.useRef)(g);C.current=g;const I=(0,r.useRef)(E);I.current=E;const A=(0,r.useCallback)((e=>{e&&I.current(C.current)}),[]),S=(0,r.useMemo)((()=>({onChange:A,skip:b?.[g]?.isLoading})),[g,b,A]);if(!b)return null;const x=b[g],P=!x||0===x.items.length&&x.isLoading,M=!P&&x&&x.items.length>0&&!x.isAllLoaded,N=x&&!x.isLoading&&0===x.items.length;return r.createElement("div",{className:_()("ConvoAttachments",o)},r.createElement(a.Tabs,{className:"ConvoAttachments_tabs"},r.createElement(a.HorizontalScroll,{arrowSize:"m"},r.createElement(a.TabsItem,{onClick:()=>w("photos"),selected:"photos"===g},y.use("me_convo_attaches_type_photo")),r.createElement(a.TabsItem,{onClick:()=>w("videos"),selected:"videos"===g},y.use("me_convo_attaches_type_video")),r.createElement(a.TabsItem,{onClick:()=>w("audios"),selected:"audios"===g},y.use("me_convo_attaches_type_music")),r.createElement(a.TabsItem,{onClick:()=>w("docs"),selected:"docs"===g},y.use("me_convo_attaches_type_doc")),r.createElement(a.TabsItem,{onClick:()=>w("links"),selected:"links"===g},y.use("me_convo_attaches_type_links")))),b&&r.createElement("div",{className:"ConvoAttachments__block"},(()=>{if(!x?.items||0===x?.items.length)return null;switch(g){case"audios":return r.createElement("ul",{className:"ConvoAttachments__list"},x?.items.map((e=>{const o=e.attach;return"Audio"!==o.kind?null:r.createElement("li",{key:`${e.cmid}-${o.id}`},r.createElement("div",{className:"ConvoAttachments__itemContainer"},r.createElement("div",{className:"ConvoAttachments__item"},r.createElement(n.AttachAudio,{audio:o,isOut:!1,isInBubble:!1})),r.createElement(m.Dropdown,{hideOnClick:!0,content:r.createElement(f.ConvoAttachAudioActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"right",position:"bottom"},r.createElement("button",{className:"ConvoAttachments__itemMenuButton"},r.createElement(p.Icon24MoreHorizontal,null)))))})));case"docs":return r.createElement("ul",{className:"ConvoAttachments__list"},x?.items.map((e=>{const o=e.attach;return"Doc"!==o.kind?null:r.createElement("li",{className:"ConvoAttachments__listItem ConvoAtachments__docItem",key:`${e.cmid}-${o.id}`},r.createElement("div",{className:"ConvoAttachments__itemContainer"},r.createElement("div",{className:"ConvoAttachments__item"},r.createElement(s.AttachDoc,{doc:o})),r.createElement(m.Dropdown,{hideOnClick:!0,content:r.createElement(h.ConvoAttachDocActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"center",position:"left"},r.createElement("button",{className:"ConvoAttachments__itemMenuButton"},r.createElement(p.Icon24MoreHorizontal,null)))))})));case"links":const e=b[g];return e?r.createElement(v.ConvoAttachesLinks,{items:e.items,goToMessage:t}):null;case"photos":const o=b[g]?.items;return o?r.createElement(d.ConvoAttachesPhotos,{photos:o,goToMessage:t}):null;case"videos":const a=b[g]?.items;return a?r.createElement(u.ConvoAttachesVideos,{videos:a,goToMessage:t}):null;default:return null}})(),P&&r.createElement(a.Spinner,{size:"small",className:"ConvoAttachments__loader"}),M&&r.createElement(i.OptimizedSpinner,{size:"small",className:"ConvoAttachments__loader",intersectionOptions:S}),N&&r.createElement("div",{className:"ConvoAttachments__empty"},y.use("me_convo_attaches_empty_type"))))}},682021:(e,t,o)=>{o.d(t,{ImagesLayoutProvider:()=>n,useImagesLayout:()=>s});var r=o(667294);const a=r.createContext(void 0),n=a.Provider,s=()=>{const e=(0,r.useContext)(a);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},775878:(e,t,o)=>{o.d(t,{ConvoMessageBottomInfo:()=>v});o(668908);var r=o(667294),a=o(429920),n=o(207739),s=o(24513),i=o(181089),c=o(20403),l=o(294184),d=o.n(l),u=o(273861),m=o(632511),h=o(463363),p=o(244609),f=o(227996);const v=({message:e,isUnread:t,className:o,dateClassName:l,showDate:v,onClick:g})=>{const{lang:_}=(0,s.useBrowserEnv)(),k=(0,s.useFeatureFlags)(),b=a.isMessageEdited(e),E=r.createElement(r.Fragment,null,r.createElement(h.ConvoMessageEditedTimeTooltip,{message:e},r.createElement("span",null,k.vkm_new_read_indicator?_.use("me_message_edited_label_short"):_.use("me_message_edited_label"))),k.vkm_new_read_indicator&&v?" · ":""),y="Normal"===e.kind&&e.isImportant,w=e.attaches.wall?.views,C=k.vkm_new_read_indicator&&(0,u.getMessageOutStatusIcon)({message:e,isUnread:t,className:"ConvoMessageBottomInfo__outStatusIcon",sendingIconColor:"inherit",readIconColor:"inherit",lang:_});return v||b||C||y?r.createElement("span",{onClick:g,className:d()("ConvoMessageBottomInfo",o,{"ConvoMessageBottomInfo--withViews":k.vkm_new_attach_post&&(e.attaches.wall||w)})},Boolean(w)&&k.vkm_new_attach_post&&r.createElement("span",{className:d()("ConvoMessageBottomInfo__views",{"ConvoMessageBottomInfo__views--out":!!C})},r.createElement(i.Icon12View,{className:"ConvoMessageBottomInfo__viewsIcon"}),_.formatNumber(w||0,"short")),r.createElement("span",{className:d()("ConvoMessageBottomInfo__date",{"ConvoMessageBottomInfo__date--out":!!C},l)},b&&E,v&&r.createElement(m.FormattedDate,{timestamp:e.sentAt,variant:"time"})),y&&r.createElement("i",{className:"ConvoMessageBottomInfo__importantIcon",role:"img","aria-label":_.use("me_important_message_icon_alt")},r.createElement(c.Icon12Favorite,null)),C&&r.createElement(p.Tooltip,{delay:500,tooltipOffset:{x:12,y:2},position:"top",content:r.createElement(f.MessageOutStatusIconHint,{isChat:n.isChatPeerId(e.peerId)}),vkuiStyle:!0},r.createElement("span",null,C))):null}},463363:(e,t,o)=>{o.d(t,{ConvoMessageEditedTimeTooltip:()=>c});var r=o(667294),a=o(429920),n=o(24513),s=o(244609),i=o(11316);const c=({children:e,message:t})=>{const{lang:o}=(0,n.useBrowserEnv)(),c=(0,i.useNow)();return t.updatedAt?r.createElement(s.Tooltip,{content:o.use("me_message_edited_tooltip",{values:{time:o.formatDate(t.updatedAt,{variant:"time-ago",now:c})}}),delay:1e3,position:"top",align:"center",disabled:!a.isMessageEdited(t)},e):e}},660798:(e,t,o)=>{o.d(t,{Dropdown:()=>v,DropdownDepthContext:()=>h,DropdownRootCloseContext:()=>p});o(170490);var r=o(667294),a=o(429697),n=o(61698),s=o(294184),i=o.n(s),c=o(345543),l=o(24513),d=o(418592),u=o(197254),m=o(84905);const h=(0,r.createContext)(void 0),p=(0,r.createContext)(void 0),f=({children:e,hide:t})=>(0,r.useContext)(p)?r.createElement(r.Fragment,null,e):r.createElement(p.Provider,{value:t},e),v=(0,r.forwardRef)((({openType:e="hover",delay:t,hideDelay:o=150,classNames:s={},content:v,children:g,hideOnClick:_,hideOnWheel:k,hideOnMouseLeave:b,canOpen:E=!0,open:y=!1,onOpen:w,onClose:C,forceUpdateContent:I,contentPreventDefault:A=!0,...S},x)=>{const[P,M]=(0,r.useState)(!1),N=(0,l.usePrevious)(P),R=(0,l.usePrevious)(y),[T,O]=(0,r.useState)(v),{isTouchOnly:j}=(0,d.useDeviceData)(),L=j&&"hover"===e?"click":e,{subscribeKeyDown:D}=(0,m.useModuleKeyBoardHandlers)({moduleName:m.Module.Dropdown}),{displayState:V,$content:K,$trigger:U,onClick:B,onHover:H,handleHide:F,handleOpened:G,handleClosed:$}=function({canOpen:e,open:t,openType:o,delay:a,hideDelay:n,hideOnMouseLeave:s,childOpen:i}){const[l,d]=(0,r.useState)("closed"),m=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useContext)(h),v=(0,r.useCallback)((e=>{d((t=>{let o;switch(o="function"==typeof e?e(t):e,o){case"opening":case"opened":f?.setChildOpen(!0);break;case"closing":case"closed":f?.setChildOpen(!1);break;default:(0,c.exhaustivenessCheck)(o)}return o}))}),[f]),{hideOnHover:g,onMouseOver:_}=function({open:e,canOpen:t,delay:o,hideDelay:a,hideOnMouseLeave:n,openType:s,displayState:i,setDisplayState:c,$content:l,$trigger:d,childOpen:u}){const m=(0,r.useRef)(null),h=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useRef)(i);f.current=i;const v=(0,r.useRef)(u);v.current=u;const g=(0,r.useCallback)((()=>d.current?.matches(":hover")||l.current?.matches(":hover")),[l,d]),_=(0,r.useCallback)((e=>{e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),k=(0,r.useCallback)((()=>{p.current&&(window.cancelAnimationFrame(p.current),p.current=null)}),[]),b=(0,r.useRef)(void 0===e);b.current=void 0===e;const E=(0,r.useCallback)(((e=a,t=!0)=>{if("hover"!==s&&!n)return;_(m);const o="closed"===f.current||"closing"===f.current;if(h.current||o)return;b.current=t;const r=()=>{c((e=>"opened"===e?"closing":"closed")),_(h)};e&&"opened"===f.current?h.current=window.setTimeout((()=>{g()?_(h):r()}),e):r()}),[a,s,n,_,c,g]);(0,r.useLayoutEffect)((()=>{m.current&&(t||_(m))}),[_,m,t]);const y=(0,r.useCallback)((()=>{if("hover"!==s||!t)return;_(h);const e="opened"===f.current||"opening"===f.current;if(m.current||e)return;b.current=!0;const r=()=>{c((e=>"closed"===e?"opening":"opened")),_(m)};o&&"closed"===f.current?m.current=window.setTimeout(r,o):r()}),[o,t,s,c,_]),w=(0,r.useCallback)((()=>{const e=()=>{g()||v.current?("closing"!==f.current||b.current)&&y():(n&&"opened"===f.current&&E(500,!0),n||E())};k(),p.current=window.requestAnimationFrame(e)}),[k,g,E,n,y]);return(0,r.useEffect)((()=>("hover"!==s&&!n||"closed"===i||(w(),document.addEventListener("mousemove",w,{passive:!0}),document.addEventListener("wheel",w,{passive:!0})),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("wheel",w)})),[n,i,w,s,k,u]),(0,r.useEffect)((()=>()=>{_(m),_(h),k()}),[]),(0,r.useEffect)((()=>{!1===e&&(document.removeEventListener("mousemove",w),document.removeEventListener("wheel",w))}),[e,w,_,k]),{onMouseOver:y,hideOnHover:E}}({open:t,canOpen:e,delay:a,hideDelay:n,hideOnMouseLeave:s,openType:o,displayState:l,setDisplayState:v,$content:m,$trigger:p,childOpen:i}),{onClick:k}=function({$content:e,$trigger:t,openType:o,setDisplayState:a,canOpen:n}){const s=(0,r.useCallback)((e=>{"click"!==o&&"contextmenu"!==o&&"longtouch"!==o||(e?.stopPropagation(),"contextmenu"===o&&e?.preventDefault(),a((e=>{switch(e){case"opening":return"closed";case"closed":return n?"opening":"closed";case"opened":case"closing":return"closing";default:return(0,c.exhaustivenessCheck)(e)}})))}),[o,a,n]);return(0,u.useLongTouch)("longtouch"===o,t,(()=>s())),(0,r.useEffect)((()=>{const t=t=>{("click"===o||"contextmenu"===o||"longtouch"===o)&&e.current&&t.target instanceof Node&&!e.current.contains(t.target)&&s()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e]),{onClick:s}}({$content:m,$trigger:p,openType:o,setDisplayState:v,canOpen:e});(0,r.useLayoutEffect)((()=>{v((o=>t&&e||"closed"===o?e&&t&&"opened"!==o?"opening":o:m.current?"closing":"closed"))}),[t,e,v]);const b=(0,r.useCallback)((()=>{v("opened")}),[v]),E=(0,r.useCallback)((()=>{v("closed")}),[v]),y=(0,r.useCallback)(((e,t)=>{k(),g(e,t)}),[g,k]);return{displayState:l,$content:m,$trigger:p,onClick:k,onHover:_,handleHide:y,handleOpened:b,handleClosed:E}}({canOpen:E,open:y,openType:L,delay:t,hideDelay:o,childOpen:P,hideOnMouseLeave:b}),W=(0,r.useContext)(p);(0,r.useEffect)((()=>{if("opened"===V)return D(((e,t)=>{"hover"!==L&&e("Escape")&&(t(),F(0,!1))}))}),[V,D,F,L]);const z=(0,r.useCallback)((e=>{A&&e.preventDefault(),e.stopPropagation(),_&&(W?W():F(0,!1))}),[_,A,F,W]);(0,r.useEffect)((()=>{if(!k||"opened"!==V)return;const e=({target:e})=>{e instanceof Node&&K.current?.contains(e)||F(0,!1)};return window.addEventListener("wheel",e,!0),()=>{window.removeEventListener("wheel",e,!0)}}),[K,V,F,k]);const q=(0,r.useCallback)((()=>F(0,!1)),[F]);(0,r.useEffect)((()=>{"opened"===V&&w?.(),"closed"===V&&(C?.(),M(!1))}),[V]),(0,r.useEffect)((()=>{const e=!P&&N,t=!y&&R;!I&&(["closing","opening"].includes(V)||e||t)||O(v)}),[P,v,V,N,I,y,R]);return r.createElement("div",{className:i()("DropdownReforged",s.wrapper,{[s.wrapperOpened||"DropdownReforged--opened"]:"opened"===V,[s.wrapperClosed||"DropdownReforged--closed"]:"closed"===V})},r.createElement(h.Provider,{value:(0,r.useMemo)((()=>({setChildOpen:M})),[M])},r.createElement(f,{hide:q},r.createElement(n.Popper,{ref:e=>{U.current=e,"function"==typeof x?x(e):x&&(x.current=e)},...S,mode:"side",portalClassName:s.portal,onMouseEnter:H,open:"closed"!==V,content:r.createElement(a.default,{nodeRef:K,in:"opening"===V||"opened"===V,addEndListener:e=>K.current?.addEventListener("transitionend",e,!1),mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:G,onExited:$},r.createElement("div",{ref:K,className:i()("DropdownReforged__contentWrapper",s.contentWrapper),onClickCapture:e=>{P||_&&"closing"===V&&(e.preventDefault(),e.stopPropagation())},onClick:z},T))},r.createElement("div",{className:i()("DropdownReforged__trigger",s.trigger),onMouseOver:H,onMouseEnter:H,onClick:"click"===L?B:void 0,onContextMenu:"contextmenu"===L?B:e=>{e.preventDefault()}},g)))))}))},632511:(e,t,o)=>{o.d(t,{FormattedDate:()=>s});var r=o(667294),a=o(24513),n=o(11316);const s=({timestamp:e,variant:t})=>{const{lang:o}=(0,a.useBrowserEnv)(),s=(0,n.useNow)();return r.createElement(r.Fragment,null,o.formatDate(e,{now:s,variant:t}))}},131854:(e,t,o)=>{o.d(t,{FormattedLangKey:()=>s});var r=o(667294),a=o(24513),n=o(345543);const s=e=>{const{lang:t}=(0,a.useBrowserEnv)(),{className:o,langkey:s,...i}=e;return t.fold(s,(e=>r.createElement(r.Fragment,null,e)),(e=>(n.isDev&&(e=e.map(((e,t)=>"string"==typeof e?r.createElement(r.Fragment,{key:t},e):r.cloneElement(e,{...e.props,key:t})))),r.createElement("span",{className:o},e))),i)}},101553:(e,t,o)=>{o.d(t,{LayerProvider:()=>n,useLayer:()=>s});var r=o(667294);o(973935);const a=(0,r.createContext)({}),n=({layer:e,children:t})=>r.createElement(a.Provider,{value:(0,r.useMemo)((()=>({layer:e})),[e])},t),s=()=>{const{layer:e}=(0,r.useContext)(a);return e||void 0}},491021:(e,t,o)=>{o.d(t,{LayoutDataProvider:()=>s,useLayoutData:()=>i});var r=o(24513),a=o(667294);const n=(0,a.createContext)(null),s=({children:e,mode:t})=>{const[o]=(0,r.useViewport)({debounced:!0}),s=o<640?"one-column":"two-column";return a.createElement(n.Provider,{value:(0,a.useMemo)((()=>({mode:t||s})),[s,t])},e)};function i(){const e=(0,a.useContext)(n);if(!e)throw new Error("LayoutDataContext не добавлен в дерево Реакта!");return e}},489267:(e,t,o)=>{o.d(t,{ExternalLink:()=>l,Link:()=>c});var r=o(667294),a=o(24513),n=o(147109),s=o(213359),i=o(260349);const c=(0,r.forwardRef)((({to:e,children:t,onNavigate:o,stopPropagation:s=!0,preventDefault:c=!0,disabled:d=!1,...u},m)=>{const h={...u,ref:m},{router:p}=(0,a.useBrowserEnv)(),{route:f,url:v}=p.fromEntity(e,n.IRouter.Action.Push),g=t=>{s&&t.stopPropagation(),(0,i.isMouseEventWithModifier)(t)||(c&&t.preventDefault(),p.push(e),o?.())};return n.IRouter.isRuntimeRoute(f)&&!d?r.createElement("span",{...h,onClick:g},t):!v||d?r.createElement("span",{...h},t):f?r.createElement("a",{...h,href:v,onClick:g},t):r.createElement(l,{...h,href:v,onClick:g},t)})),l=(0,r.forwardRef)((({children:e,href:t,target:o,disabled:n,onClick:c,stopPropagation:l=!0,...d},u)=>{const{vkDomain:m}=(0,a.useBrowserEnv)(),h=(0,a.useCombinedRefs)(u);return n?r.createElement("span",{...d,ref:h},e):r.createElement("a",{...d,ref:h,onClick:e=>{l&&e.stopPropagation(),(0,i.isMouseEventWithModifier)(e)||c?.(e)},href:d.download?t:(0,s.prepareLink)(m,t),target:o||"_blank",rel:"noopener noreferrer"},e)}))},273861:(e,t,o)=>{o.d(t,{getMessageOutStatusIcon:()=>u});o(393999);var r=o(294184),a=o.n(r),n=o(667294),s=o(963419),i=o(583475),c=o(84562),l=o(298161);const d=({message:e,isUnread:t,className:o,sendingIcon:r=n.createElement(s.Icon12ClockOutline,null),sendingIconColor:d,readIconColor:u,lang:m})=>{if(!e.isOut)return null;if("Queued"===e.kind?e.hasFailed:"failed"===e.editing?.status)return n.createElement("div",{className:a()("MessageOutStatusIcon__failed",o)},n.createElement(i.Icon12ErrorCircleFill,{"aria-hidden":!1,"aria-label":m.use("me_message_sending_failed")}));return("Queued"===e.kind?!e.cmid:"pending"===e.editing?.status)?n.createElement("div",{className:a()("MessageOutStatusIcon__sending",o),style:{color:d},role:"img","aria-label":m.use("me_message_sending")},r):n.createElement("div",{className:o,style:{color:u}},t?n.createElement(c.Icon16CheckOutline,null):n.createElement(l.Icon16CheckDoubleOutline,null))},u=({message:e,isUnread:t,className:o,sendingIcon:r,sendingIconColor:a,readIconColor:s,lang:i})=>e.isOut&&"Expired"!==e.kind&&"Service"!==e.kind?n.createElement(d,{message:e,isUnread:t,className:o,sendingIcon:r,sendingIconColor:a,readIconColor:s,lang:i}):null},227996:(e,t,o)=>{o.d(t,{MessageOutStatusIconHint:()=>i});var r=o(667294),a=o(84562),n=o(298161),s=o(131854);o(862202);const i=({isChat:e})=>r.createElement(s.FormattedLangKey,{langkey:e?"me_message_read_status_tooltip_in_chat":"me_message_read_status_tooltip",values:{unreadIcon:r.createElement(a.Icon16CheckOutline,{className:"MessageOutStatusIconHint__icon"}),readIcon:r.createElement(n.Icon16CheckDoubleOutline,{className:"MessageOutStatusIconHint__icon"})}})},851644:(e,t,o)=>{o.d(t,{ModalBackdrop:()=>i});o(895593);var r=o(667294),a=o(294184),n=o.n(a),s=o(86065);const i=({isClear:e,isBodyScrollDisabled:t,onClick:o,children:a})=>{const i=n()("RE_ModalBackdrop",{"RE_ModalBackdrop--tinted":!e}),{isFullScreen:c}=(0,r.useContext)(s.ModalConfigContext),l=n()("RE_ModalBackdrop__container",c?"RE_ModalBackdrop__container--fullScreen":"RE_ModalBackdrop__container--window");var d;return d=Boolean(t),(0,r.useEffect)((()=>{const e=document.body;if(!d)return;const t=e.getBoundingClientRect(),o=window.innerWidth-(t.left+t.right);if(0===o)return;const r=document.createElement("style");return r.innerText="body { overflow-y: hidden !important; }",e.appendChild(r),e.style.borderRight=`${o}px solid transparent`,()=>{e.style.borderRight="",e.removeChild(r)}}),[d]),r.createElement("div",{className:i},o&&r.createElement("div",{className:"RE_ModalBackdrop__flesh",onClick:o}),r.createElement("div",{className:l},a))}},387337:(e,t,o)=>{o.d(t,{ModalBody:()=>c});var r=o(819258),a=(o(351667),o(667294)),n=o(294184),s=o.n(n),i=o(86065);const c=({children:e,withCustomLayout:t,withScrollHandling:o,scrollbarProps:n})=>{const{isFullScreen:c}=(0,a.useContext)(i.ModalConfigContext),l=s()("RE_ModalBody",{"RE_ModalBody--fullScreen":c});return o?a.createElement(r.ScrollbarProvider,{className:l,scrollableProps:{className:s()({"RE_ModalBody--standard":!t}),...n?.scrollableProps},contentProps:{className:"RE_ModalBody__scrollbar-content",...n?.contentProps}},e):a.createElement("div",{className:s()(l,{"RE_ModalBody--standard":!t})},e)}},112975:(e,t,o)=>{o.d(t,{ModalCloseButton:()=>l});var r=o(315954),a=o(294184),n=o.n(a),s=(o(528098),o(667294)),i=o(86065),c=o(86894);const l=e=>{const{closeLabel:t,mode:o,onClose:a}=e,{isFullScreen:l}=(0,s.useContext)(i.ModalConfigContext),d="dark"===(0,c.useAppearance)();return s.createElement("button",{className:n()("ModalCloseButton",!l&&"ModalCloseButton--outside",d&&"ModalCloseButton--dark","modalHeader"===o&&"ModalCloseButton--modalHeaderMode","modalPanel"===o&&"ModalCloseButton--modalPanelMode"),"aria-label":t,onClick:a},s.createElement(r.Icon24Cancel,null))}},86065:(e,t,o)=>{o.d(t,{ModalConfigContext:()=>n,ModalsConfigProvider:()=>s});var r=o(667294),a=o(491021);const n=(0,r.createContext)({isFullScreen:!1}),s=({children:e})=>{const t=(0,a.useLayoutData)(),o=(0,r.useMemo)((()=>({isFullScreen:"one-column"===t.mode})),[t.mode]);return r.createElement(n.Provider,{value:o},e)}},804931:(e,t,o)=>{o.d(t,{ModalFooter:()=>a});o(974580);var r=o(667294);const a=({buttons:e,hint:t,children:o})=>r.createElement("footer",{className:"RE_ModalFooter"},t&&r.createElement("div",{className:"RE_ModalFooter__hint"},t),o&&r.createElement("div",{className:"RE_ModalFooter__content"},o),e&&r.createElement("div",{className:"RE_ModalFooter__actions"},e))},492858:(e,t,o)=>{o.d(t,{ModalHeader:()=>c});o(936021);var r=o(667294),a=o(864032),n=o(112975),s=o(294184),i=o.n(s);const c=({onClose:e,closeLabel:t,backLabel:o,onBack:s,title:c,children:l,className:d})=>r.createElement("header",{className:i()("RE_ModalHeader",d)},r.createElement("div",{className:"RE_ModalHeader__content"},o&&s&&r.createElement("button",{className:"RE_ModalHeader__back",onClick:s},r.createElement("span",{className:"RE_ModalHeader__backIcon"},r.createElement(a.Icon28ChevronLeftOutline,null)),o),c&&r.createElement("h1",{className:"RE_ModalHeader__title"},c),l&&r.createElement("div",{className:"RE_ModalHeader__container"},l)),r.createElement(n.ModalCloseButton,{closeLabel:t,onClose:e,mode:"modalHeader"}))},855419:(e,t,o)=>{o.d(t,{ModalPanel:()=>i});o(97839);var r=o(667294),a=o(294184),n=o.n(a),s=o(86065);const i=({children:e,className:t,topRight:o,size:a})=>{const{isFullScreen:i}=(0,r.useContext)(s.ModalConfigContext),c=n()("RE_ModalPanel",t,{"RE_ModalPanel--fullScreen":i});return r.createElement("article",{className:c,style:a?{width:a.width,height:a.height}:{}},e,o&&r.createElement("div",{className:"RE_ModalPanel__TopRight"},o))}},422177:(e,t,o)=>{o.d(t,{ModalView:()=>l});o(628392);var r=o(667294),a=o(294184),n=o.n(a),s=o(56690),i=o(101553),c=o(84905);const l=({children:e,isHidden:t,onEscape:o,contextClass:a,portalTarget:l})=>{const d=(0,i.useLayer)(),u=n()("RE_ModalView",{"RE_ModalView--hidden":Boolean(t)}),{subscribeKeyDown:m}=(0,c.useModuleKeyBoardHandlers)({moduleName:c.Module.Modal}),h=(0,r.useCallback)(((e,t)=>{void 0!==o&&e("Escape")&&(t(),o())}),[o]);return(0,r.useEffect)((()=>{if(!t)return m(h)}),[m,h,t]),r.createElement(s.Portal,{portalClassName:a,portalTarget:l||d},r.createElement("div",{className:u},e))}},311329:(e,t,o)=>{o.d(t,{ModalsProvider:()=>i,useModalContext:()=>c});var r=o(667294),a=o(345543),n=o(453934);const s=(0,r.createContext)(null),i=({children:e,stacks:t})=>{const o=(0,r.useCallback)((e=>{let o=!0;if(Object.values(t).forEach((t=>{const r=t.currentElement;let a=0;if(r?.groupId===e){for(o=!1;t.currentElement?.groupId===e;)a+=1,t.goBack();t.pop(a)}})),o)throw Error("Пытаетесь закрыть группу модалок, которая закрыта")}),[t]),i=(0,r.useCallback)((({modalId:e,groupId:o,isSubModal:r},a)=>{const n=t[a];if(null!==n.findIndex(e))throw new Error("Пытаетесь открыть модалку, которая открыта");n.push({modalId:e,groupId:o,isSubModal:r})}),[t]),c=(0,r.useCallback)(((e,o)=>{const r=t[o],a=r.currentElement;a?.modalId===e&&r.pop()}),[t]),l=(0,r.useCallback)(((e,o)=>{t[o].forcedRemove((t=>t.modalId===e))}),[t]),d=(0,r.useCallback)(((e,o)=>t[o].findIndex(e)),[t]),[u,m]=(0,r.useState)({rightPanel:[],popup:[]});(0,r.useLayoutEffect)((()=>{const e=Object.keys(t).map((e=>t[e].subscribe((t=>{const{action:o,payload:r}=t;switch(o){case"add":m((0,n.produce)((o=>{o[e]=t.payload.isSubModal?o[e].filter((({modalId:e})=>e!==r.modalId)):[],o[e].push(r)})));break;case"remove":m((0,n.produce)((t=>{const o=t[e].filter((({modalId:e})=>!r.find((t=>e===t.modalId))));o.length<t[e].length&&(t[e]=o)})));break;default:(0,a.exhaustivenessCheck)(o)}}))));return()=>e.forEach((e=>e()))}),[t]);const h=(0,r.useCallback)((e=>t[e].size),[t]),p=(0,r.useMemo)((()=>({openedModals:u,openModal:i,closeModal:c,closeModalForced:l,closeGroup:o,getStackSize:h,findIndexInStack:d})),[u,i,c,l,o,h,d]);return r.createElement(s.Provider,{value:p},e)};function c(){const e=(0,r.useContext)(s);if(!e)throw new Error("ModalContext не добавлен в дерево Реакта!");return e}},265394:(e,t,o)=>{o.d(t,{OptimizedSpinner:()=>c});o(241676);var r=o(667294),a=o(294184),n=o.n(a),s=o(86894),i=o(997650);const c=({className:e,size:t="small",intersectionOptions:o,onIntersection:a})=>{const{ref:c,inView:l}=(0,i.useInView)({...o,threshold:.01});return(0,r.useEffect)((()=>{l&&a&&a()}),[l]),r.createElement("div",{ref:c,className:n()("OptimizedSpinner",e)},l&&r.createElement(s.Spinner,{size:t}))}},642602:(e,t,o)=>{o.d(t,{PeerAvatar:()=>c});var r=o(667294),a=o(207739),n=o(51346),s=o(24513),i=o(661622);const c=r.memo((function({peer:e,size:t,className:o,withFavorite:c}){const l=(0,n.useAvatarPhoto)(e,t),d=(0,s.useOwner)(),u=a.isFavorites(e.id,d.id);return c&&u?r.createElement(i.AvatarFavorites,{size:t}):r.createElement(n.BasicAvatar,{size:t,url:l,alt:a.name(e),content:a.initials(e),color:a.isContactPeerId(e.id)?"contact":e.id,className:o})}))},713020:(e,t,o)=>{o.d(t,{PeerTitle:()=>p});o(501954);var r=o(667294),a=o(354819),n=o(96715),s=o(20403),i=o(277937),c=o(207739),l=o(294184),d=o.n(l),u=o(24513),m=o(952644),h=o(695631);const p=r.memo((function({peer:e,isShortened:t=!1,isAdmin:o=!1,isCreator:l=!1,isFavorites:p=!1,isRestrictedToWrite:f=!1,isClassic:v=!1,className:g,iconColor:_}){const{vkm_convo_member_temporary_ban:k}=(0,u.useFeatureFlags)(),{lang:b}=(0,u.useBrowserEnv)(),E=(0,u.useViewer)(),y=m.isEdu(E.profileType);let w;switch(!0){case p:w=b.use("me_favorites");break;case t:w=c.firstName(e);break;case v:w=c.classicName(e);break;default:w=c.name(e)}return r.createElement("div",{className:d()("PeerTitle",{"PeerTitle--vkAdmin":c.isVkAdministration(e.id)},g)},r.createElement("div",{className:"PeerTitle__title"},w),r.createElement(h.StatusIcon,{peer:e,size:14,className:"PeerTitle__icon"}),"Chat"!==e.kind&&"Contact"!==e.kind&&e.isVerified?r.createElement("span",{className:"PeerTitle__icon PeerTitle__verifiedIcon",style:{color:_}},y&&"User"===e.kind?r.createElement(a.Icon16Education,{width:12,height:12}):r.createElement(n.Icon16Verified,null)):null,(o||l)&&r.createElement("span",{className:d()("PeerTitle__icon",o&&"PeerTitle__adminIcon",l&&"PeerTitle__creatorIcon")},r.createElement(s.Icon12Favorite,{"aria-hidden":!1,"aria-label":b.use("me_admin")})),k&&f&&r.createElement("span",{className:"PeerTitle__icon PeerTitle__cantWriteIcon"},r.createElement(i.Icon16MessageCross,null)))}))},854367:(e,t,o)=>{o.d(t,{PhotoItem:()=>i});var r=o(667294),a=o(659397),n=o(66298),s=(o(848056),o(146951));const i=({src:e,thumbhashUrl:t,alt:o,width:i,height:c,cover:l,showReload:d=!1,className:u,widthAndHeightAsAttr:m,onLoad:h,onError:p})=>{const f=l?{width:i,height:c}:void 0,[v,g]=(0,r.useState)(1),[_,k]=(0,r.useState)((()=>{if(!e)return!1;const t=(0,s.isImageLoaded)(e);return t&&h?.(),t})),[b,E]=(0,r.useState)(!1),y=(0,r.useCallback)((e=>{b&&d&&(e.preventDefault(),e.stopPropagation(),g((e=>e+1)))}),[b,d]),w=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g((e=>e+1))}),[]);return r.createElement("div",{className:(0,a.classNames)("PhotoItem",u),style:{width:i,height:c},onClick:y},r.createElement("div",{className:(0,a.classNames)("PhotoItem__blur",{PhotoItem__nothumbhash:!t}),style:{"--thumbhashUrl":t&&`url(${t})`}}),r.createElement("img",{key:v,src:e,alt:o,width:m?i:void 0,height:m?c:void 0,className:(0,a.classNames)("PhotoItem__img",{"PhotoItem__img--loaded":_}),style:f,onLoad:()=>{k(!0),E(!1),h?.()},onError:()=>{E(!0),p?.()}}),b&&r.createElement("div",{className:"PhotoItem__error"},d&&r.createElement("button",{type:"button",className:"PhotoItem__reload",onClick:w},r.createElement(n.Icon24DownloadOutline,{className:"PhotoItem__reloadIcon"}))))}},410388:(e,t,o)=>{o.d(t,{ChannelAudiosPlaylistProvider:()=>c,CommentsAudiosPlaylistProvider:()=>l,ConvoAudiosPlaylistContext:()=>s,ConvoAudiosPlaylistProvider:()=>i});var r=o(667294),a=o(114626),n=o(24513);const s=r.createContext((()=>{})),i=({convo:e,children:t})=>{const o=(0,r.useRef)(e),i=(0,n.usePixelDensity)();o.current=e;const c=(0,r.useCallback)((()=>{const e=(0,a.mapConvoToConvoAudioTrackList)(o.current,i),t={type:"temp",source:{kind:"message",peerId:o.current.peerId}};return new a.ConvoAudiosPlaylist({list:e,meta:t})}),[i]);return r.createElement(s.Provider,{value:c},t)},c=({channel:e,children:t})=>{const o=(0,r.useRef)(e),i=(0,n.usePixelDensity)();o.current=e;const c=(0,r.useCallback)((()=>{const e=(0,a.mapChannelToConvoAudioTrackList)(o.current,i),t={type:"temp",source:{kind:"channel",channelId:o.current.id}};return new a.ConvoAudiosPlaylist({list:e,meta:t})}),[i]);return r.createElement(s.Provider,{value:c},t)},l=({post:e,children:t})=>{const o=(0,r.useRef)(e),i=(0,n.usePixelDensity)();o.current=e;const c=(0,r.useCallback)((()=>{const e=(0,a.mapPostCommentsToConvoAudioTrackList)(o.current,i),t={type:"temp",source:{kind:"channel",channelId:o.current.channelId}};return new a.ConvoAudiosPlaylist({list:e,meta:t})}),[i]);return r.createElement(s.Provider,{value:c},t)}},61698:(e,t,o)=>{o.d(t,{Popper:()=>u});o(833249);var r=o(667294),a=o(294184),n=o.n(a),s=o(56690),i=o(24513),c=o(260349),l=o(101553),d=o(148900);const u=(0,r.forwardRef)((function({open:e=!0,position:t="auto",mode:o="side",align:a="auto",adaptation:u,content:_,portalClassName:b,children:E,portalTarget:y,cursor:w,watchContentChange:C=!1,onPositionChange:I,onAlignTypeChange:A,onPositionTypeChange:S,...x},P){const M=(0,l.useLayer)(),[N,R]=(0,r.useState)(null),T=(0,i.useCombinedRefs)(P),[O,j]=(0,r.useState)(null),[L,D]=(0,r.useState)(null),[V,K]=(0,r.useState)(null),{observe:U}=(0,d.useResizeObserver)(),B=(0,r.useCallback)(((r=!1)=>{if(e){if("side"===o&&T.current&&(0!==(n=T.current).offsetWidth||0!==n.offsetHeight)){const[e,o,n]=function(e,t,o,r,a,n,s){let i="fixed",l=e.getBoundingClientRect(),{innerWidth:d,innerHeight:u}=window,_=window.scrollY||document.documentElement.scrollTop,k=window.scrollX||document.documentElement.scrollLeft;n&&(l=(0,c.getOffsetRect)(e,n),d=n.clientWidth,u=n.clientHeight,_=n.scrollTop,k=n.scrollLeft,i="absolute");const b=t?.getBoundingClientRect(),E=b?.width||0,y=b?.height||0,w=E&&!s?Math.max(l.width,E):void 0,C=y&&!s?Math.max(l.height,y):void 0;if(o===m){o=f(l.top-_,_+u-l.top-l.height)}if(r===m){r=v(k+d/3,l.left+.5*l.width,k+2*d/3)}const I=c.browser.safari_mobile&&window.visualViewport?.pageTop||0,A=l.left,S=l.top+I,x=A+l.width,P=S+l.height,M=.5*l.width,N=.5*E,R=.5*l.height,T=.5*y,O=l.width<E,j=l.height<y,L=S<y,D=P+y>u+_,V=n&&S-_<y,K=P<y,U=S+R<T,B=S+y>u+_,H=S+R+T>u+_,F=A-l.width<E,G=A+E>d+k,$=x-l.width<E,W=x+E>d+k,z=A+M<N,q=A+M+N>d+k,Y="horizontal"===a,J="vertical"===a;J||(("top"===o&&L||"center"===r&&U||p.includes(r)&&K)&&(o="bottom"),("bottom"===o&&D||"center"===r&&H||p.includes(r)&&B)&&(o="top"));Y||(h.includes(o)&&(p.includes(r)&&(F&&(r="left"),G&&(r="right")),"center"===r&&(q&&(r="right"),z&&(r="left"))),p.includes(o)&&(h.includes(r)&&(K&&(r="bottom"),B&&(r="top")),$&&(o="right",r="right"===r?"left":r),W&&(o="left",r="left"===r?"right":r)));let X={};switch(o){case"top":X={width:w,top:S-y};break;case"bottom":X={width:w,top:P};break;case"left":X={height:C,left:A-E};break;case"right":X={height:C,left:x}}h.includes(o)&&O&&("right"===r&&(X.left=x-E),"center"===r&&(X.left=A+M-N),Y&&(("center"===r&&z||"right"===r&&$)&&(X.left=0),("center"===r&&q||"left"===r&&W)&&(X.left=d-E+k)));if(p.includes(o)&&j){switch(r){case"center":X.top=S+R-T;break;case"top":X.top=S-y+l.height}J&&(("center"===r&&U||p.includes(r)&&K)&&(X.top=0),V&&"center"===r&&(X.top=_),("center"===r&&H||p.includes(r)&&B)&&(X.top=u-y+_))}return[g({top:S,left:A,...X,position:i}),r,o]}(T.current,N,t,a,u,y?.current||void 0,r);I?.({left:e.left,top:e.top}),A?.(o),S?.(n),j(e),D(o),K(n)}var n;if("cursor"===o&&w){const[e,o,r]=function(e,t,o,r){const{innerWidth:a,innerHeight:n}=window,{x:s,y:i}=e,c=t?.getBoundingClientRect(),l=c?.width||0,d=c?.height||0,u=l||void 0,h=d||void 0;if(o===m){o=f(i,n-i)}if(r===m){r=v(s,s,a-s)}const _=i<d,b=n-i<d,E=i<d/2,y=n-i<d/2,w=s<l,C=a-s<l;("top"===o&&_||"center"===r&&E)&&(o="bottom");("bottom"===o&&b||"center"===r&&y)&&(o="top");p.includes(r)&&(w&&C?r="auto":w?r="left":C&&(r="right"));const I={};switch(o){case"top":I.top=i-d;break;case"bottom":I.top=i}switch(r){case"auto":{const[e,t]=function(e,t){const{innerWidth:o}=window;let r=e,a="right";if(e<o/2){const n=e+t;n>o&&(r=e-(n-o)),a="left"}const n=e-t;n<0&&(r=-n);return[k(r,t,o),a]}(s,l);I.left=e,r=t;break}case"left":I.left=k(s,l,a);break;case"right":I.left=k(s-l,l,a)}return[g({position:"fixed",left:s,top:i,height:h,width:u,...I}),r,o]}(w,N,t,a);I?.({left:e.left,top:e.top}),A?.(o),S?.(r),j(e),D(o),K(r)}}}),[e,o,T,w,N,t,a,u,y,I,A,S]);return(0,r.useLayoutEffect)((()=>{B();const e=Array.from(N?.children||[])?.[0];if(!e||!C)return;return U(e,(e=>{e.borderBoxSize[0]&&B(!0)}))}),[N?.children,U,B,C]),r.createElement(r.Fragment,null,"cursor"!==o&&E&&r.cloneElement(E,{...E.props,ref:T}),e&&r.createElement(s.Portal,{...x,ref:R,className:n()("MEPopper","MEConfig",L&&`MEPopper--align${H=L,H.length>0?H.slice(0,1).toUpperCase()+H.slice(1):""}`,V&&`MEPopper--${V}`),"data-align":L,"data-position":V,portalClassName:b,style:O||void 0,portalTarget:y?.current||M},_));var H})),m="auto",h=["top","bottom"],p=["left","right"];function f(e,t){return t>e?"bottom":"top"}function v(e,t,o){return t>=e&&t<=o?"center":t>o?"right":"left"}function g(e){return{...e,top:Math.round(e.top),left:Math.round(e.left)}}const _=24;function k(e,t,o){if(e<_)return _;const r=o-_;return e>r?r-t:e}},56690:(e,t,o)=>{o.d(t,{Portal:()=>s});var r=o(667294),a=o(973935),n=o(24513);const s=(0,r.forwardRef)((function({children:e,portalClassName:t,portalTarget:o,...s},i){const[c,l]=(0,r.useState)(null),d=(0,n.usePrevious)(t);return(0,r.useEffect)((()=>{c&&(d&&c.classList.remove(...d.split(" ")),t&&c.classList.add(...t.split(" ")))}),[c,t,d]),(0,r.useLayoutEffect)((()=>{if(null===o)return;const e=function(e,t){const o=document.createElement("div");e&&o.classList.add(...e.split(" "));return(t||document.body).appendChild(o)}(t,o);return l(e),()=>{e.remove()}}),[o]),c?a.createPortal(r.createElement("div",{...s,ref:i},e),c):null}))},467741:(e,t,o)=>{o.d(t,{ProgressCircle:()=>i});o(417819);var r=o(667294),a=o(294184),n=o.n(a),s=o(24513);const i=({size:e,progress:t,strokeWidth:o=2,strokeColor:a="white",strokeOverlayColor:i,className:c,ariaLabel:l})=>{const{lang:d}=(0,s.useBrowserEnv)(),u=(e-o)/2,m=`0 0 ${e} ${e}`,h=u*Math.PI*2,p=h-h*t/100;return r.createElement("div",{role:"progressbar",className:n()("ProgressCircle",c),style:{width:e,height:e},"aria-label":l??d.use("me_progress_circle_default_aria_label"),"aria-valuenow":Math.floor(t)},r.createElement("svg",{width:e,height:e,viewBox:m},i&&r.createElement("circle",{className:"ProgressCircle__progressOverlay",cx:e/2,cy:e/2,r:u,stroke:i,strokeWidth:`${o}px`}),r.createElement("circle",{className:"ProgressCircle__progress",cx:e/2,cy:e/2,r:u,stroke:a,strokeWidth:`${o}px`,transform:`rotate(-90 ${e/2} ${e/2})`,style:{strokeDasharray:h,strokeDashoffset:p}})))}},437701:(e,t,o)=>{o.d(t,{Provider:()=>f});var r=o(667294),a=o(207739),n=o(24513),s=o(311329),i=o(842281),c=o(794881),l=o(932111),d=o(474033),u=o(533481),m=o(65956),h=o(329675),p=o(11316);const f=({children:e,env:t,featureFlags:o,state:f,dispatch:v,owner:g})=>{const _=(0,r.useCallback)((e=>{v({type:"CacheUpdateReceived",...e})}),[v]),k=a.safeGet(f.peers,f.viewer.id),b=(0,r.useMemo)((()=>({viewer:k,...f.viewer})),[k,f.viewer]),E=(0,r.useMemo)((()=>({popup:t.modals.stack,rightPanel:new l.Stack})),[t.modals.stack]),y=(0,r.useMemo)((()=>({styles:f.themeStyles,appearances:f.themeAppearances,backgrounds:f.themeBackgrounds})),[f.themeAppearances,f.themeBackgrounds,f.themeStyles]),w=(0,m.useStickerEmojiMenuPopper)();return r.createElement(n.BrowserEnvProvider,{value:t},r.createElement(i.RouterProvider,null,r.createElement(s.ModalsProvider,{stacks:E},r.createElement(n.DispatchProvider,{value:v},r.createElement(n.FeatureFlagsProvider,{value:o},r.createElement(n.HelpHintsProvider,{value:f.helpHints},r.createElement(n.LastSeenProvider,{value:f.lastSeens},r.createElement(n.TypingsProvider,{value:f.typings},r.createElement(n.PeersProvider,{value:f.peers},r.createElement(n.OwnerProvider,{value:g},r.createElement(d.StickersApiProvider,null,r.createElement(h.StickersConfigProvider,null,r.createElement(u.StickerEmojiMenuProvider,{value:w},r.createElement(n.ConvosProvider,{value:f.convos},r.createElement(n.ChannelsProvider,{value:f.channels},r.createElement(n.OrganisersProvider,{value:f.organisers},r.createElement(n.ConvosSearchIndexProvider,{value:f.convosSearchIndex},r.createElement(n.ViewerProvider,{value:b},r.createElement(n.InsertIntoCacheProvider,{value:_},r.createElement(c.ComposerDraftsProvider,{value:f.composerDrafts},r.createElement(c.ChannelComposerDraftsProvider,{value:f.channelComposerDrafts},r.createElement(c.CommentsComposerDraftsProvider,{value:f.commentsComposerDrafts},r.createElement(n.VideoMessageShapesProvider,{value:f.videoMessageShapes},r.createElement(n.ThemeStylesContextProvider,{value:y},r.createElement(p.NowContextProvider,null,r.createElement(n.DeviceIdProvider,{value:f.deviceId},e))))))))))))))))))))))))))}},842281:(e,t,o)=>{o.d(t,{RouterProvider:()=>s,useConvoRoute:()=>c,useRouter:()=>i});var r=o(24513),a=o(667294);const n=(0,a.createContext)({}),s=({children:e})=>{const{router:t}=(0,r.useBrowserEnv)(),[o,s]=(0,a.useState)(t.screenRoute);(0,a.useLayoutEffect)((()=>{const e=t.subscribe((e=>s(e)));return()=>e()}),[t]);const i=(0,a.useMemo)((()=>({router:t,screenRoute:o,runtimeRoute:t.runtimeRoute})),[t,o]);return a.createElement(n.Provider,{value:i},e)},i=()=>{const{router:e,screenRoute:t,runtimeRoute:o}=(0,a.useContext)(n);return{router:e,screenRoute:t,runtimeRoute:o,modal:t.modal?.slice(-1).pop()||null,rightPanel:t.rp?.slice(-1).pop()||null,navigate:e.push,back:e.back,forward:e.forward,replace:e.replace}},c=()=>{const{screenRoute:e}=i();if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},695631:(e,t,o)=>{o.d(t,{StatusIcon:()=>s});var r=o(667294),a=o(659397),n=o(24513);o(542663);const s=({peer:e,size:t,className:o})=>{const s=(0,n.usePixelDensity)();if(!("User"===e.kind&&e.imageStatus))return null;const i=s?2*t:t,c=e.imageStatus.images.find((e=>i<=e.width&&Boolean(e.url)))?.url;return r.createElement("div",{className:(0,a.classNames)(`StatusIcon--size-${t}`,o)},r.createElement("img",{alt:e.imageStatus.name,src:c}))}},65956:(e,t,o)=>{o.d(t,{StickerEmojiMenu:()=>E,StickerEmojiMenuPopper:()=>b,useStickerEmojiMenuPopper:()=>y});o(152440);var r=o(667294),a=o(555156),n=o(17376),s=o(436253),i=o(24513),c=o(952644),l=o(429697),d=o(963196),u=o(294184),m=o.n(u),h=o(101553),p=o(803854),f=o(33200),v=o(56690),g=o(339778),_=o(474033),k=o(938230);const b=(0,r.memo)((({isOpen:e,toggleIsOpen:t,className:o,contentClassName:a,triggerClassName:n,children:s,onStickerSend:i,...c})=>{const d=(0,r.useRef)(null),u=(0,r.useRef)(null),p=(0,h.useLayer)(),[f,g]=(0,r.useState)({left:"100vw",top:"100vh",position:"fixed",transform:"translateX(-100%) translateY(-100%)"}),_=(0,r.useCallback)(((...e)=>i?.(...e)),[i]);return(0,r.useEffect)((()=>{const e=e=>{e.target instanceof Node&&d.current&&!d.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[t]),(0,r.useLayoutEffect)((()=>{if(u.current&&e){const{right:e,top:t}=u.current.getBoundingClientRect();g({left:e,top:t,position:"fixed",transform:`translateX(-100%) translateY(calc(-100% - ${16}px))`})}}),[e]),r.createElement("div",{className:m()(o,"StickerEmojiMenuPopper"),onMouseDown:e=>{e.preventDefault()},onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1)},r.createElement("div",{className:m()(n,"StickerEmojiMenuPopper__trigger"),ref:u},s),r.createElement(v.Portal,{portalTarget:p},r.createElement(l.default,{nodeRef:d,in:e,timeout:200,classNames:"StickerEmojiMenuPopper__content-",mountOnEnter:!0,style:f},r.createElement("div",{ref:d,className:m()(a,"StickerEmojiMenuPopper__content")},r.createElement(E,{onStickerSend:_,isVisible:e,...c})))))})),E=(0,r.memo)((({className:e,...t})=>{const o=(0,i.useOwner)(),{api:l,router:u,logger:h,vkcom_me:v}=(0,i.useBrowserEnv)(),{profileType:b}=(0,i.useViewer)(),E=c.isEdu(b),y=(0,_.useStickersApi)(),{vkm_stickers_popup:w}=(0,i.useFeatureFlags)(),C=(0,r.useMemo)((()=>w?new s.PopupStickerService:void 0),[w]);(0,r.useEffect)((()=>{t.isVisible||(0,g.setActivePackKeyOptions)({activePackKey:y.cache.stickersActiveTab?.get()||void 0})}),[t.isVisible,y]);const I=(0,r.useCallback)(((e,t={})=>l.fetchForExternalLibs(e,t,{timeout:3e4,retries:5}).catch((e=>e instanceof d.IApi.RequestError?Promise.reject(e.apiError):e instanceof d.IApi.ExecuteErrors?Promise.reject({errors:e.list.map((e=>e.apiError))}):Promise.reject(e)))),[l]),A=(0,r.useCallback)((()=>{u.push({kind:"StickersStoreProxyRoute"})}),[u]),S=(0,r.useCallback)((()=>{t.peerId?u.push({kind:"MiniAppModal",miniAppId:p.resolveMiniAppId(f.UGC_STICKERS_APP_ID),hash:new URLSearchParams({peer_id:String(t.peerId),ref:"keyboard"}).toString()}):h.error("У стикерпикера нету peerId для открытия миниаппа UGC")}),[h,t.peerId,u]),x=(0,r.useCallback)((()=>{u.push({kind:"MiniAppModal",miniAppId:p.resolveMiniAppId(f.VMOJI_CONSTRUCTOR_APP_ID),hash:new URLSearchParams({is_suggested:"true",promo_id:"vmoji_avatar_suggestion_stickers_keyboard_hint"}).toString()})}),[u]),P=(0,r.useCallback)((({character_id:e},t)=>{const o={character_id:e,...t};o.disable_share="true",u.push({kind:"MiniAppModal",miniAppId:p.resolveMiniAppId(f.VMOJI_CONSTRUCTOR_APP_ID),hash:new URLSearchParams(o).toString()})}),[u]);return r.createElement(k.StickersPopupRootContainer,{id:a.POPUP_STICKER_CONTAINER_ID,isVisible:t.isVisible,popUpStore:C,isUseAsFullscreen:!0,className:"StickerEmojiMenuPopper__popup",onClick:()=>{C?.destroyByRemove()},position:"absolute"},r.createElement(n.StickersEmojiKeyboard,{...t,onPopUpPlay:(e,o)=>{t.isVisible&&w&&C&&C.preparePreview({stickerElement:e.target,layers:o})},className:m()(e,"StickerEmojiMenu"),userId:o.id,onAPIRequest:I,onShopClick:E?void 0:A,onUGCEditClick:S,onVmojiEditClick:P,onUGCReportClick:v?.onUGCReportClick,onVmojiCreateClick:v?.onVmojiCreateClick,onVmojiSuggestionClick:x,onStockItemGiftClick:v?.onStockItemGiftClick,onStockItemSettingsClick:v?.onStockItemSettingsClick}))})),y=()=>{const e=(0,r.useRef)(!1),t=(0,r.useRef)(),[o,a]=(0,r.useState)(!1),n=(0,r.useCallback)(((o,r=!0)=>{o!==e.current&&window.clearTimeout(t.current),e.current=o,t.current=window.setTimeout((()=>{a(o),t.current=void 0}),r?o?100:200:0)}),[]);return(0,r.useEffect)((()=>()=>{window.clearTimeout(t.current)}),[]),(0,r.useMemo)((()=>({isOpen:o,toggleIsOpen:n})),[o,n])}},533481:(e,t,o)=>{o.d(t,{StickerEmojiMenuProvider:()=>n,useStickerEmojiMenu:()=>s});var r=o(667294);const a=r.createContext(void 0),n=a.Provider;function s(){const e=(0,r.useContext)(a);if(!e)throw Error("Каждая беседа должна сопровождаться контекстом StickerEmojiMenu");return e}},474033:(e,t,o)=>{o.d(t,{StickersApiProvider:()=>c,useStickersApi:()=>l});var r=o(667294),a=o(467702),n=o(24513),s=o(963196);const i=r.createContext(null),c=({children:e})=>{const{api:t}=(0,n.useBrowserEnv)(),o=(0,n.useDispatch)(),c=(0,n.useOwner)(),l=(0,r.useCallback)(((e,o={})=>t.fetchForExternalLibs(e,o,{timeout:3e4,retries:5}).catch((e=>e instanceof s.IApi.RequestError?Promise.reject(e.apiError):e instanceof s.IApi.ExecuteErrors?Promise.reject({errors:e.list.map((e=>e.apiError))}):Promise.reject(e)))),[t]),d=(0,r.useMemo)((()=>new a.API({onAPIRequest:l,userId:c.id})),[l,c.id]),u=(0,r.useCallback)((async()=>{const e=await d.cache.getStockItems({active:!0});if(!e)return;const t=e.reduce(((e,t)=>[...e,...t.product.stickers||[]]),[]);o({type:"StickersCacheReceived",stickers:t})}),[o,d.cache]);return(0,r.useEffect)((()=>(u(),d.cache.stickersAsync.subscribe((async e=>{"stockItems"===e&&u()})))),[o,u,d.cache]),r.createElement(i.Provider,{value:d},e)};function l(){const e=(0,r.useContext)(i);if(!e)throw new Error("StickersApiProvider не добавлен в дерево Реакта!");return e}},938230:(e,t,o)=>{o.d(t,{StickersPopupRootContainer:()=>i});o(550654);var r=o(667294),a=o(436253),n=o(961232),s=o(24513);const i=({children:e,allowUseCommon:t,isUseAsFullscreen:o,popUpStore:i,setElementRef:c,position:l="absolute",HtmlElement:d="div",className:u="StickersPopupRootContainer",...m})=>{const{vkm_stickers_popup:h}=(0,s.useFeatureFlags)(),p=(0,r.useMemo)((()=>new a.PopupStickerService),[]);return h?r.createElement(n.PopupRoot,{setElementRef:c,popUpStore:i||p,position:l,className:u,allowUseCommon:t,isUseAsFullscreen:o,HtmlElement:d,...m},e):r.createElement(d,{ref:c,className:u,...m},e)}},244609:(e,t,o)=>{o.d(t,{Tooltip:()=>m});o(126449);var r=o(667294),a=o(294184),n=o.n(a),s=o(61698),i=o(24513),c=o(418592),l=o(136808),d=o(842760),u=o(345543);const m=(0,r.forwardRef)((({children:e,content:t,disabled:o=!1,open:a=!1,onOpen:m,onClose:h,delay:p=50,pointerEvents:f="none",showOnTouch:v=!1,align:g="auto",position:_="auto",tooltipClassName:k,arrowOffset:b={},tooltipOffset:E={},vkuiStyle:y},w)=>{const C=(0,c.useDeviceData)(),[I,A]=(0,r.useState)(a?"opened":"closed"),[S,x]=(0,r.useState)(),[P,M]=(0,r.useState)(),N=(0,r.useRef)(null),R=(0,r.useRef)(null),T=(0,r.useRef)(null),O=()=>{R.current&&clearTimeout(R.current),T.current&&clearTimeout(T.current),R.current=T.current=null},j=(0,r.useCallback)((()=>{A("closed"),h&&h()}),[h]),L=(0,r.useCallback)((()=>{"opened"===I?(A("is_closing"),T.current=window.setTimeout(j,200)):j()}),[I,j]),D=(0,r.useCallback)((()=>{O(),R.current=window.setTimeout((()=>{A("opened"),m&&m()}),p)}),[p,m]),V=(0,r.useCallback)((()=>{O(),R.current=window.setTimeout(L,0)}),[L]);(0,r.useEffect)((()=>{const e=N.current;return e&&(e.addEventListener("mouseenter",D),e.addEventListener("mouseleave",V)),()=>{e&&(e.removeEventListener("mouseenter",D),e.removeEventListener("mouseleave",V))}}),[D,V]),(0,r.useEffect)((()=>O),[]),(0,i.useDidUpdate)((()=>{a?D():V()}),[a]);const K=(0,r.useMemo)((()=>{if(!P||!S)return null;const e=b.x||0,t=b.y||0;switch(S){case"center":return"top"===P||"bottom"===P?{x:`calc(50% + ${e-d.DEFAULT_ARROW_WIDTH/2}px)`}:{y:`calc(50% + ${t-d.DEFAULT_ARROW_HEIGHT/2}px)`};case"top":return{y:t+d.DEFAULT_ARROW_PADDING};case"left":return{x:e+d.DEFAULT_ARROW_PADDING};case"bottom":return{y:`calc(100% - ${t+d.DEFAULT_ARROW_HEIGHT+d.DEFAULT_ARROW_PADDING}px)`};case"right":return{x:`calc(100% - ${e+d.DEFAULT_ARROW_WIDTH+d.DEFAULT_ARROW_PADDING}px)`};default:(0,u.exhaustivenessCheck)(S)}}),[S,b.x,b.y,P]),U=(0,r.useMemo)((()=>{if(!y||!S||"top"!==P)return{};const e=E.x||0,t=E.y||0;switch(S){case"left":return{left:`-${e}px`,bottom:`${t}px`};case"right":return{right:`-${e}px`,bottom:`${t}px`};case"top":return{top:`-${t}px`};case"bottom":return{bottom:`-${t}px`};case"center":return{bottom:`${t}px`};default:(0,u.exhaustivenessCheck)(S)}}),[S,P,E.x,E.y,y]),B=r.createElement("div",{className:n()("METooltip",k,{"METooltip--removed":"is_closing"===I,"METooltip--vkuiStyle":y}),style:{"--arrowOffsetX":(b.x||0)+"px","--arrowOffsetY":(b.y||0)+"px",pointerEvents:f,...U}},t,y&&P&&K&&r.createElement(l.PopperArrow,{placement:P,coords:K,arrowClassName:"METooltip__arrow"}));return!v&&C.isTouchOnly?e:r.createElement(s.Popper,{content:B,open:!o&&"closed"!==I,ref:e=>{N.current=e,"function"==typeof w?w(e):w&&(w.current=e)},portalClassName:"MEConfig",mode:"side",align:g,position:_,onAlignTypeChange:x,onPositionTypeChange:M},e)}))},146951:(e,t,o)=>{o.d(t,{blobToImageUrl:()=>s,downloadImage:()=>d,fileToStaticImageUrl:()=>l,getFilesFromDataTransferItems:()=>a,getImageSizeByFile:()=>i,isImageLoaded:()=>c});var r=o(584750);async function a(e){const t=[];return await Promise.all(Array.from(e).map((async e=>{if("file"!==e.kind)return;const o=e.webkitGetAsEntry();if(o){const r=await function(e,t){return new Promise((o=>{let r=0;const a=[];function n(e){if(function(e){return e.isFile}(e)){r++;const n=t.getAsFile();e.file((e=>{r--,a.push(e),0===r&&o(a)}),(()=>{n&&(r--,a.push(n)),0===r&&o(a)}))}else(function(e){return e.isDirectory})(e)&&s(e.createReader())}function s(e){r++,e.readEntries((e=>{r--;for(const t of e)n(t);0===r&&o(a)}))}n(e)}))}(o,e);return void t.push(...r)}const r=e.getAsFile();r&&t.push(r)}))),t.map(n)}function n(e){if(e.type)return e;const t=e.name.split(".").pop();if(!t)return e;let o="";switch(t.toLowerCase()){case"mov":o="video/quicktime";break;case"3gp":o="video/3gpp"}return o?new File([e],e.name,{type:o}):e}function s({blob:e}){return URL.createObjectURL(e)}function i(e){return new Promise(((t,o)=>{const r=new Image,a=URL.createObjectURL(e);r.onload=()=>{t({width:r.width,height:r.height}),URL.revokeObjectURL(a),r.remove()},r.onerror=e=>{o(e),r.remove()},r.src=a}))}function c(e){const t=new Image;return t.src=e,t.complete||t.width+t.height>0}function l(e){return new Promise(((t,o)=>{if(!r.IMAGE_TYPES.includes(e.type))return o();if("image/gif"!==e.type)return t(s({blob:e}));const a=new Image;a.onload=async()=>{const{width:r,height:n}=await i(e),s=document.createElement("canvas");s.height=n,s.width=r;const c=s.getContext("2d");if(!c)return o();c.clearRect(0,0,s.width,s.height),c.drawImage(a,0,0),t(s.toDataURL("image/png",1)),s.remove(),a.remove()},a.onerror=()=>{o(),a.remove()},a.src=s({blob:e})}))}async function d(e){const t=await fetch(e),o=await t.blob(),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=function(e){try{return new URL(e).pathname.split("/").pop()}catch{}}(e)||"download.jpg",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},919057:(e,t,o)=>{o.d(t,{applyGap:()=>h,computeAttachePhotosLayout:()=>u});var r=o(345543);function a(e){if((0,r.isNonEmptyArray)(e))return e;if(r.isDev)throw new Error("not an NonEmptyArray");return[[]]}function n(e,t){const o=e/t.reduce(((e,t)=>e+t.width),0),r=t.map((e=>{const{height:t,width:r}=e;return{...e,height:t*o,width:r*o}}));return a(r)}function s(e,t){const{height:o,width:r}=t,a=e/o;return{...t,height:e,width:r*a}}function i(e){let t=0,o=0;const r=e[0];for(const e of r)o+=e.width;for(const o of e)o[0]&&(t+=o[0].height);return o/t}function c(e,t){let o=t[0];const r=[...t,e].sort(((e,t)=>e-t)),a=r.findIndex((t=>t===e)),n=r[a-1],s=r[a+1];if(!n&&s)o=s;else if(!s&&n)o=n;else if(s&&n){o=s/e>e/n?n:s}return o}function l(e,t){return a(e.map((e=>{const o=c(e.width/e.height,t);return e.width>e.height?{...e,width:o*e.height}:{...e,height:e.width/o}})))}function d(e,{minHeight:t},o){return a(o.reduceRight(((o,r)=>{const a=o[o.length-1],n=s(t,r),{width:i}=n,c=a?a.reduce(((e,t)=>e+t.width),0):0;return i+c<=e&&a?a.push(n):o.push([n]),o}),[]).reverse().map((e=>e.reverse())).map((t=>n(e,a(t)))))}function u(e,t,o,r){try{const{maxSingleHeight:u}=o,h=[],p={},f=[9/16,3/4,1,4/3,16/9],v=function(e,t){const{minHeight:o}=t,r=function(e,t,o){const r=[t];let a=e;do{a=r[r.length-1]-t*o,a<e&&(a=e),r.push(a)}while(a!==e);return r}(o,e,.05),a=[];for(let e=0;e<r.length;e++){const t=r[e];t&&a.push({minHeight:t})}return a}(t/e,o),g=l(r,f),_=r[0];if(1===r.length&&_)return function(e,t,o,r){if(l([o],t)[0]){const{width:t,height:a}=o;if(t>=a)return[n(e,[o])];const i=r||16/9*e,c=n(e,[o])[0];return c&&c.height<i?[[c]]:[[s(i,o)]]}return[[o]]}(t,f,_,u);for(const o of v){const r=m(d(t,o,g),e,t),a=i(r);h.push(a),p[a]=r}const k=c(e,a(h));return k&&p[k]||d(t,o,r)}catch{return[r]}}function m(e,t,o){return function(e,t){const o=1.75,r=i(e),a=r/t;if(a>o){const a=r/(o*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*a)))),e}if(a<1/o){const a=r/(1/o*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*a)))),e}return e}(function(e,t){return a(e.map((e=>{if(1===e.length&&e[0]){const o=e[0],r=o.width>o.height;return[{...o,width:t,height:r?o.height>t/2?t/2:o.height:t}]}return e})))}(function(e){const t=e.length,o=a(e[e.length-1]),r=1===o.length;if(t<=2||!r)return e;const i=e[e.length-2];if(!i)return e;const c=i?.reduce(((e,t)=>e+t.width),0);i.push(o[0]);const l=a(i.map((e=>s(1,e))));return e[e.length-2]=n(c,l),a(e.splice(0,e.length-1))}(e),o),t)}function h(e,t){return e.forEach((e=>e.forEach(((o,r)=>{0===r||r===e.length-1?o.width=Math.ceil(o.width-t/2):o.width=Math.ceil(o.width-t)})))),e}},720186:(e,t,o)=>{o.d(t,{LangPersistentKey:()=>a,getKeyCombo:()=>m,isGlobalKeyCombo:()=>u,isModuleKeyCombo:()=>l});var r,a,n=o(260349);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(r||(r={})),function(e){e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.Escape="Escape",e.Enter="Enter",e.Backspace="Backspace",e.Tab="Tab",e.Slash="/",e.PageDown="PageDown",e.PageUp="PageUp",e.Home="Home",e.End="End",e.Space="Space"}(a||(a={}));const s={" ":a.Space};var i;!function(e){e.F="F",e.B="B",e.U="U",e.I="I"}(i||(i={}));const c=[r.Shift,r.Mod,a.ArrowDown,a.ArrowUp,a.Enter,a.Escape,a.Backspace,`${r.Shift}+${a.Enter}`,`${r.Mod}+${a.Enter}`,a.ArrowLeft,a.ArrowRight,a.Tab,a.Space,`${r.Mod}+${i.B}`,`${r.Mod}+${i.U}`,`${r.Mod}+${i.I}`],l=e=>c.includes(e),d=[`${r.Mod}+${i.F}`,`${r.Mod}+${r.Shift}+${i.F}`,`${r.Mod}+${a.Slash}`],u=e=>d.includes(e),m=e=>{try{const t=[];Object.values(r).forEach((o=>{h[o](e)&&t.push(o)}));const o=s[e.key]??e.key;return Object.values(a).forEach((e=>o===e&&t.push(e))),Object.values(i).forEach((r=>{o.toUpperCase()!==r?e.code.slice(3)===r&&t.push(r):t.push(r)})),t.join("+")}catch(e){return""}},h={[r.Mod]:e=>n.isMac?"Meta"===e.key||e.metaKey:e.ctrlKey,[r.Alt]:e=>e.altKey,[r.Shift]:e=>e.shiftKey,[r.Meta]:e=>n.isMac?e.ctrlKey:e.metaKey}},260349:(e,t,o)=>{o.d(t,{browser:()=>c,download:()=>b,emptyImage:()=>_,enRuKeysMap:()=>h,formatPhoneNumber:()=>g,getAttachForwardIndent:()=>u,getExpectedAttachWidth:()=>m,getOffsetRect:()=>s,getOrganiserUid:()=>f,getPeersInlineNames:()=>p,isMac:()=>l,isMouseEventWithModifier:()=>y,isObject:()=>k,isValidJSON:()=>E,isWindows:()=>d,preparePhoneNumber:()=>v});var r=o(667294),a=o(345543),n=o(659397);function s(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};const o=e.getBoundingClientRect(),r=t?.getBoundingClientRect(),a=document.body,n=document.documentElement,s=t?t.scrollTop:window.pageYOffset||n.scrollTop||a.scrollTop,i=(t?t.scrollLeft:window.pageXOffset)||n.scrollLeft||a.scrollLeft,c=n.clientTop||a.clientTop||0,l=n.clientLeft||a.clientLeft||0;return{top:o.top-(r?.top||0)+s-c,left:o.left-(r?.left||0)+i-l,width:o.width,height:o.height}}const i=navigator.userAgent.toLowerCase(),c={version:(i.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],firefox:/firefox\/\d+/i.test(i),safari:!/chrome/i.test(i)&&/webkit|safari|khtml/i.test(i),safari_mobile:/iphone|ipod|ipad/i.test(i),ios:/.+(ipod|ipad|iphone.*os)/i.test(i),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext)),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/.test(i)},l="userAgentData"in window.navigator&&"platform"in window.navigator.userAgentData?0===window.navigator.userAgentData.platform.indexOf("mac"):0===window.navigator.platform.indexOf("Mac"),d=window.navigator.platform.toLowerCase().startsWith("win"),u=e=>e>0?22+10*(e-1):0;function m(e,t,o,r){const a=r+(t?0:8)-u(o);return[a,a*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}const h={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":".",[l?"\\":"`"]:"ё"},p=(e,t,o,a)=>{const n=[];return e.forEach(((r,s)=>{n.push(o(r),(o=>o===e.length-1?"":t===e.length&&o===e.length-2?` ${a.use("me_chat_members_last_divider")} `:", ")(s))})),t>e.length&&(0===e.length?n.push(a.use("me_chat_members_count",{num:t-e.length})):n.push(a.use("me_chat_members_count_lots",{num:t-e.length,values:{names:""}}))),n.length>0?r.createElement(r.Fragment,null,n):null};function f(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,a.exhaustivenessCheck)(e)}}function v(e){if(0===e.length)return"";let t=e;return"9"===t[0]&&(t="+7"+t),"8"===t[0]&&(t="+7"+e.slice(1)),"+"!==t[0]&&(t="+"+t),t}async function g(e){const{parsePhoneNumber:t}=await o.e(4387).then(o.bind(o,304387)),r=t(e.replace(/^(\+|)+/,"+"));return{isValid:r.valid,international:r.number?.international??e,national:r.number?.national??e}}const _="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";function k(e){return"[object Object]"===Object.prototype.toString.call(e)}function b({blob:e,filename:t}){const o=document.createElement("a");o.setAttribute("download",t);const r=URL.createObjectURL(e);o.setAttribute("href",r),o.setAttribute("target","_blank"),o.click(),URL.revokeObjectURL(r)}function E(e){if(!(0,n.isString)(e))return!1;try{return JSON.parse(e),!0}catch{return!1}}window.screen.lockOrientation||window.screen.mozLockOrientation||window.screen.msLockOrientation;window.screen.unlockOrientation||window.screen.mozUnlockOrientation||window.screen.msUnlockOrientation;function y(e){return e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||1===e.button}},236634:(e,t,o)=>{o.d(t,{SEND_OPTIONS:()=>u,TOPICS:()=>c,VISIBILITY:()=>i,empty:()=>a,getPostThemeIdFromKey:()=>l,getPostThemeKeyFromId:()=>d,hasActiveUploads:()=>s,isEmpty:()=>n,validateRequiredFields:()=>m});var r=o(548007);function a(){return{text:"",attaches:{},uploadsTrackIds:new Set,visibility:"all",donutDelay:-1,topic:"no_theme",sendOptions:{selected:[],disabled:[]},ads:{predId:"",erId:"",isAd:!1}}}function n(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!o&&!e.forward&&!s(e)}function s(e){return 0!==e.uploadsTrackIds.size}const i=["all","donut"],c=[["no_theme",0],["art",1],["it",7],["games",12],["music",16],["photo",19],["science",21],["sport",23],["tourism",25],["cinema",26],["humor",32],["style",43]],l=e=>{const t=c.find((t=>t[0]===e));if(!t)throw new Error(`Передан некорректный ключ ${e} для темы поста`);return t[1]},d=e=>{if(void 0===e)return"no_theme";const t=c.find((t=>t[1]===e));if(!t)throw new Error(`Передан некорректный ID ${e} для темы поста`);return t[0]},u=["close_comments","signed","mute_notifications"];function m(e){const t=a();return Object.entries(e).reduce(((e,[o,a])=>{const n=r.resolveId(+o);return e[n]=a,a.uploadsTrackIds instanceof Set||(e[n]={...a,uploadsTrackIds:t.uploadsTrackIds}),void 0===a.ads&&(e[n]={...a,ads:t.ads}),e}),{})}},300749:(e,t,o)=>{function r(){return{text:"",attaches:{},uploadsTrackIds:new Set}}function a(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!o&&!n(e)}function n(e){return 0!==e.uploadsTrackIds.size}o.d(t,{empty:()=>r,hasActiveUploads:()=>n,isEmpty:()=>a})},841:(e,t,o)=>{o.d(t,{DEFAULT_FORWARD_AUTHOR_HIDDEN:()=>s,empty:()=>n,getNormalForward:()=>l,hasActiveUploads:()=>c,isEmpty:()=>i,validateRequiredFields:()=>d});var r=o(207739),a=o(345543);function n(){return{text:"",attaches:{},uploadsTrackIds:new Set}}const s=!1;function i(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!e.forward&&!o&&!c(e)}function c(e){return 0!==e.uploadsTrackIds.size}function l(e,t){if(!e.forward||e.forward.kind!==t)return;const o=[...e.forward.items].filter((e=>"Normal"===e.kind));return(0,a.isNonEmptyArray)(o)?o:void 0}function d(e){const t=n();return Object.entries(e).reduce(((e,[o,a])=>{const n=r.resolveId(+o);return Array.isArray(a)?(e[n]=a,e):("kind"in a||(a.uploadsTrackIds instanceof Set||(a={...a,uploadsTrackIds:t.uploadsTrackIds}),e[n]=[a]),e)}),{})}},952644:(e,t,o)=>{o.d(t,{VIEWER_DEFAULT_PUSH_SETTINGS:()=>r,eduAccount:()=>s,isEdu:()=>a,isService:()=>n,mainAccount:()=>i});const r={userConvo:{isEnabled:!0,withMessageText:!0},chatConvo:{isEnabled:!0,withMessageText:!0},groupConvo:{isEnabled:!0,withMessageText:!0},mention:"every-mention",messageReaction:{isEnabled:!0,withMessageText:!0}};function a(e){return"edu"===e}function n(e){return Boolean(e.accounts.find((e=>e.isService)))}function s(e){return e.accounts.find((e=>a(e.profileType)))}function i(e){return e.accounts.find((e=>!a(e.profileType)))}},213359:(e,t,o)=>{o.d(t,{prepareLink:()=>a});var r=o(33200);function a(e,t){return function(e){return e.startsWith("mailto:")}(t)||function(e){return e.startsWith("tel:")}(t)?t:(t.startsWith("/")||t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t),function(e,t){if(t.startsWith("/"))return!t.startsWith("//");try{const{hostname:o}=new URL(t);return[...r.VK_RELATED_DOMAINS,e,...r.SFERUM_RELATED_DOMAINS].some((e=>o===e||o.endsWith("."+e)))}catch(e){return!1}}(e,t)?t:function(e,t){return`https://${e}/away.php?to=${encodeURIComponent(t)}&utf=1`}(e,t))}},963196:(e,t,o)=>{var r;o.d(t,{IApi:()=>r}),function(e){e.resolveTrackId=function(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в IApi.resolveTrackId");return`${e}-${t}`};class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}e.AuthError=t;class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}e.TimeoutError=o;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}e.AbortError=r;class a extends Error{constructor(e,t,o){super(t),this.code=e,this.apiError=o,Object.setPrototypeOf(this,a.prototype)}}e.RequestError=a;class n extends Error{constructor(e,t){super(e[0].message),this.list=e,this.response=t,Object.setPrototypeOf(this,n.prototype)}}e.ExecuteErrors=n,e.isCaptchaData=function(e){const{captcha_sid:t,captcha_img:o,captcha_type:r,is_refresh_enabled:a}=e;return!("string"!=typeof t||"string"!=typeof o||void 0!==r&&"string"!=typeof r||void 0!==a&&"boolean"!=typeof a)}}(r||(r={}))},147109:(e,t,o)=>{o.d(t,{IRouter:()=>r});var r,a=o(345543);!function(e){let t,o,r,n;function s(e){switch(e.kind){case"MainRoute":case"ConvoRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"NotFoundRoute":case"SettingsRoute":return r.Screen;case"AttachProxyRoute":case"AttachMediaProxyRoute":case"HashtagProxyRoute":case"ChatJoinProxyRoute":case"HashtagMentionProxyRoute":case"ScreenNameProxyRoute":case"VkProxyRoute":case"StickerPackProxyRoute":case"StickersStoreProxyRoute":case"SferumChannelProxyRoute":case"CallJoinProxyRoute":case"ChannelJoinProxyRoute":return r.Proxy;case"ModalMessageRuntimeRoute":case"EmptyRuntimeRoute":case"AudioRestrictionRuntimeRoute":case"RedirectRuntimeRoute":return r.Runtime;case"PhotoModal":case"VideoModal":case"MiniAppModal":case"PollModal":case"ImportantMessagesModal":case"MiniAppCatalogModal":return o.Modal;case"PeerPanel":case"ChannelPanel":return o.RightPanel;default:(0,a.exhaustivenessCheck)(e)}}!function(e){e.Push="PUSH",e.Replace="REPLACE",e.Pop="POP"}(t=e.Action||(e.Action={})),function(e){e.Modal="MODAL",e.RightPanel="RIGHT_PANEL"}(o=e.StackableType||(e.StackableType={})),function(e){e.Screen="SCREEN",e.Proxy="PROXY",e.Runtime="RUNTIME"}(r=e.PlainRouteType||(e.PlainRouteType={})),e.stackableLevels=[o.Modal,o.RightPanel],e.SettingsRouteSectionKeys=["main","account","folders","notifications","theme","experimental","about","edu"],e.PeerPanelTabKeys=["members","invitations","photos","audios","videos","docs","links"],e.ChannelPanelSectionKeys=["settings"],function(e){e[e.Message=0]="Message",e[e.Post=1]="Post",e[e.Composer=2]="Composer",e[e.Comment=3]="Comment",e[e.ChannelComposer=4]="ChannelComposer",e[e.CommentsComposer=5]="CommentsComposer"}(n=e.RouteSourceKind||(e.RouteSourceKind={})),e.globalParamsKeys=["tab","folder","createPoll","sferum","modal","rp"],e.convoRouteExtraParamsKeys=["settings"],e.withExtraConvoParams=e=>"MainRoute"===e.kind||"ConvoRoute"===e.kind||"ChannelRoute"===e.kind||"ChannelsListRoute"===e.kind,e.isStackable=t=>e.isModal(t)||e.isRightPanel(t),e.isModal=e=>s(e)===o.Modal,e.isRightPanel=e=>s(e)===o.RightPanel,e.isProxyRoute=e=>s(e)===r.Proxy,e.isRuntimeRoute=e=>!!e&&s(e)===r.Runtime}(r||(r={}))},184429:(e,t,o)=>{var r;o.d(t,{IUploader:()=>r}),function(e){class t extends Error{constructor(e="Aborted"){super(e),Object.setPrototypeOf(this,t.prototype)}}e.AbortError=t;class o extends Error{constructor(e="Timeout"){super(e),Object.setPrototypeOf(this,o.prototype)}}e.TimeoutError=o}(r||(r={}))},932111:(e,t,o)=>{o.d(t,{Modals:()=>n,Stack:()=>a,createGroupId:()=>c,createModalId:()=>i,resolveModalId:()=>s});var r=o(53416);class a{push(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}goBack(e=1){this.index-=e}subscribe(e){return this.listeners.push(e)}get lastElement(){return this.history[this.history.length-1]||null}get currentElement(){return this.history[this.index]||null}findIndex(e){const t=this.history.findIndex((t=>t.modalId===e));return-1!==t?t:null}get size(){return this.history.length}onItemsRemove(e){this.index=this.history.length-1,this.listeners.call({action:"remove",payload:e}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}constructor(){this.index=0,this.pop=(e=1)=>{const t=this.history.splice(-e,e);this.onItemsRemove(t)},this.forcedRemove=e=>{const t=this.history.reduce(((t,o)=>(e(o)?t.toRemove.push(o):t.actualHistory.push(o),t)),{actualHistory:[],toRemove:[]});this.history=t.actualHistory,this.onItemsRemove(t.toRemove)},this.history=[],this.listeners=function(){let e=[];return{get length(){return e.length},push:t=>(e.push(t),function(){e=e.filter((e=>e!==t))}),call(t){e.forEach((e=>e&&e(t)))}}}()}}class n{removeGroup(e){this.system.groups.delete(e)}removeModal(e){const{groupId:t}=this.getModalParams(e),o=this.system.groups.get(t);if(void 0!==o){const{group:t}=o,r=t.findIndex((t=>t.id===e));t.splice(r,1)}this.system.modals.delete(e)}constructor(){this.createGroup=()=>{const e=(0,r.nanoid)(),t={id:e,group:[]};return this.system.groups.set(e,t),{data:t,remove:this.removeGroup.bind(this,e)}},this.createModal=(e,t=!1,o)=>{const a=this.system.groups.get(e);if(!a)throw Error("Нет такого стека");const n=o||(0,r.nanoid)();return a.group.push({id:n}),this.system.modals.set(n,{groupId:a.id,isSubModal:t}),{id:n,remove:this.removeModal.bind(this,n)}},this.getModalGroup=e=>{const t=this.system.groups.get(e);if(!t)throw Error("Передан Id несуществующей группы модалок");return t},this.getModalParams=e=>{const t=this.system.modals.get(e);if(!t)throw Error("Попытка получить несуществующую модалку");return t},this.system={modals:new Map,groups:new Map}}}function s(e){return e}function i(){return(0,r.nanoid)()}function c(){return(0,r.nanoid)()}},584750:(e,t,o)=>{o.d(t,{IMAGE_TYPES:()=>u,Uploader:()=>y,VIDEO_TYPES:()=>m,areAudios:()=>M,areImages:()=>A,arePreviewable:()=>N,areVideos:()=>x,haveDirectory:()=>T,isChannelUpload:()=>V,isConvoUpload:()=>K,isImage:()=>I,preloadImage:()=>O});var r=o(361084),a=o(963196),n=o(184429),s=o(345543),i=o(207739),c=o(548007),l=o(453934),d=o(53416);const u=["image/png","image/gif","image/jpeg","image/webp"],m=["video/x-msvideo","video/mp4","video/mpeg","video/3gpp","video/quicktime","video/x-flv","video/x-ms-wmv","video/avi","video/webm","video/x-matroska"],h=["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"],p=e=>"image"===e.kind,f=e=>"video"===e.kind,v=e=>"audio"===e.kind,g=e=>"doc"===e.kind;class _{getUploadServer(e,t){let o=this.cache.get(e);if(!o)return o=t().then((t=>(this.cache.set(e,{url:t,timestamp:Date.now()}),t))),this.cache.set(e,o),o;if(o instanceof Promise)return o;return this.validateCache(o.timestamp)?Promise.resolve(o.url):(this.cache.delete(e),this.getUploadServer(e,t))}dropCache(){0!==this.cache.size&&Array.from(this.cache.entries()).forEach((([e,t])=>{if(t instanceof Promise)return;this.validateCache(t.timestamp)||this.cache.delete(e)}))}validateCache(e){return Date.now()-e<=5e3}constructor(){this.cache=new Map,setInterval((()=>{this.dropCache.call(this)}),6e4)}}class k{handleUploadV2Erros(e){if("error_code"in e)throw new Error(`${e.error_code}: ${e.error_msg}`);if("files"in e&&e.files.file1&&"error_code"in e.files.file1)throw new Error(`${e.files.file1.error_code}: ${e.files.file1.error_msg}`)}async uploadImage({file:e,trackId:t},o){const n={peer_id:o.viewerId,group_id:o.groupId&&i.toRealId(o.groupId),upload_v2:this.uploadV2},s=a.IApi.resolveTrackId("photos.getMessagesUploadServer",t),c=()=>this.api.fetch("photos.getMessagesUploadServer",n,{trackId:s}).then((({upload_url:e})=>e)),l=()=>this.photosUploadUrlCache.getUploadServer(JSON.stringify(n),c),d=()=>this.api.dangerouslyAbort(s),u=new FormData,m=a.IApi.resolveTrackId("photos.saveMessagesPhoto",t),h=async e=>{const t=await this.api.fetch("photos.saveMessagesPhoto",e,{trackId:m});if(0===t.length||void 0===t[0])throw new Error("Метод photos.saveMessagesPhoto не вернул фотографию");const o=(0,r.fromApiPhoto)({apiPhoto:t[0]});if(void 0===o)throw new Error("Не удалось конвертировать фотографию с сервера");return o},p=()=>this.api.dangerouslyAbort(m);return 0===this.uploadV2?(u.append("file1",e),this.uploadRequest({getUrl:l,abortGetUrl:d,body:u,uploadTrackId:t,postprocess:({data:e})=>h(e),abortPostprocess:p})):(u.append("file1",e),this.uploadRequest({getUrl:l,abortGetUrl:d,body:u,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),h({upload_v2:1,photo:JSON.stringify(e)})),abortPostprocess:p}))}async uploadVideo({file:e,trackId:t},o){const n={target:o,preview:1,no_comments:1},s=a.IApi.resolveTrackId("video.save",t),i=new FormData;i.append("video_file",e);const c=a.IApi.resolveTrackId("video.get",t);return this.uploadRequest({getUrl:()=>this.api.fetch("video.save",n,{trackId:s}).then((({upload_url:e})=>{if(!e)throw new Error("В методе video.save не вернулся upload_url");return e})),abortGetUrl:()=>this.api.dangerouslyAbort(s),body:i,uploadTrackId:t,postprocess:async({data:{video_id:e,owner_id:t}})=>{const o={kind:"Video",id:e,ownerId:t,image:[{url:r.emptyPreview,width:1,height:1}],views:0,isFromMessage:!0},a=(await this.api.fetch("video.get",{owner_id:t,videos:`${t}_${e}`,extended:0},{trackId:c})).items[0];if(!a)return o;return(0,r.fromApiVideo)({apiVideo:a,useFirstFrame:!0})||o},abortPostprocess:()=>this.api.dangerouslyAbort(c)})}async uploadAudio({file:e,trackId:t}){const o={},n=a.IApi.resolveTrackId("audio.getUploadServer",t),s=new FormData;s.append("file",e);const i=a.IApi.resolveTrackId("audio.save",t);return this.uploadRequest({getUrl:()=>this.api.fetch("audio.getUploadServer",o).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(n),body:s,uploadTrackId:t,postprocess:async({data:{server:e,audio:t,hash:o}})=>{const a=await this.api.fetch("audio.save",{server:e,audio:t,hash:o},{trackId:i});return(0,r.fromApiAudio)(a)},abortPostprocess:()=>this.api.dangerouslyAbort(i)})}async uploadDoc({file:e,trackId:t}){const o=a.IApi.resolveTrackId("docs.getUploadServer",t),n=()=>this.api.fetch("docs.getUploadServer",{},{trackId:o}).then((({upload_url:e})=>e)),s=new FormData;s.append("file",e);const i=a.IApi.resolveTrackId("docs.save",t);return this.uploadRequest({getUrl:()=>this.docsUploadUrlCache.getUploadServer("docsUploadServer",n),abortGetUrl:()=>this.api.dangerouslyAbort(o),body:s,uploadTrackId:t,postprocess:async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e},{trackId:i});if(!t.doc)throw new Error("Метод doc.save не вернул документ");const o=(0,r.fromApiDoc)(t.doc);if(!o)throw new Error("Не удалось конвертировать документ (нет поля url)");return o},abortPostprocess:()=>this.api.dangerouslyAbort(i)})}async uploadWallDoc({file:e,trackId:t},o){const n={group_id:0},s=a.IApi.resolveTrackId("docs.getWallUploadServer",t),i=()=>this.api.fetch("docs.getWallUploadServer",n).then((({upload_url:e})=>e)),c=new FormData;c.append("file",e);const l=a.IApi.resolveTrackId("docs.save",t);return this.uploadRequest({getUrl:()=>this.wallDocsUploadUrlCache.getUploadServer(JSON.stringify(n),i),abortGetUrl:()=>this.api.dangerouslyAbort(s),body:c,uploadTrackId:t,postprocess:async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e,group_id:0},{trackId:l});if(!t.doc)throw new Error("Метод doc.save не вернул документ");const o=(0,r.fromApiDoc)(t.doc);if(!o)throw new Error("Не удалось конвертировать документ (нет поля url)");return o},abortPostprocess:()=>this.api.dangerouslyAbort(l)})}async uploadVoice({file:e,trackId:t},o){const n={type:"audio_message",peer_id:o.targetPeerId};let s,i;if(this.uploadV2Voice){const e=a.IApi.resolveTrackId("messages.getAudioMessageUploadServer",t);s=()=>this.api.fetch("messages.getAudioMessageUploadServer",{group_id:0},{trackId:e}).then((({upload_url:e})=>e)),i=()=>this.api.dangerouslyAbort(e)}else{const e=a.IApi.resolveTrackId("docs.getMessagesUploadServer",t);s=()=>this.api.fetch("docs.getMessagesUploadServer",n,{trackId:e}).then((({upload_url:e})=>e)),i=()=>this.api.dangerouslyAbort(e)}const c=new FormData;if(c.append("file",e),!this.uploadV2Voice){const e=a.IApi.resolveTrackId("docs.save",t),o=async({data:{file:e}})=>{const t=await this.api.fetch("docs.save",{file:e});if(!t.audio_message)throw new Error("Метод doc.save не вернул аудиосообщение");return(0,r.fromApiVoice)(t.audio_message)},n=()=>this.api.dangerouslyAbort(e);return this.uploadRequest({getUrl:s,abortGetUrl:i,body:c,uploadTrackId:t,postprocess:o,abortPostprocess:n})}const l=a.IApi.resolveTrackId("messages.saveAudioMessage",t),d=async e=>{const t=await this.api.fetch("messages.saveAudioMessage",{file:JSON.stringify(e)},{trackId:l});return(0,r.fromApiVoice)(t)};return this.uploadRequest({getUrl:s,abortGetUrl:i,body:c,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),d(e)),abortPostprocess:()=>this.api.dangerouslyAbort(l)})}async uploadChatPhoto({file:e,trackId:t},o){if(!o.targetPeerId||!i.isChatPeerId(o.targetPeerId))throw new Error("Для обновления аватара чата targetPeerId обязательно должен быть ChatId");const r=await function(e){return new Promise((t=>{const o=new Image,r=URL.createObjectURL(e);o.onload=()=>{const e=Math.min(o.width,o.height),r=Math.floor((o.width-e)/2),a=Math.floor((o.height-e)/2);t({x:r,y:a,width:e})},o.src=r}))}(e),n={chat_id:i.toRealId(o.targetPeerId),crop_x:r.x,crop_y:r.y,crop_width:r.width},s=a.IApi.resolveTrackId("photos.getChatUploadServer",t),c=new FormData;c.append("photo",e);const l=a.IApi.resolveTrackId("messages.setChatPhoto",t);return this.uploadRequest({getUrl:()=>this.api.fetch("photos.getChatUploadServer",n,{trackId:s}).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(s),body:c,uploadTrackId:t,postprocess:async({data:{response:e}})=>{await this.api.fetch("messages.setChatPhoto",{file:e,user_id:i.toRealId(o.viewerId)})},abortPostprocess:()=>this.api.dangerouslyAbort(l)})}async uploadOwnerPhoto({file:e,trackId:t},o){const r={owner_id:o.viewerId,upload_v2:this.uploadV2},n=a.IApi.resolveTrackId("photos.getOwnerPhotoUploadServer",t),s=()=>this.api.fetch("photos.getOwnerPhotoUploadServer",r,{trackId:n}).then((({upload_url:e})=>e)),i=()=>this.api.dangerouslyAbort(n),c=new FormData,l=a.IApi.resolveTrackId("photos.saveOwnerPhoto",t),d=async e=>{await this.api.fetch("photos.saveOwnerPhoto",e,{trackId:l})},u=()=>this.api.dangerouslyAbort(l);return 0===this.uploadV2?(c.append("photo",e),this.uploadRequest({getUrl:s,abortGetUrl:i,body:c,uploadTrackId:t,postprocess:({data:{server:e,photo:t,hash:r}})=>d({owner_id:o.viewerId,server:e,hash:r,photo:t}),abortPostprocess:u})):(c.append("file1",e),this.uploadRequest({getUrl:s,abortGetUrl:i,body:c,uploadTrackId:t,postprocess:({data:e})=>(this.handleUploadV2Erros(e),d({upload_v2:1,photo:JSON.stringify(e)})),abortPostprocess:u}))}async uploadChannelPhoto({file:e,trackId:t},o){const r={owner_id:o.targetPeerId},n=a.IApi.resolveTrackId("photos.getOwnerPhotoUploadServer",t),s=new FormData;s.append("photo",e);const i=a.IApi.resolveTrackId("photos.saveOwnerPhoto",t);return this.uploadRequest({getUrl:()=>this.api.fetch("photos.getOwnerPhotoUploadServer",r,{trackId:n}).then((({upload_url:e})=>e)),abortGetUrl:()=>this.api.dangerouslyAbort(n),body:s,uploadTrackId:t,postprocess:async({data:{hash:e,photo:t,server:r}})=>{await this.api.fetch("photos.saveOwnerPhoto",{owner_id:c.toRealGroupId(o.targetPeerId),server:r,hash:e,photo:t},{trackId:i})},abortPostprocess:()=>this.api.dangerouslyAbort(i)})}async uploadWallImage({file:e,trackId:t},o){const n={group_id:c.toRealGroupId(o.targetPeerId),upload_v2:0},s=a.IApi.resolveTrackId("photos.getWallUploadServer",t),i=()=>this.api.fetch("photos.getWallUploadServer",n,{trackId:s}).then((({upload_url:e})=>e)),l=new FormData;l.append("photo",e);const d=a.IApi.resolveTrackId("photos.saveWallPhoto",t);return this.uploadRequest({getUrl:()=>this.wallPhotosUploadUrlCache.getUploadServer(JSON.stringify(n),i),abortGetUrl:()=>this.api.dangerouslyAbort(s),body:l,uploadTrackId:t,postprocess:async({data:{server:e,hash:t,photo:a}})=>{const n=await this.api.fetch("photos.saveWallPhoto",{group_id:c.toRealGroupId(o.targetPeerId),server:e,hash:t,photo:a},{trackId:d});if(0===n.length||void 0===n[0])throw new Error("Метод photos.saveWallPhoto не вернул фотографию");const s=(0,r.fromApiPhoto)({apiPhoto:n[0]});if(void 0===s)throw new Error("Не удалось конвертировать фотографию с сервера");return s},abortPostprocess:()=>this.api.dangerouslyAbort(d)})}async convoUpload(e,t){return p(e)?this.uploadImage(e,t):f(e)?this.uploadVideo(e,"messages"):v(e)?this.uploadAudio(e):g(e)?this.uploadDoc(e):"voice"===e.kind?this.uploadVoice(e,t):(e=>"chat-photo"===e.kind)(e)?this.uploadChatPhoto(e,t):(e=>"owner-photo"===e.kind)(e)?this.uploadOwnerPhoto(e,t):Promise.reject()}async channelsUpload(e,t){return p(e)?this.uploadWallImage(e,t):f(e)?this.uploadVideo(e,"wall"):v(e)?this.uploadAudio(e):g(e)?this.uploadWallDoc(e,t):"channel-photo"===e.kind?this.uploadChannelPhoto(e,t):Promise.reject()}async upload(e,t){return D(t)?this.channelsUpload(e,t):function(e){return!D(e)}(t)?this.convoUpload(e,t):Promise.reject()}uploadRequest({getUrl:e,abortGetUrl:t,body:o,uploadTrackId:r,postprocess:a,abortPostprocess:s}){const i=new AbortController;return{abort:()=>{t(),i.abort(),s()},trackId:r,response:(async()=>function(e,t,o={}){return new Promise(((r,a)=>{const{method:s="POST",signal:i,onUploadProgress:c,headers:l={},timeout:d}=o;if(i?.aborted)return a(new n.IUploader.AbortError);const u=new XMLHttpRequest,m=()=>u.abort();i&&(i.addEventListener("abort",m),u.addEventListener("readystatechange",(()=>{const{readyState:e}=u;e===U&&i.removeEventListener("abort",m)}))),u.addEventListener("abort",(()=>{a(new n.IUploader.AbortError)})),u.addEventListener("error",a),u.addEventListener("timeout",(()=>{a(new n.IUploader.TimeoutError)})),u.upload.addEventListener("progress",(e=>{e.lengthComputable&&c?.(e)})),u.addEventListener("loadend",(()=>{const{readyState:e,status:t,responseText:o}=u;let n;try{n=JSON.parse(o)}catch(e){return a(e)}return e===U&&t===B?r({data:n}):a(n)})),u.open(s,e,!0),Object.entries(l).forEach((([e,t])=>{u.setRequestHeader(e,t)})),d&&(u.timeout=d),u.send(t)}))}(await e(),o,{signal:i.signal,timeout:this.requestTimeout,headers:{Accept:"application/json, text/plain, */*"},onUploadProgress:({loaded:e,total:t})=>{this.emitter.emit(r,{loaded:e,total:t})}}).then(a).finally((()=>{this.emitter.removeListener(r)})))()}}trackProgress(e,t){this.emitter.addListener(e,t)}constructor(e,t){this.emitter=new w,this.requestTimeout=0,this.photosUploadUrlCache=new _,this.wallPhotosUploadUrlCache=new _,this.docsUploadUrlCache=new _,this.wallDocsUploadUrlCache=new _,this.api=e,this.featureFlags=t,this.uploadV2=this.featureFlags.vkm_upload_v2?1:0,this.uploadV2Voice=this.featureFlags.vkm_upload_v2_voice}}class b{constructor(e){this.uploads=new Map,this.start=(e,t,o)=>{this.uploads.set(e,{trackIds:t,onUploadFinish:o,finishedUploads:new Map})},this.removeUpload=(e,t)=>{const o=this.uploads.get(e);o&&(o.trackIds=o.trackIds.filter((e=>e!==t)),this.tryFinish(e))},this.push=(e,{trackId:t,attach:o})=>{const r=this.uploads.get(e);r&&(r.finishedUploads.set(t,o),this.tryFinish(e))},this.tryFinish=e=>{const t=this.uploads.get(e);if(!t)return;const{trackIds:o,finishedUploads:r}=t;if(o.length===r.size){const a=new Map(o.reduce(((e,t)=>{const o=r.get(t);return o&&e.push([t,o]),e}),[]));this.state.remove(o),this.uploads.delete(e),t.onUploadFinish?.(a)}},this.state=e}}class E{subscribe(e,t){return this.emitter.addListener(e,t),()=>{this.emitter.removeListener(e)}}get(e){return this.attaches.get(e)}filterMissing(e){return e.filter((e=>!this.attaches.has(e)))}update(e,t){const o=this.attaches.get(e),r="function"==typeof t?t(o):t;r&&(this.attaches.set(e,r),this.emitter.emit(e,r))}remove(e){new Set(e).forEach((e=>{this.attaches.delete(e),this.emitter.removeListener(e)}))}constructor(){this.attaches=new Map,this.emitter=new w}}class y extends k{uploadFiles(e,t,o,r={}){const a=e.map((e=>this.toUploaderFileInfo(e,t).catch((()=>(r.onConvertationError?.(e),null)))));Promise.all(a).then((e=>{const t=e.filter(C).reduce(((e,t)=>(e[t.kind]=[...e[t.kind]||[],t],e)),{});Object.values(t).forEach((e=>{const t=e.map((({trackId:e})=>e));let a;e.length>1&&(a=(0,d.nanoid)(5),this.queue.start(a,t,r.onUploadFinish)),e.forEach((e=>{this.doUpload(e,o,r,a)}))}))})).catch((e=>{console.error("[UPLOADER] Ошибка",e)}))}abortUpload(e){const t=this.uploads.get(e);t&&(t.queueId&&this.queue.removeUpload(t.queueId,t.process.trackId),t.process.abort(),t.handlers.onUploadAbort?.(e),this.uploads.delete(e));const o=this.failedUploads.get(e);o&&(o.handlers.onUploadAbort?.(e),this.failedUploads.delete(e)),this.state.remove([e])}retryUpload(e){const t=this.failedUploads.get(e);if(t){this.failedUploads.delete(e);const{fileInfo:o,messengerData:r,handlers:a}=t;this.doUpload(o,r,a),this.state.update(o.trackId,(e=>{if(e)return{...e,error:!1}}))}}getOrphans(e){return this.state.filterMissing(e)}subscribe(e,t){if(0===e.length)return()=>{};t(this.getState(e));const o=e.map((o=>this.state.subscribe(o,(()=>{t(this.getState(e))}))));return t=>{o.forEach((e=>e())),t(e)}}getState(e){if(0===e.length)return{};const t=e.reduce(((e,t)=>{const o=this.state.get(t);return o&&e.push(o),e}),[]);return this.buildOptimisticAttachments(t)}doUpload(e,t,o,r){const{trackId:s}=e;o.onUploadStart?.(s),this.upload(e,t).then((async e=>{this.uploads.set(s,{process:e,handlers:o,queueId:r}),this.trackProgress(s,(({loaded:e,total:t})=>this.updateAttachProgress(s,{loaded:e,total:t,error:!1},o)));try{const t=await Promise.resolve(e.response),a=this.modifyUploadedAttach(s,t);if(r)this.queue.push(r,{trackId:s,attach:a});else{const e=new Map([[s,a]]);o.onUploadFinish?.(e),this.state.remove([s]),this.uploads.delete(s)}}catch(e){return e instanceof n.IUploader.AbortError||e instanceof a.IApi.AbortError||"string"==typeof e&&e.toLowerCase().includes("abort")?Promise.resolve():await Promise.reject(e)}})).catch((a=>{console.error("[UPLOADER] Ошибка загрузки",a),o.onError?.(s),r&&this.queue.removeUpload(r,s),this.uploads.delete(s),this.failedUploads.set(s,{fileInfo:e,messengerData:t,handlers:o}),this.updateAttachProgress.call(this,s,{loaded:0,total:0,error:!0},o)}))}async toUploaderFileInfo(e,{asFiles:t,asVoice:o,asChatPhoto:a,asOwnerPhoto:n,asChannelPhoto:s}){if(!(e instanceof File)){if(!o)throw new Error("Загрузить аудиосообщения можно только с флагом asVoice");const{blob:t,duration:r,waveform:a}=e,n=new File([t],"voice_recording",{type:"audio/ogg"}),s=y.toFileInfo(n,"voice"),i=await function(e,t,o,r){return Promise.resolve({kind:"OptimisticVoice",id:e.trackId,blob:t,duration:o,waveform:r,loaded:0,total:e.file.size})}(s,t,r,a);return this.state.update(s.trackId,i),s}const i=e;if(a)return y.toFileInfo(i,"chat-photo");if(n)return y.toFileInfo(i,"owner-photo");if(s)return y.toFileInfo(i,"channel-photo");if(!t&&I(i)&&(!I(c=i)||"image/gif"!==c.type)){const e=y.toFileInfo(i,"image"),t=await async function(e){const t=await O(e.file);return{kind:"OptimisticPhoto",id:e.trackId,image:t,loaded:0,total:e.file.size}}(e);return this.state.update(e.trackId,t),e}var c,l;if(!t&&(S(i)||function(e){const t=L(e.name),o=["mkv"];return""===e.type&&o.includes(t)}(i))){const e=y.toFileInfo(i,"video"),t=await async function(e){let t=null,o=r.emptyPreview;try{t=await function(e){const t=URL.createObjectURL(e);return j(t)}(e.file),o=await async function(e){function t(e,t){return new Promise(((o,r)=>{e.onseeked=()=>{e.videoWidth&&e.videoHeight||o(void 0);const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const r=t.getContext("2d");r?(r.drawImage(e,0,0),o(t.toDataURL("image/jpeg"))):o(void 0)},e.onerror=r,e.currentTime=t}))}try{return t(e,.5*e.duration)}catch(o){if("string"==typeof o||!(o instanceof Event))return Promise.reject(o);const r=o.composedPath()?.[0];if(!(r instanceof HTMLVideoElement)||4!==r?.error?.code)return Promise.reject(o);return t(await j(e.src),Math.min(e.duration,1))}}(t)||r.emptyPreview}catch{}return{kind:"OptimisticVideo",id:e.trackId,duration:Math.floor(t?.duration||0),loaded:0,total:e.file.size,image:{url:o,width:t?.videoWidth||1,height:t?.videoHeight||1}}}(e);return this.state.update(e.trackId,t),e}if(!t&&P(i)){const e=y.toFileInfo(i,"audio"),t=await(l=e,new Promise((e=>{const t=new Audio,o=URL.createObjectURL(l.file);t.addEventListener("loadedmetadata",(()=>{e({kind:"OptimisticAudio",id:l.trackId,duration:t.duration,artist:"",title:l.file.name,loaded:0,total:l.file.size})})),t.src=o})));return this.state.update(e.trackId,t),e}const d=y.toFileInfo(i,"doc"),u=await async function(e){const t={kind:"OptimisticDoc",id:e.trackId,title:e.file.name,size:e.file.size,ext:L(e.file.name),loaded:0,total:e.file.size};if(I(e.file)){const o=await O(e.file);return{...t,image:o}}return t}(d);return this.state.update(d.trackId,u),d}modifyUploadedAttach(e,t){if(!t)return null;const o=this.state.get(e);let a=t;if("Video"===t.kind&&"OptimisticVideo"===o?.kind){const e=!!o.duration,n=o.image.url!==r.emptyPreview,s=t.image.length>1||t.image[0].url!==r.emptyPreview;e&&n&&!s&&(a={...t,duration:o.duration,image:[o.image]})}return a}updateAttachProgress(e,t,{onUploadProgressUpdate:o}){this.state.update(e,(e=>{if(e){switch(e.kind){case"OptimisticPhoto":o?.("photo");break;case"OptimisticVideo":o?.("video");break;case"OptimisticDoc":o?.("file")}return{...e,...t}}}))}buildOptimisticAttachments(e){return e.reduce(((e,t)=>{const o=[],r=[],a=[],n=[];switch(t.kind){case"OptimisticPhoto":o.push(t);break;case"OptimisticVideo":r.push(t);break;case"OptimisticAudio":a.push(t);break;case"OptimisticDoc":n.push(t);break;case"OptimisticVoice":e.voice=t}return o.length&&(e.photos=[...e.photos||[],...o]),r.length&&(e.videos=[...e.videos||[],...r]),a.length&&(e.audios=[...e.audios||[],...a]),n.length&&(e.docs=[...e.docs||[],...n]),e}),{})}static clearOptimisticAttachments(e,t){t.forEach((t=>{if("photos"in e){if(!e.photos)return;const o=(0,s.toNonEmpty)(e.photos.filter((({id:e})=>e!==t)));o?e.photos=o:delete e.photos}if("videos"in e){if(!e.videos)return;const o=(0,s.toNonEmpty)(e.videos.filter((({id:e})=>e!==t)));o?e.videos=o:delete e.videos}if("audios"in e){if(!e.audios)return;const o=(0,s.toNonEmpty)(e.audios.filter((({id:e})=>e!==t)));o?e.audios=o:delete e.audios}if("docs"in e){if(!e.docs)return;const o=(0,s.toNonEmpty)(e.docs.filter((({id:e})=>e!==t)));o?e.docs=o:delete e.docs}"voice"in e&&delete e.voice}))}static buildAttachments(e){return e.filter(C).reduce(((e,t)=>(0,l.produce)(e,(o=>{let r=null,a=null,n=null,i=null;switch(t.kind){case"Photo":r=(0,s.toNonEmpty)([t]);break;case"Video":a=(0,s.toNonEmpty)([t]);break;case"Audio":n=(0,s.toNonEmpty)([t]);break;case"Doc":i=(0,s.toNonEmpty)([t]);break;case"Voice":o.voice=t}r?.length&&(o.photos=[...e.photos||[],...r]),a?.length&&(o.videos=[...e.videos||[],...a]),n?.length&&(o.audios=[...e.audios||[],...n]),i?.length&&(o.docs=[...e.docs||[],...i])}))),{})}static hash(){return Math.floor(1e8*Math.random()+1e8).toString(16)}static resolveTrackId(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в Uploader.resolveTrackId");return`${e}-${t}`}static toFileInfo(e,t){switch(t){case"image":return{kind:"image",trackId:y.resolveTrackId("image",y.hash()),file:e};case"video":return{kind:"video",trackId:y.resolveTrackId("video",y.hash()),file:e};case"audio":return{kind:"audio",trackId:y.resolveTrackId("audio",y.hash()),file:e};case"doc":return{kind:"doc",trackId:y.resolveTrackId("doc",y.hash()),file:e};case"voice":return{kind:"voice",trackId:y.resolveTrackId("voice",y.hash()),file:e};case"chat-photo":return{kind:"chat-photo",trackId:y.resolveTrackId("chat-photo",y.hash()),file:e};case"owner-photo":return{kind:"owner-photo",trackId:y.resolveTrackId("owner-photo",y.hash()),file:e};case"channel-photo":return{kind:"channel-photo",trackId:y.resolveTrackId("channel-photo",y.hash()),file:e};default:(0,s.exhaustivenessCheck)(t)}}constructor(...e){super(...e),this.uploads=new Map,this.failedUploads=new Map,this.state=new E,this.queue=new b(this.state)}}class w{addListener(e,t){this.map.set(e,[...this.map.get(e)||[],t])}removeListener(e){this.map.delete(e)}emit(e,t){this.map.get(e)?.forEach((e=>e(t)))}constructor(){this.map=new Map}}function C(e){return null!==e}function I(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&Boolean(e.type&&u.includes(e.type))}function A(e){return e.every(I)}function S(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&(e instanceof File&&!e.type?/\.wmv$|\.avi$/.test(e.name):Boolean(e.type&&m.includes(e.type)))}function x(e){return e.every(S)}function P(e){return!(e instanceof DataTransferItem&&"file"!==e.kind)&&Boolean(e.type&&h.includes(e.type))}function M(e){return e.every(P)}function N(e){return e.some(I)||e.some(S)}function R(e){return e instanceof DataTransferItem&&""===e.kind||Boolean(""===e.type)}function T(e){return e.some(R)}function O(e){const t=URL.createObjectURL(e);return new Promise(((e,o)=>{const r=new Image;r.onload=()=>{e({url:t,width:r.width,height:r.height})},r.onerror=o,r.src=t}))}function j(e){return new Promise(((t,o)=>{const r=document.createElement("video");r.volume=0,r.preload="metadata",r.onloadedmetadata=()=>t(r),r.onerror=o,r.src=e}))}function L(e){const t=/\.([0-9a-z]+)$/i.exec(e);return t?.[1]||""}function D(e){return!!e.targetPeerId&&c.isChannelId(e.targetPeerId)&&!!e.isChannel}function V(e,t){return!!e&&c.isChannelId(e)&&!!t}function K(e,t){return!!e&&!c.isChannelId(e)||!t}const U=4,B=200},672342:(e,t,o)=>{o.d(t,{LangPackProvider:()=>d});var r=o(785893),a=o(504190),n=o(667294),s=o(318993),i=o(649479),c=o(666453);const l=new Map;function d({children:e,suspense:t,...o}){const d=(0,n.useMemo)((()=>JSON.stringify(o)),[o]),u=(0,a.useUnit)(i.loadPackFx),m=(0,n.useMemo)((()=>{let e=l.get(d);return e||(e=(0,c.wrapSuspense)(u({id:d,...o})),l.set(d,e)),e}),[d,o]);return t&&m.read(),(0,r.jsx)(s.LangPackIdProvider,{value:d,children:e})}},666453:(e,t,o)=>{var r;function a(e){let t,o=r.PENDING;const a=e.then((e=>{t=e,o=r.SUCCESS})).catch((e=>{t=e,o=r.ERROR}));return{read:()=>{switch(o){case r.SUCCESS:return t;case r.PENDING:throw a;case r.ERROR:throw t}}}}o.d(t,{wrapSuspense:()=>a}),function(e){e.ERROR="error",e.SUCCESS="success",e.PENDING="pending"}(r||(r={}))},543839:(e,t,o)=>{o.d(t,{APIProvider:()=>c});var r=o(785893),a=o(667294),n=o(779434),s=o(467702),i=o(216608);function c({userId:e,peerId:t,onAPIRequest:o,language:c,children:l}){const[d,u]=(0,a.useReducer)(((e,t)=>(e.cache.destroy(),t)),new s.API({userId:e,peerId:t,onAPIRequest:o,language:c}));return(0,a.useEffect)((()=>{const r=new s.API({userId:e,peerId:t,onAPIRequest:o,language:c});u(r),r.cache.reload()}),[e,t,c,o]),(0,a.useEffect)((()=>{if((0,i.isUgcStickersEnabled)())return d.updates.start(),()=>{d.updates.stop()}}),[d]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.APIGate,{api:d}),l]})}},718367:(e,t,o)=>{o.d(t,{AvatarSuggestionRow:()=>p});var r=o(785893),a=o(504190),n=o(990460),s=o(22378),i=o(86894),c=o(861915),l=o(563026),d=o(600692),u=o(805280),m=o(947246),h=o(450390);const p=({Component:e,...t})=>{const o=(0,i.useAppearance)(),{onVmojiSuggestionClick:p}=(0,m.useStickersKeyboard)(),f=(0,a.useStore)(l.$avatarSuggestion),v=(0,a.useStore)(c.$stickersVerticalGap);if(!p)return null;const g=f?.resources?.find((e=>e.key===`image_${o}`))?.value,_=f?.title,k=f?.description;return(0,r.jsx)(e,{style:{"--stickers-vertical-gap":`${v}px`},className:h.default.banner,asideMode:"dismiss",onDismiss:e=>{e.preventDefault(),e.stopPropagation(),(0,d.hideHelpHint)(u.HelpHintIdTypes.VMOJI_AVATAR_SUGGESTION)},onClick:p,mode:"image",imageTheme:"light",before:(0,r.jsx)("div",{className:h.default.placeholder}),background:(0,r.jsx)("div",{className:h.default.character,style:{backgroundImage:`url('${g}')`}}),header:_&&(0,r.jsx)(n.Headline,{level:"1",children:_}),subheader:k&&(0,r.jsx)(i.Paragraph,{children:(0,r.jsx)(s.InnerHTML,{children:k})}),...t})}},154212:(e,t,o)=>{o.d(t,{Emoji:()=>i});var r=o(785893),a=o(659397),n=o(213126),s=o(777459);function i({emoji:e,className:t,...o}){return(0,r.jsx)("i",{className:(0,a.classNames)(s.default.emoji,`@${(0,n.unicodeToByteHex)(e)}`,t),"data-emoji":e,...o})}},912230:(e,t,o)=>{o.d(t,{EmojiItem:()=>i});var r=o(785893),a=o(659397),n=o(154212),s=o(808209);function i({emoji:e,active:t,onEmojiClick:o,className:i,onClick:c,...l}){return(0,r.jsx)("div",{className:(0,a.classNames)(i,s.default.item,{[s.default.itemActive]:t}),onClick:t=>{c?.(t),o?.(e)},...l,children:(0,r.jsx)(n.Emoji,{emoji:e})})}},288947:(e,t,o)=>{o.d(t,{EmojiKeyboard:()=>I});var r=o(785893),a=o(504190),n=o(906811),s=o(659397),i=o(667294),c=o(715201),l=o(753209),d=o(449916),u=o(384684),m=o(206386),h=o(205537),p=o(883935),f=o(24165),v=o(840233),g=o(376150),_=o(734999),k=o(841657),b=o(761879),E=o(191848),y=o(272574),w=o(974570),C=o(473684);function I({className:e,...t}){const{emojiSections:o,insertEmoji:I}=(0,b.useEmojiKeyboard)(),{bannerPackIndex:A,getAvatarSuggestionEmojiRow:S,avatarSuggestion:x,avatarSuggestionTab:P}=(0,E.useAvatarSuggestion)(),M=(0,a.useStore)(h.$emojiPadding),N=(0,a.useStore)(p.$selectedEmojiPackIndex),R=(0,i.useRef)(null),{setGridRef:T,columns:O}=(0,f.useGrid)({tab:v.Tab.EMOJI,itemWidth:u.EMOJI_SIZE+M}),j=(0,i.useMemo)((()=>{const e=[];return o.forEach((([t,o],a)=>{if(e.push({type:y.EmojiKeyboardElementType.HEADER,element:(0,r.jsx)(m.EmojiKeyboardHeader,{title:t},t),sticky:!0}),!A&&a===N||A===a){const t=S(N);t&&e.push(t)}(0,s.chunkArray)(o,O).forEach(((o,n)=>{e.push({type:y.EmojiKeyboardElementType.ROW,element:(0,r.jsx)(d.EmojiKeyboardRow,{"data-section-index":a,"data-row-index":n,emoji:o,onEmojiClick:I},`${t}${o[0]}`)})}))})),e}),[O,o,x]),L=(0,i.useMemo)((()=>j.reduce(((e,{type:t},o)=>(t===y.EmojiKeyboardElementType.HEADER&&e.push(o),e)),[])),[j]),D=e=>L.includes(e),{rangeExtractor:V,isSticky:K}=(0,g.useSticky)({rows:j}),U=(0,n.useVirtualizer)({overscan:5,rangeExtractor:V,count:j.length,getScrollElement:()=>R.current,estimateSize:()=>u.EMOJI_SIZE});(0,_.useScrollView)(R),(0,k.useKeyboardEvent)({columns:O,virtualizer:U,headerIndexes:L}),(0,w.useCalculateSelectedEmojiPackIndex)(U,L),(0,i.useEffect)((()=>{null!==A&&P===v.Tab.EMOJI&&L[A]&&U.scrollToIndex(L[A],{align:"start",behavior:"auto"})}),[A]);const B=U.getVirtualItems().filter(Boolean);return(0,r.jsx)(l.ViewItem,{getRef:T,className:(0,s.classNames)(C.default.keyboard,e),style:{"--emoji-size":`${u.EMOJI_SIZE}px`,"--emoji-padding":`${M}px`,"--emoji-columns":O},...t,children:(0,r.jsx)(c.CustomScrollView,{boxRef:R,className:C.default.scroll,autoHideScrollbar:!0,children:(0,r.jsx)("div",{className:C.default.in,style:{height:U.getTotalSize()},children:B.map((({key:e,index:t,start:o})=>(0,r.jsx)("div",{"data-index":t,ref:U.measureElement,className:(0,s.classNames)(C.default.item,{[C.default.itemHeader]:D(t)}),style:K(t)?{position:"sticky"}:{position:"absolute",transform:`translateY(${o}px)`},children:j[t].element},e)))})})})}},841657:(e,t,o)=>{o.d(t,{useKeyboardEvent:()=>m});var r,a=o(667294),n=o(504190),s=o(497233),i=o(334395),c=o(171130),l=o(842263),d=o(761879);!function(e){e.ENTER="Enter",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(r||(r={}));const u=Object.values(r);function m({columns:e,virtualizer:t,headerIndexes:o}){const{emojiSections:m,insertEmoji:h}=(0,d.useEmojiKeyboard)(),p=(0,n.useStore)(s.$isVisible),f=(0,n.useStore)(l.$selectedEmoji),{isEmojiVisibleTab:v}=(0,n.useStore)(i.$visibleTabState),{isEmojiActiveTab:g}=(0,n.useStore)(c.$tabbarActiveTabState),_=f?.emojiIndex||0,k=f?.sectionIndex||0,b=Math.floor(_/e),E=(e,r)=>{const a=o[k]+b;t.scrollToIndex(a,{align:"center",behavior:"auto"}),(0,l.setSelectedEmoji)({sectionIndex:e,emojiIndex:r})};(0,a.useEffect)((()=>{if(!p)return;const t=t=>{const{key:o}=t,a=f;if(u.includes(o)&&(v||g))if((e=>{e.preventDefault(),e.stopPropagation()})(t),a)switch(o){case r.ENTER:{if(!f)return;const{sectionIndex:e,emojiIndex:t}=f,o=m[e]?.[1][t];return void(o&&h(o))}case r.ARROW_UP:if(!f)return;if(Number(a.emojiIndex)>=e)return void E(a.sectionIndex,a.emojiIndex-e);if(a.sectionIndex){const t=m[a.sectionIndex-1]?.[1].length||0;if(t){const o=a.emojiIndex%e,r=t-1,n=r%e,s=r-r%e+Math.min(o,n);E(a.sectionIndex-1,s)}}return;case r.ARROW_DOWN:{const t=m[a.sectionIndex]?.[1].length||0;return a.emojiIndex-a.emojiIndex%e!=t-1-(t-1)%e?void E(a.sectionIndex,Math.min(a.emojiIndex+e,t-1)):void(a.sectionIndex!==m.length-1&&E(a.sectionIndex+1,a.emojiIndex%e))}case r.ARROW_LEFT:if(a.emojiIndex)return void E(a.sectionIndex,a.emojiIndex-1);if(a.sectionIndex){const e=m[a.sectionIndex-1]?.[1].length||0;e&&E(a.sectionIndex-1,e-1)}return;case r.ARROW_RIGHT:{const e=m[a.sectionIndex]?.[1].length||0;return a.emojiIndex!==e-1?void E(a.sectionIndex,a.emojiIndex+1):void(a.sectionIndex!==m.length-1&&E(a.sectionIndex+1,0))}}else E(0,0)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[p,g,v,f,m])}},272574:(e,t,o)=>{var r;o.d(t,{EmojiKeyboardElementType:()=>r}),function(e){e.ROW="row",e.HEADER="header"}(r||(r={}))},206386:(e,t,o)=>{o.d(t,{EmojiKeyboardHeader:()=>u});var r=o(785893),a=o(990460),n=o(504190),s=o(659397),i=o(108268),c=o(258774),l=o(791677);const d={[c.StickerEmojiKeyboardVariant.WIDE]:l.default.headerWide,[c.StickerEmojiKeyboardVariant.COMPACT]:l.default.headerCompact,[c.StickerEmojiKeyboardVariant.REGULAR]:l.default.headerRegular,[c.StickerEmojiKeyboardVariant.ADAPTIVE]:l.default.headerAdaptive};function u({title:e,className:t,...o}){const{translate:u}=(0,i.useLangPack)(),m=(0,n.useStore)(c.$variant);return(0,r.jsx)("div",{"data-testid":"emoji-keyboard-header","data-header":!0,className:(0,s.classNames)(l.default.header,d[m],t),...o,children:(0,r.jsx)(a.Subhead,{className:l.default.title,weight:"3",children:u(e)})})}},384684:(e,t,o)=>{o.d(t,{EMOJI_SIZE:()=>m,EmojiKeyboardProvider:()=>h});var r=o(785893),a=o(504190),n=o(667294),s=o(524448),i=o(497233),c=o(944930),l=o(842263),d=o(627062),u=o(761879);const m=16;function h({onEmojiInsert:e,...t}){const o=(0,d.useAPI)(),m=(0,a.useStore)(i.$isVisible),h=e=>e?e.sort((([,e],[,t])=>t-e)).map((([e])=>e)):[],[p,f]=(0,n.useState)(Object.entries({stickers_picker_recently_used:h(o.cache.recentEmoji.get()),...s.sections})),v=p.filter((([,e])=>e.length));return(0,n.useEffect)((()=>{m||((async()=>{const e=o.cache.recentEmoji.get();e&&((0,c.setRecentEmoji)(e),f((t=>(t[0][1]=h(e),t))))})(),(0,l.setSelectedEmoji)(null))}),[o,m]),(0,r.jsx)(u.EmojiKeyboardContext.Provider,{value:{emojiSections:v,onEmojiInsert:e},...t})}},524448:(e,t,o)=>{o.d(t,{sections:()=>r});const r={stickers_picker_emotions:["😀","😃","😄","😁","😅","😆","😂","🤣","😉","😊","☺","🙂","🙃","😇","😗","😙","😚","😘","😍","🥰","🤩","🤗","😋","😜","🤪","😛","😝","🤑","🤭","🤐","🤫","😶","🤔","🤨","🧐","😐","😑","🙄","😬","🤥","😏","😌","🤤","😴","🤓","😎","🥳","🤠","😒","😔","😪","😕","😟","🙁","☹","😮","😯","😲","😳","🥺","😦","😧","😨","😰","😥","😢","😭","😱","😖","😣","😞","😓","😩","😫","😷","🤒","🤕","🤢","🤮","🤧","🥶","🥵","🥴","😵","🤯","😤","😠","😡","🤬","😈","👿","💀","☠","💩","🤡","👹","👺","👻","👽","👾","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🙈","🙉","🙊","🦠"],stickers_picker_gestures_and_people:["👍","👎","👌","✌","🤞","🤟","🤘","🤙","🖕","✊","👊","🤛","🤜","👈","👉","👆","👇","☝","👋","🤚","🖐","✋","🖖","👏","🙌","👐","🤲","🤝","🙏","💪","🦵","🦶","👂","👃","🧠","🦷","🦴","👀","👁","👅","👄","✍","💅","🤳","👫","👭","👬","👩‍❤️‍💋‍👨","👨‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍❤️‍👨","👨‍❤️‍👨","👩‍❤️‍👩","👪","👶","🧒","👦","👧","🧑","👱","👨","🧔","👱‍♂️","👨‍🦰","👨‍🦱","👨‍🦳","👨‍🦲","👩","👱‍♀️","👩‍🦰","👩‍🦱","👩‍🦳","👩‍🦲","🧓️","🙍‍♂️️","🙍‍♀️️","🙎‍♂️","🙎‍♀️️","🙅‍♂️","🙅‍♀️","🙆‍♂️","🙆‍♀️","💁‍♂️","💁‍♀️️","🙋‍♂️","🙋‍♀️️","🙇‍♂️","🙇‍♀️️","🤦‍♂️","🤦‍♀️","🤷‍♂️","🤷‍♀️","💆‍♂️️","💆‍♀️","💇‍♂️️","💇‍♀️","🚶‍♂️️","🚶‍♀️️","🏃‍♂️️","🏃‍♀️","💃","🕺","🕴️","👯‍♂️️","👯‍♀️","🧖‍♂️","🧖‍♀️️","👼","🎅","🤶","🦸‍♂️","🦸‍♀️","🦹‍♂️","🦹‍♀️","🧙‍♂️","🧙‍♀️","🧚‍♂️","🧚‍♀️","🧛‍♂️","🧛‍♀️","🧜‍♂️","🧜‍♀️","🧝‍♂️","🧝‍♀️","🧞‍♂️","🧞‍♀️","🧟‍♂️","🧟‍♀️","👨‍⚕️","👩‍⚕️","👨‍🎓","👩‍🎓","👨‍🏫","👩‍🏫","👨‍⚖️","👩‍⚖️","👨‍🌾","👩‍🌾","👨‍🍳","👩‍🍳","👨‍🔧","👩‍🔧","👨‍🏭","👩‍🏭","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍💻","👩‍💻","👨‍🎤","👩‍🎤","👨‍🎨","👩‍🎨","👨‍✈️","👩‍✈️","👨‍🚀","👩‍🚀","👨‍🚒","👩‍🚒","👮‍♂️","👮‍♀️","🕵️‍♂️","🕵️‍♀️","💂‍♂️","💂‍♀️","👷‍♂️","👷‍♀️","🤴","👸","👳‍♂️","👳‍♀️","👲","🧕","🤵","👰","🤰","🤱","🛀","🛌"],stickers_picker_symbols:["💋","❤","💔","❣","💘","💝","💖","💗","💓","💞","💕","💟","💜","🧡","💛","💚","💙","🖤","💯","💢","💥","💫","🕳","💣","💬","👁️‍🗨️","🗨","🗯","💭","💤","🗣","👤","👥","👣","🔇","🔊","📢","📣","🔔","🔕","🎼","🎵","🎶","⚠","🚸","☢","☣","🆚","🆓","🆕","🚮","🚾","🚭","✅","♻","⚕","🔱","‼","⁉","❓","❗","🆘","⛔","🚫","🚳","🚯","🚱","🚷","📵","🔞"],stickers_picker_animals_and_plants:["🐵","🐒","🦍","🐶","🐕","🐩","🐺","🦊","🦝","🐱","🐈","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🐮","🐂","🐃","🐄","🐷","🐽","🐖","🐗","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿","🦔","🦇","🐻","🐨","🐼","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊","🦅","🦆","🦢","🦉","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🐟","🐠","🐡","🦈","🐙","🦀","🦞","🦐","🦑","🐚","🐌","🦋","🐛","🐜","🐝","🐞","🦗","🕷","🕸","🦂","🦟","💐","🌸","💮","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌳","🌲","🎄","🌴","🌵","🌾","🌱","🌿","☘","🍀","🍁","🍂","🍃","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡","☀","🌝","🌞","⭐","🌟","🌠","☁","⛅","⛈","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","💨","🌀","🌈","🌂","☂","☔","⛱","⚡","❄","☃","⛄","☄","🔥","💦","💧","🌊"],stickers_picker_food_and_drink:["🍏","🍎","🍐","🍅","🥝","🍑","🍒","🍓","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🥥","🥑","🍆","🥔","🥕","🌽","🌶","🥒","🥬","🥦","🍄","🥜","🌰","🍞","🥐","🥖","🥨","🥯","🥞","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥣","🥗","🍿","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🥢","🍽","🍴","🥄"],stickers_picker_sport_and_activities:["⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸","🎣","🎽","🛹","🎿","🛷","🥌","🎯","🎱","🎮","🕹","🎰","🎲","🧩","♟","🧗‍♂️️","🧗‍♀️","🤺","🏇","⛷","🏂","🏌️‍♂️","🏌️‍♀️","🏄‍♂️","🏄‍♀️","🚣‍♂️","🚣‍♀️","🏊‍♂️","🏊‍♀️","⛹️‍♂️","⛹️‍♀️","🏋️‍♂️","🏋️‍♀️","🚴‍♂️","🚴‍♀️","🚵‍♂️","🚵‍♀️","🤸","🤼‍♂️","🤼‍♀️","🤽‍♂️","🤽‍♀️","🤾‍♂️","🤾‍♀️","🤹‍♂️","🤹‍♀️","🧘‍♂️","🧘‍♀️","🎖","🏆","🏅","🥇","🥈","🥉"],stickers_picker_travel_and_transport:["🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🏎","🏍","🛵","🚲","🛴","🚏","🛣","🛤","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳","⛴","🛥","🚢","✈","🛩","🛫","🛬","💺","🚁","🚟","🚠","🚡","🛰","🚀","🛸","🌍","🌎","🌏","🌐","🗺","🗾","🧭","🏔","⛰","🌋","🗻","🏕","🏖","🏜","🏝","🏞","🏟","🏛","🏗","🧱","🏘","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🕍","⛩","🕋","⛲","⛺","🌁","🌃","🏙","🌄","🌅","🌆","🌇","🌉","♨","🌌","🎠","🎡","🎢","💈","🎪"],stickers_picker_subjects:["🎙","🎚","🎛","🎤","🎧","📻","🎷","🎸","🎹","🎺","🎻","🥁","📯","🎭","🖼","🎨","🧵","🧶","🔮","🧿","🧸","🃏","🀄","🎴","🎃","🎆","🎇","🧨","✨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗","🎟","🎫","🛎","🧳","⌛","⏳","⌚","⏰","⏱","⏲","🕰","👓","🕶","🥽","🥼","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","👙","👚","👛","👜","👝","🛍","🎒","👞","👟","🥾","🥿","👠","👡","👢","👑","👒","🎩","🎓","🧢","⛑","📿","💄","💍","💎","📱","📲","☎","📞","📟","📠","🔋","🔌","💻","🖥","🖨","⌨","🖱","🖲","💽","💾","💿","📀","🧮","🎥","🎞","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯","💡","🔦","🏮","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞","📑","🔖","🏷","💰","💴","💵","💶","💷","💸","💳","🧾","💹","💱","💲","✉","💌","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳","✏","✒","🖋","🖊","🖌","🖍","📝","💼","📁","📂","🗂","📅","📆","🗒","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇","📏","📐","✂","🗃","🗄","🗑","🔒","🔓","🔏","🔐","🔑","🗝","🔨","⛏","⚒","🛠","🗡","⚔","🔪","🔫","🏹","🛡","🔧","🔩","⚙","🗜","⚖","🔗","⛓","🧰","🧲","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","💊","🚪","🛏","🛋","🚽","🚿","🛁","🧴","🧷","🧹","🧺","🧻","🧼","🧽","🧯","🛒","🚬","⚰","⚱","🏺","🗿"],stickers_picker_flags:["🇷🇺","🇰🇿","🇧🇾","🇺🇦","🇲🇳","🇬🇪","🇦🇿","🇹🇯","🇧🇷","🇱🇹","🇱🇻","🇪🇪","🇦🇲","🏁","🚩","🎌","🏴","🏳","🏳️‍🌈","🏴‍☠️","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇨","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇺","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇬","🇺🇲","🇺🇳","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼"]}},449916:(e,t,o)=>{o.d(t,{EmojiKeyboardRow:()=>h,rowVariantModifier:()=>m});var r=o(785893),a=o(504190),n=o(659397),s=o(667294),i=o(912230),c=o(842263),l=o(258774),d=o(761879),u=o(327503);const m={[l.StickerEmojiKeyboardVariant.WIDE]:u.default.rowWide,[l.StickerEmojiKeyboardVariant.COMPACT]:u.default.rowCompact,[l.StickerEmojiKeyboardVariant.REGULAR]:u.default.rowRegular,[l.StickerEmojiKeyboardVariant.ADAPTIVE]:u.default.rowAdaptive};function h({emoji:e,onEmojiClick:t,className:o,...h}){const{emojiSections:p}=(0,d.useEmojiKeyboard)(),f=(0,a.useStore)(l.$variant),v=(0,a.useStore)(c.$selectedEmoji),g=v?.emojiIndex,_=v?.sectionIndex,k=void 0!==g&&void 0!==_?p[_][1][g]:void 0,b=(0,s.useMemo)((()=>e.map((e=>(0,r.jsx)(i.EmojiItem,{className:u.default.emoji,emoji:e,active:e===k,onEmojiClick:t},e)))),[e,k,t]);return(0,r.jsx)("div",{className:(0,n.classNames)(u.default.row,m[f],o),...h,children:b})}},968912:(e,t,o)=>{o.d(t,{EmojiKeyboardRowBanner:()=>l});var r=o(785893),a=o(337111),n=o(659397),s=o(504190),i=o(258774),c=o(449916);const l=({className:e,...t})=>{const o=(0,s.useStore)(i.$variant);return(0,r.jsx)("div",{className:(0,n.classNames)(e,c.rowVariantModifier[o]),children:(0,r.jsx)(a.Banner,{noPadding:!0,...t})})}},791667:(e,t,o)=>{o.d(t,{PeerProvider:()=>d});var r=o(504190),a=o(688538),n=o(667294),s=o(670834),i=o(34374),c=o(278524),l=o(627062);function d({children:e}){const t=(0,l.useAPI)(),o=(0,r.useStore)(s.$peerId);return(0,n.useEffect)((()=>{(0,c.setUserPeer)(null),(0,i.setChatPeer)(null),o&&(a.Ranges.isChatOrChannelPeer(o)?(async()=>{let e;try{e=(await t.messages.getConversationsById({peer_ids:String(o)})).items[0]}catch{}e&&(0,i.setChatPeer)(e)})():a.Ranges.isUserId(o)&&(async()=>{let e;try{e=(await t.users.get({user_ids:String(o),fields:String(["photo_50","first_name_gen"])}))[0]}catch{}e&&(0,c.setUserPeer)(e)})())}),[o]),e}},17376:(e,t,o)=>{o.d(t,{StickersEmojiKeyboard:()=>x});var r=o(785893),a=o(504190),n=o(659397),s=o(667294),i=o(780891),c=o(177303),l=o(672342),d=o(976020),u=o(574767),m=o(543839),h=o(791667),p=o(288947),f=o(964904),v=o(384684),g=o(1652),_=o(244335),k=o(670834),b=o(171130),E=o(497233),y=o(334395),w=o(339778),C=o(258774),I=o(627062),A=o(419928);const S={[C.StickerEmojiKeyboardVariant.WIDE]:A.default.keyboardWide,[C.StickerEmojiKeyboardVariant.COMPACT]:A.default.keyboardCompact,[C.StickerEmojiKeyboardVariant.REGULAR]:A.default.keyboardRegular,[C.StickerEmojiKeyboardVariant.ADAPTIVE]:A.default.keyboardAdaptive};function x({lang:e,userId:t,peerId:o,variant:a,isVisible:n,visibleTab:s,onAPIRequest:i,activePackKey:c,onTabChange:d,onPopUpPlay:u,onShopClick:p,onCatchError:f,onEmojiInsert:b,onStickerSend:I,onUGCEditClick:A,onUGCReportClick:S,onVmojiEditClick:x,onVmojiCreateClick:M,onStockItemGiftClick:N,onStockItemSettingsClick:R,onVmojiSuggestionClick:T,...O}){return(0,r.jsxs)(l.LangPackProvider,{name:"stickers_picker",domain:"vk.com",lang:e,suspense:!1,children:[(0,r.jsx)(k.PeerGate,{peerId:o}),(0,r.jsx)(C.VariantGate,{variant:a}),(0,r.jsx)(E.VisibleGate,{isVisible:n}),(0,r.jsx)(y.VisibleTabGate,{visibleTab:s}),(0,r.jsx)(w.ActivePackKeyGate,{activePackKey:c}),(0,r.jsx)(m.APIProvider,{userId:t,peerId:o,language:e,onAPIRequest:i,children:(0,r.jsx)(h.PeerProvider,{children:(0,r.jsx)(_.StickersEmojiKeyboardProvider,{onTabChange:d,onShopClick:p,children:(0,r.jsx)(g.StickersKeyboardProvider,{onPopUpPlay:u,onCatchError:f,onStickerSend:I,onUGCEditClick:A,onVmojiEditClick:x,onUGCReportClick:S,onVmojiCreateClick:M,onStockItemGiftClick:N,onStockItemSettingsClick:R,onVmojiSuggestionClick:T,children:(0,r.jsx)(v.EmojiKeyboardProvider,{onEmojiInsert:b,children:(0,r.jsx)(P,{...O})})})})})})]})}function P({className:e,...t}){const o=(0,I.useAPI)(),l=(0,a.useStore)(C.$variant),m=(0,a.useStore)(y.$visibleTab),{isStickersActiveTab:h}=(0,a.useStore)(b.$tabbarActiveTabState),{isEmojiVisibleTab:v,isStickersVisibleTab:g}=(0,a.useStore)(y.$visibleTabState),_=(0,s.useRef)(null);return(0,r.jsx)(c.HelpHintsProvider,{api:o,noToken:!0,children:(0,r.jsx)(i.AppRootProvider,{portalRoot:_,children:(0,r.jsx)("div",{ref:_,className:(0,n.classNames)(e,A.default.keyboard,S[l]),...t,children:(0,r.jsxs)("div",{className:A.default.in,children:[(0,r.jsxs)(d.View,{switched:h&&!m,children:[(0,r.jsx)(p.EmojiKeyboard,{mounted:!m||v}),(0,r.jsx)(f.StickersKeyboard,{mounted:!m||g})]}),(0,r.jsx)(u.Tabbar,{})]})})})})}},244335:(e,t,o)=>{o.d(t,{StickersEmojiKeyboardProvider:()=>l});var r=o(785893),a=o(504190),n=o(667294),s=o(171130),i=o(627062),c=o(997188);function l({onTabChange:e,onShopClick:t,...o}){const l=(0,i.useAPI)(),d=(0,a.useStore)(s.$tabbarActiveTab),u=l.cache.tabbarActiveTab.get();if((0,n.useEffect)((()=>{u!==d&&l.cache.tabbarActiveTab.set(d)}),[d,u]),t){const e=t;t=t=>{l.store.markAsViewed({type:"stickers",reset:String(["store_new_items","global_promotion"])}),e(t)}}return(0,r.jsx)(c.StickersEmojiKeyboardContext.Provider,{value:{onTabChange:e,onShopClick:t},...o})}},964904:(e,t,o)=>{o.d(t,{StickersKeyboard:()=>R});var r=o(785893),a=o(504190),n=o(906811),s=o(366617),i=o(667294),c=o(715201),l=o(659397),d=o(753209),u=o(981098),m=o(309513),h=o(816516),p=o(731447),f=o(625621),v=o(455337),g=o(497233),_=o(339778),k=o(324607),b=o(90975),E=o(193634),y=o(861915),w=o(627062),C=o(24165),I=o(840233),A=o(376150),S=o(734999),x=o(191848),P=o(473162),M=o(947246),N=o(585851);function R({className:e,...t}){const o=(0,w.useAPI)(),{setSelectedPack:R}=(0,M.useStickersKeyboard)(),{getAvatarSuggestionStickerRow:T,bannerPackIndex:O,avatarSuggestion:j}=(0,x.useAvatarSuggestion)(),{packs:L}=(0,a.useStore)(b.$packs),D=(0,a.useStore)(g.$isVisible),V=(0,a.useStore)(E.$avatarSuggestionTab),K=(0,a.useStore)(y.$stickersSize),U=(0,a.useStore)(_.$activePackKey),B=(0,a.useStore)(k.$selectedPackKey),H=(0,a.useStore)(y.$stickersVerticalGap),F=(0,a.useStore)(y.$stickersHorizontalGap),G=(0,a.useStore)(y.$stickersKeyboardVerticalOrder),$=(0,i.useRef)(null),W=(0,i.useRef)([]),z=(0,i.useRef)(!1);(0,S.useScrollView)($);const{setGridRef:q,columns:Y}=(0,C.useGrid)({tab:I.Tab.STICKERS,itemWidth:K+F}),J=(0,i.useMemo)((()=>{if(!L||!Y)return[{type:P.StickersKeyboardElementType.HEADER,element:(0,r.jsx)(h.StickersKeyboardHeader,{},Math.random()),sticky:!0},...(0,l.createArray)(6).map((e=>({type:P.StickersKeyboardElementType.ROW,element:(0,r.jsx)(u.StickersKeyboardRow,{columns:Y},e)})))];const e=[];let t=null;const o=L?.get(B);return void 0!==o?.index&&(t=o.index),L.forEach((o=>{const{id:a,index:n}=o,i=o.stickers?.map(s.getStickerContext);e.push({type:P.StickersKeyboardElementType.HEADER,element:(0,r.jsx)(h.StickersKeyboardHeader,{pack:o},a),sticky:!0});const c=a===b.ServicePackKey.VMOJI;c&&e.push({type:P.StickersKeyboardElementType.ROW,element:(0,r.jsx)(f.StickersKeyboardVmojiRow,{},b.ServicePackKey.VMOJI)});const d=a===b.ServicePackKey.UGC&&!i?.length;d&&e.push({type:P.StickersKeyboardElementType.ROW,element:(0,r.jsx)(p.StickersKeyboardUGCRow,{},b.ServicePackKey.UGC)});const m=t||0;if(null===O&&n===m||O===n){const t=T(m,c||d);t&&e.push(t)}i&&(0,l.chunkArray)(i,Y).forEach(((t,n)=>{e.push({type:P.StickersKeyboardElementType.ROW,element:(0,r.jsx)(u.StickersKeyboardRow,{stickers:t,columns:Y,pack:o},`${a}${n}`)})}))})),e}),[L,Y,j]),X=(0,i.useMemo)((()=>{const e=W.current,t=J.reduce(((e,{type:t},o)=>(t===P.StickersKeyboardElementType.HEADER&&e.push(o),e)),[]);return(0,l.isEqual)(t,e)||!t.length?e:(W.current=t,t)}),[J]),Q=e=>X.includes(e),{rangeExtractor:Z,isSticky:ee}=(0,A.useSticky)({rows:J}),te=(0,n.useVirtualizer)({rangeExtractor:Z,count:J.length,estimateSize:()=>K,getScrollElement:()=>$.current}),{range:oe}=te,re=e=>{const t=L?.get(e);t&&(((e,t,o)=>{const{index:r}=e;if(void 0===r)return;const a=X[r];(B!==t||o)&&void 0!==a&&te.scrollToIndex(a,{align:"start",behavior:"auto"})})(t,e),R(e))};(0,i.useEffect)((()=>{null!==O&&V===I.Tab.STICKERS&&X[O]&&te.scrollToIndex(X[O],{align:"start",behavior:"auto"})}),[O]),(0,i.useEffect)((()=>{const e=$.current;if(e&&!L)return e.style.setProperty("overflow","hidden","important"),()=>{e.style.removeProperty("overflow")}}),[L]),(0,i.useEffect)((()=>{const e=o.cache.stickersActiveTab.get();L&&(z.current=!1,U||e?(re(U||e),z.current=!0):z.current=!0)}),[X,L,U,D]),(0,i.useEffect)((()=>{const e=z.current,t=te.calculateRange();if(!t)return;const{startIndex:o,endIndex:r}=t;if(!o&&!r||!X.length||!L||!e)return;const a=[...L.values()],n=X.findIndex((e=>e>=o)),s=X.findIndex((e=>e>=r)),i=a[n-Number(n===s&&o!==r)];if(!i)return;const{id:c}=i;R(c)}),[oe,X]);const ae=te.getVirtualItems().filter(Boolean);return(0,r.jsx)(v.StickersKeyboardSelectProvider,{selectPack:re,children:(0,r.jsxs)(d.ViewItem,{getRef:q,className:(0,l.classNames)(N.default.keyboard,e),style:{"--stickers-columns":Y,"--stickers-size":`${K}px`,"--stickers-vertical-gap":`${H}px`,"--stickers-horizontal-gap":`${F}px`,"--stickers-tab-flex-direction":`${G}`},...t,children:[(0,r.jsx)(c.CustomScrollView,{boxRef:$,className:(0,l.classNames)(N.default.scroll,{[N.default.scrollDisabled]:!L}),autoHideScrollbar:!0,children:(0,r.jsx)("div",{className:N.default.in,style:{height:te.getTotalSize()},children:ae.map((({key:e,index:t,start:o})=>(0,r.jsx)("div",{"data-index":t,ref:te.measureElement,className:(0,l.classNames)(N.default.item,{[N.default.itemHeader]:Q(t)}),style:ee(t)?{position:"sticky"}:{position:"absolute",transform:`translateY(${o}px)`},children:J[t].element},e)))})}),L&&(0,r.jsx)(m.StickersKeyboardGroups,{})]})})}},473162:(e,t,o)=>{var r;o.d(t,{StickersKeyboardElementType:()=>r}),function(e){e.ROW="row",e.HEADER="header"}(r||(r={}))},307852:(e,t,o)=>{o.d(t,{StickersKeyboardGroup:()=>h});var r=o(785893),a=o(504190),n=o(659397),s=o(667294),i=o(123386),c=o(324607),l=o(90975),d=o(947246),u=o(87613);const m=e=>{switch(e){case l.ServicePackKey.FAVORITE:return"stickers-keyboard-group-favorite";case l.ServicePackKey.RECENT:return"stickers-keyboard-group-recent";case l.ServicePackKey.VMOJI:return"stickers-keyboard-group-vmoji";case l.ServicePackKey.UGC:return"stickers-keyboard-group-ugc";default:return""}};function h({group:e,className:t,...o}){const{selectPack:h}=(0,d.useStickersKeyboardSelect)(),p=(0,a.useStore)(c.$selectedPackKey),{packs:f}=(0,a.useStore)(l.$packs),v=(0,s.useRef)(null),[g,_]=(0,s.useState)(),k=e=>()=>{h(e)},b=(0,s.useMemo)((()=>{if(Array.isArray(e)||(e=[e]),f)return e.map((e=>{const t=f.get(e);if(t)return(0,r.jsx)(i.StickersKeyboardGroupItem,{className:u.default.item,pack:t,active:e===p,onClick:k(e)},e)}))}),[e,f,p]);(0,s.useLayoutEffect)((()=>{const e=v.current;if(!e)return;const t=e.children[0]?.clientWidth;t&&_(t)}),[v]);const E=Boolean(Array.isArray(e)&&Number(b?.length)>1&&p&&e.includes(p));return(0,r.jsx)("div",{"data-testid":m(e),ref:v,className:(0,n.classNames)(u.default.group,t,{[u.default.groupActive]:E,[u.default.groupHidden]:!g}),style:{"--group-item-width":`${g}px`},...o,children:b})}},66157:(e,t,o)=>{o.d(t,{StickersKeyboardGroupItemIcon:()=>i});var r=o(785893),a=o(816761),n=o(216608),s=o(92031);const i=({pack:e,...t})=>{const{isPopup:o}=e;let i;return o&&(0,n.isPopUpStickersEnabled)()&&(i=a.Icon12PlayCircle),i?(0,r.jsx)("div",{className:s.default.in,children:(0,r.jsx)(i,{...t})}):null}},123386:(e,t,o)=>{o.d(t,{StickersKeyboardGroupItem:()=>C});var r=o(785893),a=o(504190),n=o(659397),s=o(108268),i=o(152827),c=o(667294),l=o(722257),d=o(773974),u=o(845434),m=o(717731),h=o(25155),p=o(50466),f=o(641899),v=o(66157),g=o(90975),_=o(171130),k=o(830543),b=o(246826),E=o(371300);const y=new Map([[g.ServicePackKey.UGC,(0,r.jsx)(h.Icon24UgcStickerOutline,{},g.ServicePackKey.UGC)],[g.ServicePackKey.VMOJI,(0,r.jsx)(d.Icon24VmojiOutline,{},g.ServicePackKey.VMOJI)],[g.ServicePackKey.RECENT,(0,r.jsx)(p.Icon24RecentOutline,{},g.ServicePackKey.RECENT)],[g.ServicePackKey.FAVORITE,(0,r.jsx)(f.Icon24FavoriteOutline,{},g.ServicePackKey.FAVORITE)]]),w={blue:E.default.inIndicator,red:E.default.inIndicatorRed,gray:E.default.inIndicatorGray,"":""};function C({pack:e,active:t,children:o,indicator:d,...h}){const{translate:p}=(0,s.useLangPack)(),f=(0,a.useStore)(b.$vmojiPromotion),g=(0,a.useStore)(k.$isTransitionActive),{isStickersActiveTab:C}=(0,a.useStore)(_.$tabbarActiveTabState),[I,A]=(0,c.useState)(!0),[S,x]=(0,c.useState)(!1),P=p(e?.title),M=e?.isNew,N=e?.isVmoji,R=e?.hintId,T=e?.hintWidth,O=f?.dot_color||"",j=y.get(e?.id)||o,L=new l.BaseUrlBuilder({size:24,images:e?.previews}).build(),D=(0,u.useHelpHint)(R);(0,c.useEffect)((()=>{j&&A(!1)}),[j]),(0,c.useEffect)((()=>{D&&t&&!S&&(m.HelpHints.hide(D),x(!0))}),[D,t,S]);let V=(0,r.jsx)("div",{...h,children:(0,r.jsx)("div",{className:(0,n.classNames)(E.default.in,{[E.default.inActive]:t,[E.default.inHidden]:I,[E.default.inPlaceholder]:!L&&!j,[E.default.inIndicator]:M||d,[w[O]]:N}),children:j?(0,r.jsx)("div",{"aria-label":P,className:(0,n.classNames)(E.default.icon,E.default.iconService),children:j}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{alt:P,className:E.default.icon,src:L,onLoad:()=>{A(!1)}}),e&&(0,r.jsx)(v.StickersKeyboardGroupItemIcon,{pack:e})]})})});if(D){const{title:e,description:o}=D;V=(0,r.jsx)(i.TextTooltip,{className:E.default.tooltip,maxWidth:T,placement:"top-start",appearance:"accent",header:e,text:o,offsetDistance:-4,shown:!t&&!g&&!S&&C,children:V})}return V}},508789:(e,t,o)=>{o.d(t,{ShopButton:()=>u});var r=o(785893),a=o(504190),n=o(108268),s=o(210162),i=o(123386),c=o(997188),l=o(334395),d=o(127509);function u(){const{translate:e}=(0,n.useLangPack)(),{shopIndicatorMode:t,onShopClick:o}=(0,c.useStickersEmojiKeyboard)(),{isStickersVisibleTab:u}=(0,a.useStore)(l.$visibleTabState);if(!u||!o)return null;const m=Boolean(t);return(0,r.jsx)(i.StickersKeyboardGroupItem,{"aria-label":e("stickers_picker_store"),className:d.default.button,indicator:m,onClick:o,children:(0,r.jsx)(s.Icon24ShoppingCartOutline,{})})}},309513:(e,t,o)=>{o.d(t,{StickersKeyboardGroups:()=>E});var r,a=o(785893),n=o(504190),s=o(659397),i=o(86894),c=o(74106),l=o(906811),d=o(667294),u=o(508789),m=o(307852),h=o(90975),p=o(334395),f=o(324607),v=o(611680),g=o(178251),_=o(947246),k=o(555156),b=o(396893);function E({className:e,...t}){const{hasPointer:o}=(0,i.useAdaptivityWithJSMediaQueries)(),{getGroupIndex:E,isGroupedStockItem:y,prevSelectedPackKey:w}=(0,_.useStickersKeyboard)(),{packsGroups:C}=(0,n.useStore)(h.$packs),I=(0,n.useStore)(f.$selectedPackKey),{isStickersVisibleTab:A}=(0,n.useStore)(p.$visibleTabState),S=(0,d.useRef)(null),[x,P]=(0,d.useState)(!1),[M,N]=(0,d.useState)(!0),R=(0,d.useMemo)((()=>C?.map((e=>(0,a.jsx)(m.StickersKeyboardGroup,{className:b.default.groupIn,group:e},String(e))))||[]),[C]),T=R.length,O=(0,l.useVirtualizer)({count:T,overscan:5,horizontal:!0,getScrollElement:()=>S.current,estimateSize:()=>32,onChange:({range:e})=>{if(!e)return;const{startIndex:t,endIndex:o}=e;P(t>0),N(o<R.length-1)}}),{scrollTo:j}=(0,v.useSmoothScroll)(O),L=e=>O.getVirtualItems().find((({index:t})=>t===e)),D=e=>()=>{if(!O.range)return;const{startIndex:t,endIndex:o}=O.range,a=O.scrollElement?.getBoundingClientRect();if(!a)return;const{width:n}=a;switch(e){case r.LEFT:{const e=L(t-1);if(!e)return;const{size:o,end:r}=e;j({offset:r+2*o-n});break}case r.RIGHT:{const e=L(o-1);if(!e)return;const{size:t,start:r}=e;j({offset:r-t});break}}};(0,g.useHorizontalScroll)(S),(0,d.useEffect)((()=>{if(!I||!C)return;const e=E(I),t=E(w),o=y(w);if(void 0===e)return;if(o&&e>Number(t))return;const r=L(e);if(!r)return;const{start:a}=r,n=O.scrollElement?.getBoundingClientRect(),s=O.scrollElement?.getElementsByClassName(b.default.groupIn)[0]?.getBoundingClientRect();s&&n&&j({offset:a+s.width/2-n.width/2})}),[I,C]);const V={"data-popup-sticker-deductible":k.POPUP_STICKER_CONTAINER_ID,"data-popup-sticker-deductible-full-screen":k.POPUP_STICKER_CONTAINER_ID};return(0,a.jsxs)("div",{...V,className:(0,s.classNames)(b.default.groups,{[b.default.groupsForced]:A},e),...t,children:[(0,a.jsx)(u.ShopButton,{}),(0,a.jsxs)("div",{className:b.default.container,children:[o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,s.classNames)(b.default.shadow,b.default.shadowLeft,{[b.default.shadowVisible]:x})}),(0,a.jsx)("div",{className:(0,s.classNames)(b.default.shadow,b.default.shadowRight,{[b.default.shadowVisible]:M})}),(0,a.jsx)("div",{"aria-hidden":!0,className:(0,s.classNames)(b.default.chevron,b.default.chevronLeft,{[b.default.chevronActive]:x}),onClick:D(r.LEFT),children:(0,a.jsx)(c.Icon16ChevronOutline,{})}),(0,a.jsx)("div",{"aria-hidden":!0,className:(0,s.classNames)(b.default.chevron,b.default.chevronRight,{[b.default.chevronActive]:M}),onClick:D(r.RIGHT),children:(0,a.jsx)(c.Icon16ChevronOutline,{})})]}),(0,a.jsx)("div",{ref:S,className:b.default.in,children:(0,a.jsx)("div",{className:b.default.items,style:{width:O.getTotalSize()},children:Boolean(R.length)&&O.getVirtualItems().map((({key:e,index:t,start:o})=>(0,a.jsx)("div",{"data-index":t,ref:O.measureElement,className:b.default.group,style:{transform:`translateX(${o}px)`},children:R[t]},e)))})})]})]})}!function(e){e.LEFT="left",e.RIGHT="right"}(r||(r={}))},606642:(e,t,o)=>{o.d(t,{GiftButton:()=>h});var r=o(785893),a=o(504190),n=o(659397),s=o(136161),i=o(125726),c=o(278524),l=o(804377),d=o(947246),u=o(440652),m=o(344786);function h({pack:e}){const{onStockItemGiftClick:t}=(0,d.useStickersKeyboard)(),o=(0,a.useStore)(c.$userPeer),h=(0,a.useStore)(l.$stockItemsAvailableToGift);if(!e?.canGift)return null;const{id:p,canGift:f,stockItem:v}=e,g=Boolean(p&&f&&o&&!h?.includes(p));return(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(i.PeerInfo,{className:(0,n.classNames)(u.default.peer,m.default.headerAside),pack:e}),t&&(0,r.jsx)(s.Icon20GiftOutline,{"data-testid":"stickers-keyboard-header-gift-button",className:(0,n.classNames)(m.default.icon,m.default.headerAside),onClick:()=>{v&&t?.(v,o)}})]})}},125726:(e,t,o)=>{o.d(t,{PeerInfo:()=>m});var r=o(785893),a=o(504190),n=o(108268),s=o(347136),i=o(152827),c=o(990460),l=o(493829),d=o(278524),u=o(711857);function m({pack:e,...t}){const{translate:o}=(0,n.useLangPack)(),m=(0,a.useStore)(d.$userPeer);if(!e||!m)return null;const{isStyle:h}=e,{first_name_gen:p,photo_50:f}=m;return(0,r.jsx)(i.TextTooltip,{className:u.default.tooltip,text:(0,r.jsx)(c.Caption,{className:u.default.text,level:"1",children:o(h?"stickers_picker_peer_has_style":"stickers_picker_peer_has_pack",{name:p})}),offsetDistance:8,offsetSkidding:50,placement:"bottom-end",forcePortal:!0,children:(0,r.jsx)(l.Avatar,{src:f,size:20,...t,children:(0,r.jsx)(l.Avatar.Badge,{children:(0,r.jsx)(s.Icon12CheckCircleFill,{className:u.default.icon})})})})}},816516:(e,t,o)=>{o.d(t,{StickersKeyboardHeader:()=>k});var r=o(785893),a=o(504190),n=o(659397),s=o(108268),i=o(990460),c=o(902379),l=o(159851),d=o(515722),u=o(606642),m=o(756276),h=o(54948),p=o(162464),f=o(97910),v=o(258774),g=o(344786);const _={[v.StickerEmojiKeyboardVariant.WIDE]:g.default.headerWide,[v.StickerEmojiKeyboardVariant.COMPACT]:g.default.headerCompact,[v.StickerEmojiKeyboardVariant.REGULAR]:g.default.headerRegular,[v.StickerEmojiKeyboardVariant.ADAPTIVE]:g.default.headerAdaptive};function k({pack:e,className:t,...o}){const{translate:k}=(0,s.useLangPack)(),b=(0,a.useStore)(v.$variant);if(t=(0,n.classNames)(g.default.header,_[b],t),!e)return(0,r.jsx)("div",{"data-testid":"stickers-keyboard-header-skeleton",className:t,...o,children:(0,r.jsx)(i.Subhead,{children:(0,r.jsx)(c.Skeleton,{width:128,colorFrom:l.default.colorTransparent.active.value,noAnimation:!0})})});const{title:E}=e;return(0,r.jsxs)("div",{"data-testid":"stickers-keyboard-header","data-header":!0,className:(0,n.classNames)(g.default.header,t),...o,children:[(0,r.jsx)(i.Subhead,{"data-testid":"stickers-keyboard-header-title",className:g.default.title,weight:"3",children:k(E)}),(0,r.jsx)(d.Tooltip,{pack:e}),(0,r.jsx)(f.StyleSettingsButton,{pack:e}),(0,r.jsx)(p.VmojiEditButton,{pack:e}),(0,r.jsx)(u.GiftButton,{pack:e}),(0,r.jsx)(m.UGCEditButton,{pack:e}),(0,r.jsx)(h.UGCMoreButton,{pack:e})]})}},97910:(e,t,o)=>{o.d(t,{StyleSettingsButton:()=>l});var r=o(785893),a=o(659397),n=o(784118),s=o(947246),i=o(926904),c=o(344786);function l({pack:e}){const{onStockItemSettingsClick:t}=(0,s.useStickersKeyboard)();if(!t)return null;if(!e||!(e?.hasStyles||e?.isStyle||e?.isVmoji))return null;const{stockItem:o}=e;return(0,r.jsx)(n.Icon20GearOutline,{className:(0,a.classNames)(i.default.icon,c.default.icon),onClick:()=>{o&&t?.(o)}})}},515722:(e,t,o)=>{o.d(t,{Tooltip:()=>d});var r=o(785893),a=o(659397),n=o(297973),s=o(108268),i=o(152827),c=o(144295),l=o(344786);function d({pack:{tooltip:e}}){const{translate:t}=(0,s.useLangPack)();if(!e)return null;const{text:o,header:d}=e;return(0,r.jsx)(i.TextTooltip,{className:c.default.tooltip,appearance:"black",offsetDistance:8,forcePortal:!0,...e,header:d&&t(String(d)),text:o&&t(String(o)),children:(0,r.jsx)(n.Icon16InfoOutline,{className:(0,a.classNames)(c.default.icon,l.default.icon)})})}},756276:(e,t,o)=>{o.d(t,{UGCEditButton:()=>d});var r=o(785893),a=o(504190),n=o(659397),s=o(784118),i=o(229634),c=o(947246),l=o(344786);function d({pack:e}){const{onUGCEditClick:t}=(0,c.useStickersKeyboard)(),o=(0,a.useStore)(i.$ugcInfo);return e?.isPack&&o?.can_edit&&o?.items?.length&&t?(0,r.jsx)(s.Icon20GearOutline,{className:(0,n.classNames)(l.default.icon,l.default.headerAside),onClick:t}):null}},54948:(e,t,o)=>{o.d(t,{UGCMoreButton:()=>h});var r=o(785893),a=o(504190),n=o(659397),s=o(108268),i=o(17117),c=o(385228),l=o(924766),d=o(229634),u=o(947246),m=o(344786);function h({pack:e}){const{translate:t}=(0,s.useLangPack)(),{onUGCReportClick:o}=(0,u.useStickersKeyboard)(),h=(0,a.useStore)(d.$ugcInfo);if(!e?.isPack||h?.can_edit||!h?.items?.length||!o)return null;return(0,r.jsx)(l.DropdownActionSheet,{content:(0,r.jsx)(l.DropdownActionSheet.Item,{type:"destructive",before:(0,r.jsx)(i.Icon20ReportOutline,{}),onClick:()=>{o(e.rawData)},children:t("stickers_picker_report")}),placement:"bottom-end",forcePortal:!1,children:(0,r.jsx)(c.Icon20More,{className:(0,n.classNames)(m.default.icon,m.default.headerAside)})})}},162464:(e,t,o)=>{o.d(t,{VmojiEditButton:()=>p});var r=o(785893),a=o(990460),n=o(504190),s=o(659397),i=o(129041),c=o(108268),l=o(246826),d=o(947246),u=o(692531),m=o(344786);const h=99;function p({pack:e}){const{translate:t}=(0,c.useLangPack)(),{onVmojiEditClick:o}=(0,d.useStickersKeyboard)(),p=(0,n.useStore)(l.$vmojiPromotion);if(!e?.isVmoji||!o)return null;const{vmojiAvatar:f}=e,v=p?.constructor_new_items?.counter_value,g=p?.constructor_new_items?.open_params,_=Number(v)>0;let k=t("stickers_picker_vmoji_items_counter",{count:v});return Number(v)>=h&&(k=t("stickers_picker_vmoji_items_counter_max",{count:h})),(0,r.jsxs)("div",{className:(0,s.classNames)(u.default.brush,m.default.headerAside),onClick:()=>{f&&o?.(f,g)},children:[_&&(0,r.jsx)(a.Subhead,{className:(0,s.classNames)(u.default.counter,m.default.icon),weight:"3",children:k}),(0,r.jsx)(i.Icon20BrushOutline,{className:m.default.icon})]})}},1652:(e,t,o)=>{o.d(t,{StickersKeyboardProvider:()=>S});var r=o(785893),a=o(504190),n=o(667294),s=o(497233),i=o(229634),c=o(278524),l=o(829010),d=o(418098),u=o(702594),m=o(171130),h=o(339778),p=o(742697),f=o(546719),v=o(143018),g=o(649136),_=o(90975),k=o(324607),b=o(804377),E=o(563026),y=o(246826),w=o(627062),C=o(805280),I=o(840233),A=o(947246);function S({onPopUpPlay:e,onCatchError:t,onStickerSend:o,onUGCEditClick:S,onVmojiEditClick:x,onUGCReportClick:P,onVmojiCreateClick:M,onStockItemGiftClick:N,onStockItemSettingsClick:R,onVmojiSuggestionClick:T,...O}){const j=(0,w.useAPI)(),{isServiceStockItem:L}=(0,A.useStickersKeyboard)(),{packs:D}=(0,a.useStore)(_.$packs),V=(0,a.useStore)(c.$userPeer),K=(0,a.useStore)(s.$isVisible),U=(0,a.useStore)(g.$stockItems),B=(0,a.useStore)(h.$activePackKey),H=(0,a.useStore)(y.$vmojiPromotion),F=(0,a.useStore)(k.$selectedPackKey),G=(0,n.useRef)(),$=G.current,W=async()=>{try{const[e,t]=await Promise.all([j.cache.ugcInfo.get(),j.cache.ugcPacks.get()]);(0,i.setUGCInfo)(e),(0,l.setUGCPacks)(t)}catch(e){t?.(e)}},z=async()=>{try{const[e,t,o,r,a,n]=await Promise.all([j.cache.global.get(),j.cache.getStockItems({active:!0}),j.cache.imageConfigs.get(),j.cache.recentStickers.get(),j.cache.favoriteStickers.get(),j.cache.avatarSuggestion.get(),W()]);(0,u.setRecentStickers)(r),(0,f.setFavoriteStickers)(a),(0,p.setImageConfigs)(o),(0,E.setAvatarSuggestion)(n),(0,d.setHasAvatar)(j.cache.hasAvatar.get()),(0,y.setVmojiPromotion)(e?.vmoji_promotion||null),(0,v.setStoreNewItemsCount)(e?.store_new_items||0),(0,g.setStockItems)(t)}catch(e){t?.(e)}};return(0,n.useEffect)((()=>{U&&K&&j.cache.reload(),z();const e=j.cache.stickersSync.subscribe(z,!0),t=j.cache.stickersAsync.subscribe(z,!0),o=j.cache.stickersListAsync.subscribe(W,!0),r=j.cache.stickersAsync.subscribe((async e=>{if(e===C.AvatarSuggestionAtomName)(0,E.getAvatarSuggestionFromCache)()}),!1);return()=>{e(),t(),o(),r()}}),[j,K,t]),(0,n.useEffect)((()=>{if((0,b.setStockItemsAvailableToGift)(null),!V)return;const{id:e}=V;var t;t=e,j.store.getStickerPacksAvailableForGift({user_id:t}).then(b.setStockItemsAvailableToGift)}),[V]),(0,n.useEffect)((()=>{void 0!==B&&(0,m.setTabbarActiveTab)(I.Tab.STICKERS)}),[B]),(0,r.jsx)(A.StickersKeyboardContext.Provider,{value:{setSelectedPack:e=>{if(F&&(G.current=F),e){const t=D?.get(e);t&&(j.cache.stickersActiveTab.set(e),(e=>{if(L(e))return;const t=U?.find((({product:{id:t}})=>t===e));t&&U&&(t.product.is_vmoji&&H?.dot_color&&(0,y.clearVmojiPromotionDot)(),t.product.is_new&&(t.product.is_new=!1,j.cache.stockItems.set(U,{notify:!1}),j.store.updateStickerProductsState({product_ids:String(e),key:"is_new",value:"0"})))})(e))}(0,k.setSelectedPackKey)(e)},prevSelectedPackKey:$,onStickerSend:o,onUGCEditClick:S,onUGCReportClick:P,onVmojiEditClick:x,onVmojiCreateClick:M,onStockItemGiftClick:N,onStockItemSettingsClick:R,onVmojiSuggestionClick:T,onPopUpPlay:e},...O})}},455337:(e,t,o)=>{o.d(t,{StickersKeyboardSelectProvider:()=>n});var r=o(785893),a=o(947246);function n({selectPack:e,...t}){return(0,r.jsx)(a.StickersKeyboardSelectContext.Provider,{value:{selectPack:e},...t})}},299106:(e,t,o)=>{o.d(t,{StickerKeyboardRowBanner:()=>l});var r=o(785893),a=o(337111),n=o(659397),s=o(504190),i=o(258774),c=o(981098);const l=({className:e,...t})=>{const o=(0,s.useStore)(i.$variant);return(0,r.jsx)("div",{className:(0,n.classNames)(e,c.rowVariantModifier[o]),children:(0,r.jsx)(a.Banner,{noPadding:!0,...t})})}},981098:(e,t,o)=>{o.d(t,{StickersKeyboardRow:()=>I,rowVariantModifier:()=>y});var r=o(785893),a=o(504190),n=o(816761),s=o(659397),i=o(86894),c=o(667294),l=o(722257),d=o(274648),u=o(39665),m=o(497233),h=o(861915),p=o(742697),f=o(546719),v=o(258774),g=o(627062),_=o(947246),k=o(216608),b=o(310690);const E=new Map([[i.Appearance.LIGHT,l.Theme.LIGHT],[i.Appearance.DARK,l.Theme.DARK]]),y={[v.StickerEmojiKeyboardVariant.WIDE]:b.default.rowWide,[v.StickerEmojiKeyboardVariant.COMPACT]:b.default.rowCompact,[v.StickerEmojiKeyboardVariant.REGULAR]:b.default.rowRegular,[v.StickerEmojiKeyboardVariant.ADAPTIVE]:b.default.rowAdaptive},w=32,C=900;function I({pack:e,stickers:t,columns:o,className:l,...I}){const A=(0,c.useRef)(),S=(0,g.useAPI)(),x=(0,i.useAppearance)(),{onPopUpPlay:P}=(0,_.useStickersKeyboard)(),{addToFavorite:M,removeFromFavorite:N,onStickerSend:R}=(0,_.useStickersKeyboard)(),T=(0,a.useStore)(v.$variant),O=(0,a.useStore)(m.$isVisible),j=(0,a.useStore)(h.$stickersSize),L=(0,a.useStore)(p.$imageConfigs),D=(0,a.useStore)(f.$favoriteStickers);(0,c.useEffect)((()=>(O||clearTimeout(A.current),()=>{clearTimeout(A.current)})),[O]);const V=(t,o=e?.referrer)=>async()=>{const{isBase:e,rawData:r}=t;if(R(t,o),!e||!r)return;const a=await S.cache.recentStickers.get();if(!a)return;if(-1!==a.findIndex((({sticker_id:e})=>e===t.id)))return;const n=a.length>=w?a.length-w+1:0;a.splice(0,n,{...r,inner_type:"base_sticker_new"}),S.cache.recentStickers.set(a,{notify:!1})},K=(t,o)=>{if(!e?.isPack)return()=>{o?N(t):M(t)}},U=e=>t=>{const{isPopup:o,popupLayers:r}=e;clearTimeout(A.current);const{relatedTarget:a}=t;(!a||a instanceof HTMLElement)&&o&&r&&(0,k.isPopUpStickersEnabled)()&&(A.current=window.setTimeout((()=>{P?.(t,r)}),C))},B=()=>{clearTimeout(A.current)},H=(0,c.useMemo)((()=>t?.map((e=>{if(!t||!L)return;const{id:o,isAllowed:a,isPopup:s}=e,{items:i,default_id:c}=L,l=Boolean(D?.find((({sticker_id:e})=>e===o))),m={className:b.default.sticker,name:String(o),size:j,sticker:e,onMouseEnter:U(e),onMouseLeave:B,onTouchStart:U(e),onTouchEnd:B,theme:E.get(x),configs:i,favorite:l,disabled:!a,defaultConfigId:c,onClick:V(e),onFavoriteClick:K(e,l)};return s&&(0,k.isPopUpStickersEnabled)()?(0,r.jsx)(d.StickerRich,{baseStickerProps:m,wrapperProps:{contentClassName:b.default.stickerRich,icon:(0,r.jsx)(n.Icon12PlayCircle,{}),iconPosition:"rightInset"}},o):(0,r.jsx)(u.Sticker,{...m},o)}))||(0,s.createArray)(o).map((e=>(0,r.jsx)(u.Sticker,{className:b.default.sticker,size:j},e)))),[o,t,x,j,D,L]);return(0,r.jsx)("div",{className:(0,s.classNames)(b.default.row,b.default.rowStickers,y[T],l),...I,children:H})}},268122:(e,t,o)=>{o.d(t,{StickersKeyboardRowCard:()=>m});var r=o(785893),a=o(504190),n=o(86894),s=o(531950),i=o(990460),c=o(22378),l=o(981098),d=o(258774),u=o(319972);function m({title:e,image:t,action:o,onHide:m,className:h,...p}){const f=(0,a.useStore)(d.$variant);return(0,r.jsx)("div",{className:l.rowVariantModifier[f],...p,children:(0,r.jsxs)("div",{className:u.default.card,children:[m&&(0,r.jsx)(n.Tappable,{className:u.default.hide,hoverMode:"opacity",activeMode:"opacity",onClick:m,children:(0,r.jsx)(s.Icon24CancelOutline,{})}),t&&(0,r.jsx)("figure",{className:u.default.image,style:{...t,backgroundImage:`url(${t.src})`}}),e&&(0,r.jsx)(i.Title,{className:u.default.title,level:"3",weight:"2",children:(0,r.jsx)(c.InnerHTML,{children:e})}),o&&(0,r.jsx)("div",{className:u.default.action,children:o})]})})}},731447:(e,t,o)=>{o.d(t,{StickersKeyboardUGCRow:()=>m});var r=o(785893),a=o(441430),n=o(108268),s=o(937339),i=o(952258),c=o(639106),l=o(268122),d=o(931643),u=o(947246);function m(){const{translate:e}=(0,n.useLangPack)(),{onUGCEditClick:t}=(0,u.useStickersKeyboard)(),o=(0,s.useHelpHintResource)(i.HelpHintId.STICKERS_UGC_KEYBOARD_ONBOARDING,c.StickersUGCKeyboardOnboardingResourceKey.IMAGE);return(0,r.jsx)(l.StickersKeyboardRowCard,{title:e("stickers_picker_ugc_create_title"),image:{src:o,width:240,height:64},action:t&&(0,r.jsx)(a.Button,{size:"s",mode:"outline",appearance:"accent",onClick:t,children:e("stickers_picker_ugc_create_action")}),onHide:d.hideUGCOnboarding})}},625621:(e,t,o)=>{o.d(t,{StickersKeyboardVmojiRow:()=>m});var r=o(785893),a=o(108268),n=o(86894),s=o(441430),i=o(937339),c=o(952258),l=o(799051),d=o(268122),u=o(947246);function m(e){const t=(0,n.useAppearance)(),{translate:o}=(0,a.useLangPack)(),{onVmojiCreateClick:m}=(0,u.useStickersKeyboard)(),h=(0,i.useHelpHintResource)(c.HelpHintId.KEYBOARD_STICKERS_VMOJI,t===n.Appearance.LIGHT?l.KeyboardStickersVmojiResourceKey.VMOJI_ON_BOARDING_LIGHT:l.KeyboardStickersVmojiResourceKey.VMOJI_ON_BOARDING_DARK);return(0,r.jsx)(d.StickersKeyboardRowCard,{image:{src:h,width:221,height:130},action:m&&(0,r.jsx)(s.Button,{size:"s",mode:"outline",appearance:"accent",onClick:m,children:o("stickers_picker_vmoji_create_character")}),...e})}},574767:(e,t,o)=>{o.d(t,{Tabbar:()=>g});var r=o(785893),a=o(504190),n=o(659397),s=o(667294),i=o(108268),c=o(427323),l=o(783844),d=o(135826),u=o(915629),m=o(334395),h=o(171130),p=o(840233),f=o(997188),v=o(356238);function g({className:e,...t}){const{translate:o}=(0,i.useLangPack)(),{shopIndicatorMode:g,onTabChange:_,onShopClick:k}=(0,f.useStickersEmojiKeyboard)(),b=(0,a.useStore)(m.$visibleTab),{isEmojiActiveTab:E,isStickersActiveTab:y}=(0,a.useStore)(h.$tabbarActiveTabState),w=e=>()=>{(0,h.setTabbarActiveTab)(e),_?.({tab:e})};return(0,s.useEffect)((()=>{b&&(0,h.setTabbarActiveTab)(b)}),[b]),b?null:(0,r.jsxs)("div",{className:(0,n.classNames)(v.default.tabbar,e),...t,children:[(0,r.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-emoji","aria-label":o("stickers_picker_emoji"),className:v.default.item,active:E,onClick:w(p.Tab.EMOJI),children:(0,r.jsx)(c.Icon24SmileOutline,{})}),(0,r.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-stickers","aria-label":o("stickers_picker_stickers"),className:v.default.item,active:y,onClick:w(p.Tab.STICKERS),children:(0,r.jsx)(l.Icon24StickerSmileOutline,{})}),k&&(0,r.jsx)(u.TabbarItem,{"data-testid":"sticker-picker-tabbar-item-shop","aria-label":o("stickers_picker_store"),className:v.default.item,indicator:g,onClick:k,children:(0,r.jsx)(d.Icon24StorefrontOutline,{})})]})}},915629:(e,t,o)=>{o.d(t,{TabbarItem:()=>c,TabbarItemIndicator:()=>r});var r,a=o(785893),n=o(659397),s=o(425061);!function(e){e.NONE="none",e.PRIMARY="primary",e.SECONDARY="secondary",e.DESTRUCTIVE="destructive"}(r||(r={}));const i={[r.NONE]:s.default.indicatorNone,[r.PRIMARY]:s.default.indicatorPrimary,[r.SECONDARY]:s.default.indicatorSecondary,[r.DESTRUCTIVE]:s.default.indicatorDestructive};function c({active:e,indicator:t=r.NONE,className:o,children:c,...l}){return(0,a.jsx)("div",{className:(0,n.classNames)(o,s.default.item,s.default.indicator,i[t],{[s.default.itemActive]:e}),...l,children:c})}},976020:(e,t,o)=>{o.d(t,{View:()=>c});var r=o(785893),a=o(659397),n=o(667294),s=o(830543),i=o(469872);function c({switched:e,children:t,...o}){const c=({target:e})=>{e instanceof HTMLDivElement&&e.dataset.viewPanel&&(0,s.setIsTransitionActive)(!1)};return(0,n.useEffect)((()=>{(0,s.setIsTransitionActive)(!0)}),[e]),(0,r.jsx)("div",{className:i.default.view,...o,children:n.Children.map(t,(t=>(0,n.cloneElement)(t,{"data-view-panel":!0,className:(0,a.classNames)(i.default.panel,{[i.default.panelSwitched]:e}),onTransitionEnd:c})))})}},753209:(e,t,o)=>{o.d(t,{ViewItem:()=>a});var r=o(785893);function a({getRef:e,mounted:t,...o}){return!1===t?null:(0,r.jsx)("div",{ref:e,...o})}},830543:(e,t,o)=>{o.d(t,{$isTransitionActive:()=>n,setIsTransitionActive:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(!1).on(a,((e,t)=>t))},555156:(e,t,o)=>{o.d(t,{POPUP_STICKER_CONTAINER_ID:()=>r});const r="popup-sticker-emoji-keyboard-container"},627062:(e,t,o)=>{o.d(t,{useAPI:()=>n});var r=o(504190),a=o(779434);function n(){return(0,r.useStore)(a.$api)}},808361:(e,t,o)=>{o.d(t,{useElementSize:()=>n});var r=o(659397),a=o(667294);function n(){const[e,t]=(0,a.useState)(null),[o,n]=(0,a.useState)({width:0,height:0});return(0,a.useLayoutEffect)((()=>{const t=()=>{n({width:e?.offsetWidth||0,height:e?.offsetHeight||0})};t();const o=(0,r.debounce)(t,150);return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}}),[e]),{setRef:t,...o}}},761879:(e,t,o)=>{o.d(t,{EmojiKeyboardContext:()=>s,useEmojiKeyboard:()=>c});var r=o(667294),a=o(944930),n=o(627062);const s=(0,r.createContext)({}),i=50;function c(){const e=(0,n.useAPI)(),t=(0,r.useContext)(s),{onEmojiInsert:o}=t;return{...t,insertEmoji:t=>{o?.(t),(t=>{const o=new Map(e.cache.recentEmoji.get()),r=o.get(t)||0;o.set(t,r+1);const n=[...o].reverse().slice(0,i);(0,a.setRecentEmoji)(n),e.cache.recentEmoji.set(n)})(t)}}}},24165:(e,t,o)=>{o.d(t,{useGrid:()=>c});var r=o(667294),a=o(504190),n=o(258774),s=o(808361);const i=new Map;function c({tab:e,itemWidth:t,itemsCount:o=0}){const{setRef:c,width:l}=(0,s.useElementSize)(),d=(0,a.useStore)(n.$variant),u=String([e,d]),m=(0,r.useRef)(i.get(u)||{rows:0,columns:0});return{setGridRef:c,...(0,r.useMemo)((()=>{const e=m.current;if(!l)return e;const r=Math.floor(l/t);if(!r||r===e.columns)return e;const a={rows:Math.ceil(o/r),columns:r};return m.current=a,i.set(u,a),a}),[l,u,t,o])}}},178251:(e,t,o)=>{o.d(t,{useHorizontalScroll:()=>n});var r=o(667294),a=o(734999);function n(e){(0,a.useScrollView)(e),(0,r.useEffect)((()=>{const t=e.current;if(!t)return;const o=e=>{t.scrollLeft+=e.deltaY+e.deltaX};return t.addEventListener("wheel",o,{passive:!0}),()=>{t.removeEventListener("wheel",o)}}),[e])}},734999:(e,t,o)=>{o.d(t,{useScrollView:()=>a});var r=o(667294);function a(e){(0,r.useEffect)((()=>{const t=e.current;t&&t.setAttribute("data-scroll-view","")}),[])}},611680:(e,t,o)=>{o.d(t,{useSmoothScroll:()=>s});var r=o(659397),a=o(667294),n=o(23574);function s(e){const t=(0,a.useRef)(0);return{scrollTo:(0,a.useCallback)((0,r.debounce)((({offset:o=0,duration:r=300}={})=>{t.current=Date.now();let a=e.scrollOffset;const s=t.current,i=()=>{if(t.current!==s)return;const c=Date.now()-s,l=(0,n.easeOutQuart)(Math.min(c/r,1)),d=a+(o-a)*l;c<r&&requestAnimationFrame(i),e.scrollToOffset(d)};requestAnimationFrame(i)}),150),[e])}}},997188:(e,t,o)=>{o.d(t,{StickersEmojiKeyboardContext:()=>i,useStickersEmojiKeyboard:()=>c});var r=o(504190),a=o(667294),n=o(915629),s=o(143018);const i=(0,a.createContext)({});function c(){return{...(0,a.useContext)(i),shopIndicatorMode:(0,r.useStore)(s.$storeNewItemsCount)?n.TabbarItemIndicator.DESTRUCTIVE:void 0}}},947246:(e,t,o)=>{o.d(t,{StickersKeyboardContext:()=>c,StickersKeyboardSelectContext:()=>d,useStickersKeyboard:()=>l,useStickersKeyboardSelect:()=>u});var r=o(504190),a=o(667294),n=o(90975),s=o(546719),i=o(627062);const c=(0,a.createContext)({});function l(){const e=(0,i.useAPI)(),t=(0,r.useStore)(s.$favoriteStickers),{packsGroups:o}=(0,r.useStore)(n.$packs);return{...(0,a.useContext)(c),addToFavorite:async({id:o,isBase:r,rawData:a})=>{if(!r)return;const n=await e.cache.global.get();if(!n)return;const{favorite_stickers_limit:i}=n;if(e.store.addStickersToFavorite({sticker_ids:String(o)}),!t)return;const c=[a,...t].slice(0,i);(0,s.setFavoriteStickers)(c),e.cache.favoriteStickers.set(c)},getGroupIndex:e=>e?o?.findIndex((t=>(Array.isArray(t)||(t=[t]),t.includes(e)))):void 0,removeFromFavorite:async({id:o,isBase:r})=>{if(!r)return;if(e.store.removeStickersFromFavorite({sticker_ids:String(o)}),!t)return;const a=t.findIndex((e=>e.sticker_id===o));if(!(-1!==a))return;const n=[...t];n.splice(a,1),(0,s.setFavoriteStickers)(n),e.cache.favoriteStickers.set(n)},isServiceStockItem:e=>null!=e&&e<0,isGroupedStockItem:e=>o&&void 0!==e&&!o.includes(e)}}const d=(0,a.createContext)({});function u(){return(0,a.useContext)(d)}},376150:(e,t,o)=>{o.d(t,{useSticky:()=>n});var r=o(667294),a=o(945032);function n({rows:e}){const t=(0,r.useRef)(0),o=(0,r.useMemo)((()=>e.reduce(((e,{sticky:t},o)=>(t&&e.push(o),e)),[])),[e]);return{isSticky:e=>t.current===e,rangeExtractor:(0,r.useCallback)((e=>{t.current=[...o].reverse().find((t=>e.startIndex>=t))||0;return[...new Set([t.current,...(0,a.defaultRangeExtractor)(e)])].sort(((e,t)=>e-t))}),[o])}}},191848:(e,t,o)=>{o.d(t,{useAvatarSuggestion:()=>y});var r=o(785893),a=o(504190),n=o(659397),s=o(667294),i=o(779434),c=o(497233),l=o(563026),d=o(171130),u=o(193634),m=o(436288),h=o(376351),p=o(718367),f=o(968912),v=o(299106),g=o(840233),_=o(272574),k=o(473162),b=o(947246),E=o(591991);const y=()=>{const{onVmojiSuggestionClick:e}=(0,b.useStickersKeyboard)(),t=(0,a.useStore)(i.$api),o=(0,a.useStore)(c.$isVisible),y=(0,a.useStore)(d.$tabbarActiveTab),w=(0,a.useStore)(l.$avatarSuggestion),C=(0,a.useStore)(u.$avatarSuggestionTab),I=(0,a.useStore)(d.$tabbarActiveTabState),A=(0,a.useStore)(m.$avatarSuggestionBannerPackIndex),S=(0,a.useStore)(h.$avatarSuggestionIsViewed),x=(0,a.useStore)(E.$avatarSuggestionDisabled);(0,s.useEffect)((()=>{o||((0,m.setAvatarSuggestionPackIndex)(null),(0,u.setAvatarSuggestionTab)(null),(0,h.setAvatarSuggestionIsViewed)(!1),(0,E.setAvatarSuggestionDisabled)(!1))}),[o]);const P=(0,s.useCallback)((0,n.debounce)((e=>{(0,m.setAvatarSuggestionPackIndex)(e)}),100),[]),M=(0,s.useCallback)((0,n.debounce)((e=>(0,u.setAvatarSuggestionTab)(e)),100),[]),N=(0,s.useCallback)((0,n.debounce)((e=>(0,E.setAvatarSuggestionDisabled)(e)),100),[]),R=a=>{if(!e||x)return null;if(!o||S||!Boolean(w)&&t.cache.reloading||(0,h.setAvatarSuggestionIsViewed)(!0),!w||null===a)return null;null===C&&M(y),null===A&&P(a);const n=I.isStickersActiveTab?v.StickerKeyboardRowBanner:f.EmojiKeyboardRowBanner;return(0,r.jsx)(p.AvatarSuggestionRow,{Component:n},w.id)};return{getAvatarSuggestionStickerRow:(e,t=!1)=>{if(C&&C!==g.Tab.STICKERS||y!==g.Tab.STICKERS)return null;if(x||N(t),t)return null;const o=R(e);return o?{type:k.StickersKeyboardElementType.ROW,element:o}:null},getAvatarSuggestionEmojiRow:e=>{if(C&&C!==g.Tab.EMOJI||y!==g.Tab.EMOJI)return null;const t=R(e);return t?{type:_.EmojiKeyboardElementType.ROW,element:t}:null},bannerPackIndex:A,avatarSuggestion:w,avatarSuggestionTab:C}}},974570:(e,t,o)=>{o.d(t,{useCalculateSelectedEmojiPackIndex:()=>s});var r=o(667294),a=o(504190),n=o(883935);const s=(e,t)=>{const{range:o}=e,s=(0,a.useStore)(n.$selectedEmojiPackIndex);(0,r.useEffect)((()=>{const o=e.calculateRange();if(!o)return;const{startIndex:r}=o,a=t.findIndex((e=>e>=r)),i=a-1,c=t[a],l=t[i],d=Math.abs(l-r)<Math.abs(c-r)?i:a;s!==d&&(0,n.setSelectedEmojiPackIndex)(d)}),[o,t])}},944930:(e,t,o)=>{o.d(t,{setRecentEmoji:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent();r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},842263:(e,t,o)=>{o.d(t,{$selectedEmoji:()=>n,setSelectedEmoji:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},883935:(e,t,o)=>{o.d(t,{$selectedEmojiPackIndex:()=>n,setSelectedEmojiPackIndex:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(0).on(a,((e,t)=>t))},205537:(e,t,o)=>{o.d(t,{$emojiPadding:()=>c});var r=o(798116),a=o(643060),n=o(258774);const s={[n.StickerEmojiKeyboardVariant.WIDE]:9,[n.StickerEmojiKeyboardVariant.COMPACT]:8,[n.StickerEmojiKeyboardVariant.REGULAR]:12,[n.StickerEmojiKeyboardVariant.ADAPTIVE]:9},i=a.stickersEmojiKeyboard.createEvent(),c=a.stickersEmojiKeyboard.createStore(s[n.DEFAULT_VARIANT]);(0,r.sample)({clock:n.setVariantOptions,source:n.$variant,fn:e=>s[e],target:i})},591991:(e,t,o)=>{o.d(t,{$avatarSuggestionDisabled:()=>n,setAvatarSuggestionDisabled:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(!1).on(a,((e,t)=>t))},563026:(e,t,o)=>{o.d(t,{$avatarSuggestion:()=>l,getAvatarSuggestionFromCache:()=>i,setAvatarSuggestion:()=>s});var r=o(798116),a=o(779434),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createEvent(),c=n.stickersEmojiKeyboard.createEffect((async e=>{const t=await e.cache.avatarSuggestion.get();s(t)})),l=n.stickersEmojiKeyboard.createStore(null).on(s,((e,t)=>t));(0,r.sample)({clock:i,source:a.$api,target:c})},376351:(e,t,o)=>{o.d(t,{$avatarSuggestionIsViewed:()=>l,setAvatarSuggestionIsViewed:()=>c});var r=o(798116),a=o(773527),n=o(643060),s=o(805280),i=o(216608);const c=n.stickersEmojiKeyboard.createEvent(),l=n.stickersEmojiKeyboard.createStore(!1).on(c,((e,t)=>t));(0,r.sample)({clock:c,filter:e=>e&&(0,i.isPromoVmojiCounterEnabled)(),fn:()=>s.HelpHintPromoTypes.VMOJI_AVATAR_SUGGESTION,target:a.markAsViewedHelpHint})},436288:(e,t,o)=>{o.d(t,{$avatarSuggestionBannerPackIndex:()=>n,setAvatarSuggestionPackIndex:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},193634:(e,t,o)=>{o.d(t,{$avatarSuggestionTab:()=>n,setAvatarSuggestionTab:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},600692:(e,t,o)=>{o.d(t,{hideHelpHint:()=>s});var r=o(798116),a=o(779434),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createEffect((({api:e,hintId:t})=>e.cache.hideHelpHint(t)));(0,r.sample)({clock:s,source:a.$api,fn:(e,t)=>({api:e,hintId:t}),target:i})},773527:(e,t,o)=>{o.d(t,{markAsViewedHelpHint:()=>s});var r=o(798116),a=o(779434),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createEffect((({api:e,promoId:t})=>{e.cache.markHelpHintAsViewed(t)}));(0,r.sample)({clock:s,source:a.$api,fn:(e,t)=>({api:e,promoId:t}),target:i})},34374:(e,t,o)=>{o.d(t,{setChatPeer:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent();r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},670834:(e,t,o)=>{o.d(t,{$peerId:()=>i,PeerGate:()=>c});var r=o(798116),a=o(504190),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createStore(null).on(s,((e,{peerId:t})=>t||null)),c=(0,a.createGate)();(0,r.forward)({from:c.state,to:s})},278524:(e,t,o)=>{o.d(t,{$userPeer:()=>n,setUserPeer:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},742697:(e,t,o)=>{o.d(t,{$imageConfigs:()=>n,setImageConfigs:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},339778:(e,t,o)=>{o.d(t,{$activePackKey:()=>i,ActivePackKeyGate:()=>c,setActivePackKeyOptions:()=>s});var r=o(798116),a=o(504190),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createStore(null).on(s,((e,{activePackKey:t})=>t)),c=(0,a.createGate)();(0,r.forward)({from:c.state,to:s})},324607:(e,t,o)=>{o.d(t,{$selectedPackKey:()=>n,setSelectedPackKey:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},804377:(e,t,o)=>{o.d(t,{$stockItemsAvailableToGift:()=>n,setStockItemsAvailableToGift:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(null).on(a,((e,t)=>t))},143018:(e,t,o)=>{o.d(t,{$storeNewItemsCount:()=>n,setStoreNewItemsCount:()=>a});var r=o(643060);const a=r.stickersEmojiKeyboard.createEvent(),n=r.stickersEmojiKeyboard.createStore(0).on(a,((e,t)=>t))},931643:(e,t,o)=>{o.d(t,{hideUGCOnboarding:()=>i});var r=o(798116),a=o(779434),n=o(229634),s=o(643060);const i=s.stickersEmojiKeyboard.createEvent(),c=s.stickersEmojiKeyboard.createEffect((e=>e.cache.hideUGCOnboarding()));(0,r.sample)({clock:i,source:a.$api,target:c}),(0,r.sample)({source:c.doneData,filter:e=>e,target:n.reloadUGCInfo})},861915:(e,t,o)=>{o.d(t,{$stickersHorizontalGap:()=>f,$stickersKeyboardVerticalOrder:()=>v,$stickersSize:()=>h,$stickersVerticalGap:()=>p});var r=o(798116),a=o(643060),n=o(258774);const s={[n.StickerEmojiKeyboardVariant.WIDE]:86,[n.StickerEmojiKeyboardVariant.COMPACT]:80,[n.StickerEmojiKeyboardVariant.REGULAR]:92,[n.StickerEmojiKeyboardVariant.ADAPTIVE]:86},i={[n.StickerEmojiKeyboardVariant.WIDE]:8,[n.StickerEmojiKeyboardVariant.COMPACT]:6,[n.StickerEmojiKeyboardVariant.REGULAR]:8,[n.StickerEmojiKeyboardVariant.ADAPTIVE]:8},c={[n.StickerEmojiKeyboardVariant.WIDE]:6,[n.StickerEmojiKeyboardVariant.COMPACT]:8,[n.StickerEmojiKeyboardVariant.REGULAR]:8,[n.StickerEmojiKeyboardVariant.ADAPTIVE]:6},l={[n.StickerEmojiKeyboardVariant.WIDE]:"column",[n.StickerEmojiKeyboardVariant.COMPACT]:"column",[n.StickerEmojiKeyboardVariant.REGULAR]:"column",[n.StickerEmojiKeyboardVariant.ADAPTIVE]:"column-reverse"},d=a.stickersEmojiKeyboard.createEvent(),u=a.stickersEmojiKeyboard.createEvent(),m=a.stickersEmojiKeyboard.createEvent(),h=a.stickersEmojiKeyboard.createStore(s[n.DEFAULT_VARIANT]),p=a.stickersEmojiKeyboard.createStore(c[n.DEFAULT_VARIANT]),f=a.stickersEmojiKeyboard.createStore(i[n.DEFAULT_VARIANT]),v=a.stickersEmojiKeyboard.createStore(l[n.DEFAULT_VARIANT]);(0,r.sample)({clock:n.setVariantOptions,source:n.$variant,fn:e=>s[e],target:d}),(0,r.sample)({clock:n.setVariantOptions,source:n.$variant,fn:e=>c[e],target:u}),(0,r.sample)({clock:n.setVariantOptions,source:n.$variant,fn:e=>i[e],target:m}),(0,r.sample)({clock:n.setVariantOptions,source:n.$variant,fn:e=>l[e],target:v})},246826:(e,t,o)=>{o.d(t,{$vmojiPromotion:()=>l,clearVmojiPromotionDot:()=>i,setVmojiPromotion:()=>s});var r=o(798116),a=o(779434),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createEvent(),c=n.stickersEmojiKeyboard.createEffect((async({api:e,vmojiPromotion:t})=>{if(t)return e.cache.clearVmojiPromotionDot()})),l=n.stickersEmojiKeyboard.createStore(null).on(s,((e,t)=>t)).on(c.doneData,(e=>({...e,dot_color:void 0}))),d=(0,r.combine)(a.$api,l,((e,t)=>({api:e,vmojiPromotion:t})));(0,r.sample)({clock:i,source:d,target:c})},258774:(e,t,o)=>{o.d(t,{$variant:()=>l,DEFAULT_VARIANT:()=>c,StickerEmojiKeyboardVariant:()=>r,VariantGate:()=>d,setVariantOptions:()=>i});var r,a=o(798116),n=o(504190),s=o(643060);!function(e){e.WIDE="wide",e.COMPACT="compact",e.REGULAR="regular",e.ADAPTIVE="adaptive"}(r||(r={}));const i=s.stickersEmojiKeyboard.createEvent(),c=r.WIDE,l=s.stickersEmojiKeyboard.createStore(c).on(i,((e,{variant:t})=>t)),d=(0,n.createGate)();(0,a.forward)({from:d.state,to:i})},497233:(e,t,o)=>{o.d(t,{$isVisible:()=>i,VisibleGate:()=>c});var r=o(798116),a=o(504190),n=o(643060);const s=n.stickersEmojiKeyboard.createEvent(),i=n.stickersEmojiKeyboard.createStore(!1).on(s,((e,{isVisible:t})=>t)),c=(0,a.createGate)();(0,r.forward)({from:c.state,to:s})},334395:(e,t,o)=>{o.d(t,{$visibleTab:()=>c,$visibleTabState:()=>l,VisibleTabGate:()=>d});var r=o(504190),a=o(798116),n=o(643060),s=o(840233);const i=n.stickersEmojiKeyboard.createEvent(),c=n.stickersEmojiKeyboard.createStore(null).on(i,((e,{visibleTab:t})=>t??null)),l=(0,a.combine)(c,(e=>({isEmojiVisibleTab:e===s.Tab.EMOJI,isStickersVisibleTab:e===s.Tab.STICKERS}))),d=(0,r.createGate)();(0,a.forward)({from:d.state,to:i})},23574:(e,t,o)=>{function r(e){return 1-Math.pow(1-e,4)}o.d(t,{easeOutQuart:()=>r})},213126:(e,t,o)=>{function r(e){return encodeURIComponent(e.replace(/\uFE0F/giu,"")).replace(/%/gi,"").toLowerCase()}o.d(t,{unicodeToByteHex:()=>r})},961232:(e,t,o)=>{o.d(t,{PopupRoot:()=>h});var r=o(785893),a=o(433581),n=o(667294),s=o(613193),i=o(984013),c=o(557189),l=o(588267),d=o(918414),u=o(436253),m=o(30705);const h=(0,a.observer)((({isVisible:e=!0,allowUseCommon:t=!1,isUseAsFullscreen:o=!1,position:a=d.POPUP_POSITION_DEFAULT_VALUE,HtmlElement:h="div",setElementRef:p,children:f,className:v,popUpStore:g,id:_,...k})=>{const[b,E]=(0,n.useState)(null),y=(0,n.useMemo)((()=>new u.PopupStickerService),[]);return(0,n.useEffect)((()=>{e||g?.destroyByRemove()}),[e]),(0,n.useEffect)((()=>()=>{g?.destroyByRemove()}),[]),(0,r.jsx)(h,{id:_,ref:e=>{if((0,l.setRef)(e,p),!e)return void E(null);const r=(0,c.getDataAttrs)({popupStickerPosition:a,popupStickerContainerId:e.id,popupStickerUseCommon:t.toString(),popupStickerFullScreenContainer:o?e.id:void 0});for(const[t,o]of Object.entries(r))e.setAttribute(t,o);E(o?e:document.querySelector(`#${e.getAttribute(d.FULL_SCREEN_CONTAINER_DATA_PROPERTY)}`)||document.querySelector(d.FULL_SCREEN_DATA_DEFAULT_VALUE))},className:v||m.default.wrapper,...k,children:(0,r.jsxs)(i.PopupProvider,{popupStore:g||y,children:[b&&e&&(0,r.jsx)(s.PopUpPortal,{portalElement:b}),f]})})}))},588267:(e,t,o)=>{o.d(t,{setRef:()=>r});const r=(e,t)=>{t&&("function"==typeof t?t(e):t.hasOwnProperty("current")&&(t.current=e))}},487462:(e,t,o)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},r.apply(this,arguments)}o.d(t,{default:()=>r})},894578:(e,t,o)=>{o.d(t,{default:()=>a});var r=o(589611);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.default)(e,t)}},263366:(e,t,o)=>{function r(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}o.d(t,{default:()=>r})},589611:(e,t,o)=>{function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}o.d(t,{default:()=>r})},53416:(e,t,o)=>{o.d(t,{nanoid:()=>r});let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},997650:(e,t,o)=>{o.d(t,{observe:()=>l,useInView:()=>d});var r=o(667294);const a=new Map,n=new WeakMap;let s,i=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(o=e.root,o?(n.has(o)||(i+=1,n.set(o,i.toString())),n.get(o)):"0"):e[t]}`;var o})).toString()}function l(e,t,o={},r=s){if(void 0===window.IntersectionObserver&&void 0!==r){const a=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof o.threshold?o.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:n,observer:i,elements:l}=function(e){let t=c(e),o=a.get(t);if(!o){const r=new Map;let n;const s=new IntersectionObserver((t=>{t.forEach((t=>{var o;const a=t.isIntersecting&&n.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=a),null==(o=r.get(t.target))||o.forEach((e=>{e(a,t)}))}))}),e);n=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),o={id:t,observer:s,elements:r},a.set(t,o)}return o}(o);let d=l.get(e)||[];return l.has(e)||l.set(e,d),d.push(t),i.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(l.delete(e),i.unobserve(e)),0===l.size&&(i.disconnect(),a.delete(n))}}r.Component;function d({threshold:e,delay:t,trackVisibility:o,rootMargin:a,root:n,triggerOnce:s,skip:i,initialInView:c,fallbackInView:d,onChange:u}={}){var m;const[h,p]=r.useState(null),f=r.useRef(),[v,g]=r.useState({inView:!!c,entry:void 0});f.current=u,r.useEffect((()=>{if(i||!h)return;let r;return r=l(h,((e,t)=>{g({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&s&&r&&(r(),r=void 0)}),{root:n,rootMargin:a,threshold:e,trackVisibility:o,delay:t},d),()=>{r&&r()}}),[Array.isArray(e)?e.toString():e,h,n,a,s,i,o,d,t]);const _=null==(m=v.entry)?void 0:m.target,k=r.useRef();h||!_||s||i||k.current===_||(k.current=_,g({inView:!!c,entry:void 0}));const b=[p,v.inView,v.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}}}]);try{stManager.done("dist/web/chunks/986547c8.87cbfef5.js")}catch(e){}