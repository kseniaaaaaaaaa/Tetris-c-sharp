"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[60170],{565994:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"AudioCatalogMusicMixBlockComponent-module__root--BUW0a",default:"AudioCatalogMusicMixBlockComponent-module__default--YKYt9",secondary:"AudioCatalogMusicMixBlockComponent-module__secondary--lCndX",description:"AudioCatalogMusicMixBlockComponent-module__description--vF3Wv",wrap:"AudioCatalogMusicMixBlockComponent-module__wrap--zgLZ8"}},39655:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"Lottie-module__root--VbKrX",canvas:"Lottie-module__canvas--_tt5W"}},190328:(t,e,i)=>{i.r(e),i.d(e,{UiScroll:()=>h,default:()=>c});var s=i(15042),o=i(902947),a=i(636322),r=i(70689),n=i(93367),l=i(97875),d=i(565211);class h{init(){if(this.options.stopScrollPropagation&&this.fixBlocker(),!this.inited){if(!this.el.container.scrollWidth||this.disabled)return;this.fixSize(!0),this.options.autoresize&&this.startResizeListening(),this.options.global||cur.destroy.push(this.destroy.bind(this)),this.inited=!0}return this.update(!0),this.api}addEvent(t,e,i,s){return this.removeEvents.push([t,e,i]),(0,n.addEvent)(t,e,i,void 0,void 0,s?{passive:!0}:void 0),i}destroy(){if(this.disabled=!0,this.fixSize(),this.animation&&this.animation.stop(),this.moreTimeout&&clearTimeout(this.moreTimeout),this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,a.each)(this.removeEvents,(function(t,e){n.removeEvent.apply(null,e)})),this.el.overflow.parentNode==this.el.container){const t=(0,r.cf)();for(;this.el.content.firstChild;)t.appendChild(this.el.content.firstChild);this.el.container.appendChild(t)}return(0,r.removeData)(this.el.container,"ui-scroll"),this.el.container.className=this.el.container.className.replace(/\bui_scroll_.+?\b/g," "),(0,a.each)(this.removeElements,(function(t,e){(0,r.re)(e)})),this.el.container.scrollTop=this.api.data.scrollTop,delete this.el.container.__uiScroll__,this.api}updateAbove(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.el.outer.scrollHeight-this.el.outer.scrollTop-this.el.overflow.offsetHeight;t(),this.el.outer.scrollTop=this.el.outer.scrollHeight-this.el.overflow.offsetHeight-e}return this.api}updateBelow(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;t(),e&&this.scrollBottom(!1)}return this.api}fixBlocker(){s.browser.chrome&&!this.options.noForceReFlow&&this.forceReFlow(),this.el.blocker.scrollTop=this.blockerScrollTop}forceReFlow(){this.el.blocker.style.display="inline-block",this.el.blocker.offsetHeight,this.el.blocker.style.display=""}fixSize(t){this.options.native||(t&&null==this.fixSizeDefault&&(this.fixSizeDefault=this.el.container.style.width),(0,r.setStyle)(this.el.container,"width",t?(0,r.getSize)(this.el.container,!0)[0]||this.fixSizeDefault||"":this.fixSizeDefault||""))}emitEvent(t){this.disabled||this.inited&&this.emitter.emitEvent(t,[this.api])}static scrollEventDelta(t){let e=0;const i=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;return"wheel"==t.type?e=t.deltaY:void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*-t.wheelDeltaY,s.browser.mac&&s.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*-t.wheelDelta:t.detail&&2===t.axis&&(e=t.detail),e*(1==i?15:2==i?450:1)}isScrollEventUnused(t){return h.scrollEventDelta(t)>0?!this.api.data.scrollBottom:!this.api.data.scrollTop}resize(t){if(!t&&this.options.preserveEdgeBelow){const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;this.update(!0)&&(this.emitEvent("resize"),e&&this.scrollBottom(),this.options.stopScrollPropagation&&!t&&this.fixBlocker())}else this.update(!0)&&(this.options.stopScrollPropagation&&!t&&this.fixBlocker(),this.emitEvent("resize"))}disable(t){return this.disabled=!!t,t?(this.animation&&this.animation.stop(),this.fixSize()):(this.fixSize(!0),this.options.stopScrollPropagation&&this.fixBlocker(),this.update(!0)),(0,r.toggleClass)(this.el.container,"ui_scroll_disabled",this.disabled),this.api}dragstart(t){if(!(this.disabled||this.dragging||this.options.native))return t||(t=window.event),this.dragging=!0,this.animation&&this.animation.stop(),this.options.reversed&&(this.noMore=!0),(0,n.addEvent)(document,"mouseup contextmenu",this.dragstartHandler=this.dragstop.bind(this)),(0,n.addEvent)(document,"mousemove",this.dragHandler=this.drag.bind(this)),this.dragScroll=this.options.reversed?this.api.data.scrollBottom:this.api.data.scrollTop,this.dragY=t.screenY,(0,n.cancelEvent)(t),this.emitEvent("dragstart"),this.api}dragstop(t){if(!this.disabled&&this.dragging&&!this.options.native){if(t||(t=window.event),this.dragging=!1,this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,r.setStyle)(document.body,"cursor",""),(0,r.removeClass)(this.el.container,"ui_scroll_dragging"),this.dragged)this.noMore&&(this.noMore=!1,this.more());else{this.options.reversed&&(this.noMore=!0);const e=(t.pageY-(0,r.getXY)(this.el.barOuter)[1]-this.barInnerHeight/2)*(Math.max(this.options.minContentHeight,this.api.data.scrollHeight)-this.api.data.viewportHeight)/(this.barOuterHeight-this.barInnerHeight);this.scrollTop(!1,e,0,function(){this.noMore&&(this.noMore=!1,this.more())}.bind(this))}return this.dragged=!1,t&&"contextmenu"!==t.type&&(0,n.cancelEvent)(t),this.emitEvent("dragstop"),this.api}}drag(t){if(this.disabled||!this.dragging||this.options.native)return;t||(t=window.event);const e=(t.screenY-this.dragY)*(this.api.data.scrollHeight/this.el.barOuter.scrollHeight);return this.el.outer.scrollTop=this.options.reversed?this.el.outer.scrollHeight-this.el.overflow.offsetHeight-this.dragScroll+e:this.dragScroll+e,this.dragged||(this.dragged=!0,(0,r.setStyle)(document.body,"cursor","pointer"),(0,r.addClass)(this.el.container,"ui_scroll_dragging")),(0,n.cancelEvent)(t),this.emitEvent("drag"),this.api}scroll(t,e,i){return this.animation&&this.animation.stop(),this.el.outer.scrollTop==t&&this.update(!0),e?(e="number"!=typeof e||!isFinite(e)||e%1?300:Math.abs(e),this.animation=new l.Fx.Base({scrollTop:this.el.outer.scrollTop},{transition:l.Fx.Transitions.easeOutCubic,onStep:function(t){this.el.outer.scrollTop=t.scrollTop}.bind(this),duration:e,onComplete:(0,a.isFunction)(i)?i.pbind(this.api):void 0}).start({scrollTop:this.el.outer.scrollTop},{scrollTop:t})):(this.el.outer.scrollTop=t,(0,a.isFunction)(i)&&i(this.api)),this.api}scrollTop(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll((0,a.intval)(e),i,s)}scrollBottom(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollHeight-this.el.overflow.offsetHeight-(0,a.intval)(e),i,s)}scrollBy(t,e,i){if(!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollTop+(0,a.intval)(t),e,i)}scrollIntoView(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),(e=(0,d.getScrollElement)(e))&&e.compareDocumentPosition&&e.compareDocumentPosition(this.el.content)&Node.DOCUMENT_POSITION_CONTAINS){const t=(0,r.getXY)(e)[1],o=(0,r.getXY)(this.el.overflow)[1],n=(0,r.getSize)(e)[1];if(t<=o&&t+n>=o+this.api.data.viewportHeight||t>=o&&t+n<=o+this.api.data.viewportHeight)(0,a.isFunction)(s)&&(i?setTimeout(s.bind(this.api),0):s(this.api));else if(n>this.api.data.viewportHeight||t<o)this.scrollTop(!1,t-o+this.api.data.scrollTop-(this.options.shadows?(0,r.getSize)(this.el.shadowTop)[1]:0),i,s);else{const e=this.options.shadows?(0,r.getSize)(this.el.shadowBottom)[1]:0;this.scrollTop(!1,t-o+this.api.data.scrollTop+n-this.api.data.viewportHeight+e,i,s)}}return this.api}update(t){let e,i;this.el.container&&!this.el.container.updateScroll&&(this.el.container.updateScroll=this.update.bind(this,!1));const s=this.el.outer.scrollTop;if(this.inited&&!this.disabled&&(t&&(e=this.el.inner.offsetHeight,this.api.data.viewportHeight!==(this.api.data.viewportHeight=this.el.overflow.offsetHeight)||this.api.data.scrollHeight!==e)||this.api.data.scrollTop!==s)){if(t&&(this.api.data.scrollHeight=e),this.api.data.scrollTop=Math.max(0,Math.min(this.api.data.scrollHeight-this.api.data.viewportHeight,Math.max(0,s))),this.api.data.scrollBottom=Math.max(0,this.api.data.scrollHeight-this.api.data.scrollTop-this.api.data.viewportHeight),!this.options.native){if(e=Math.max(this.options.minContentHeight,this.api.data.scrollHeight),i=e<=this.api.data.viewportHeight,!i){const i=this.el.barOuter.offsetHeight;(t||this.barOuterHeight!==i)&&(this.barOuterHeight=i,this.barInnerHeight=Math.max(this.options.barMinHeight,this.barOuterHeight*this.api.data.viewportHeight/e),this.el.barInner.style.height=this.barInnerHeight+"px"),(0,d.nextFrame)((()=>{const t=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight);this.el.barInner.style.transform=`translateY(${t}px)`}))}this.options.shadows&&(this.shadowTop!=(this.api.data.scrollTop&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_top_visible",this.shadowTop=this.api.data.scrollTop&&!i),this.shadowBottom!=(this.api.data.scrollBottom&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_bottom_visible",this.shadowBottom=this.api.data.scrollBottom&&!i)),this.unnecessary!==i&&((0,r.toggleClass)(this.el.container,"ui_scroll_unnecessary",i),this.unnecessary=i,this.options.stopScrollPropagation&&this.fixBlocker(),i&&this.barInnerHeight&&this.barOuterHeight&&(0,d.nextFrame)(function(t){this.el.barInner.style.height=100*this.barInnerHeight/this.barOuterHeight+"%";const i=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight)*100/this.barInnerHeight;this.el.barInner.style.transform=`translateY(${i}%)`}.bind(this)))}return this.emitEvent("update"),(!this.options.reversed||s>=0)&&this.more(),!0}return!1}more(){const t=this.options.reversed?this.api.data.scrollTop:this.api.data.scrollBottom,e=null!==this.options.onmoreThreshold?this.options.onmoreThreshold:2*this.api.data.viewportHeight;!this.noMore&&t<=e&&this.emitEvent("more")}constructor(t,e){if(!(t=(0,d.getScrollElement)(t)))throw new Error("uiScroll container is undefined");t.__uiScroll__&&t.__uiScroll__.destroy(),this.options=(0,a.extend)({global:!1,native:!1,theme:"default",reversed:!1,autoresize:!0,preserveEdgeBelow:!1,barMinHeight:30,preserveEdgeBelowThreshold:20,stopScrollPropagation:!0,stopScrollPropagationAlways:!1,minContentHeight:0,onmoreThreshold:null,hidden:!1,shadows:!1,scrollElements:[],onresize:null,onscroll:null,onscrollstart:null,onscrollstop:null,ondrag:null,ondragstart:null,ondragstop:null,onupdate:null,onmore:null,noForceReFlow:!1},e),this.options.native&&(this.options.shadows=!1),s.browser.mobile&&(this.options.stopScrollPropagation=!1),(0,o.isArray)(this.options.scrollElements)||(this.options.scrollElements=[]),this.removeEvents=[],this.removeElements=[],this.dragging=!1,this.dragged=!1,this.released=!0,this.noMore=!1,this.dragY=null,this.dragScroll=null,this.shadowTop=!1,this.shadowBottom=!1,this.unnecessary=!1,this.disabled=!1,this.stopped=!0,this.stoppedTimeout=null,this.fixSizeDefault=null,this.animation=null,this.barOuterHeight=null,this.barInnerHeight=null,this.currentFrame=null,this.blockerScrollTop=500,this.emitter=new EventEmitter,(0,a.isFunction)(this.options.onresize)&&this.emitter.addListener("resize",this.options.onresize),(0,a.isFunction)(this.options.onscroll)&&this.emitter.addListener("scroll",this.options.onscroll),(0,a.isFunction)(this.options.onscrollstart)&&this.emitter.addListener("scrollstart",this.options.onscrollstart),(0,a.isFunction)(this.options.onscrollstop)&&this.emitter.addListener("scrollstop",this.options.onscrollstop),(0,a.isFunction)(this.options.ondrag)&&this.emitter.addListener("drag",this.options.ondrag),(0,a.isFunction)(this.options.ondragstart)&&this.emitter.addListener("dragstart",this.options.ondragstart),(0,a.isFunction)(this.options.ondragstop)&&this.emitter.addListener("dragstop",this.options.ondragstop),(0,a.isFunction)(this.options.onupdate)&&this.emitter.addListener("update",this.options.onupdate),(0,a.isFunction)(this.options.onmore)&&this.emitter.addListener("more",this.options.onmore),this.el={container:t,overflow:(0,r.ce)("div",{className:"ui_scroll_overflow"}),outer:(0,r.ce)("div",{className:"ui_scroll_outer"},{margin:this.options.stopScrollPropagation?this.blockerScrollTop+"px 0":void 0}),inner:(0,r.ce)("div",{className:"ui_scroll_inner tt_noappend"}),shadowTop:(0,r.ce)("div",{className:"ui_scroll_shadow_top"}),shadowBottom:(0,r.ce)("div",{className:"ui_scroll_shadow_bottom"}),content:(0,r.ce)("div",{className:"ui_scroll_content clear_fix"}),barContainer:(0,r.ce)("div",{className:"ui_scroll_bar_container"}),barOuter:(0,r.ce)("div",{className:"ui_scroll_bar_outer"}),barInner:(0,r.ce)("div",{className:"ui_scroll_bar_inner"})},(0,r.data)(this.el.container,"ui-scroll",this);const i=(0,r.cf)(),l=["ui_scroll_container"];for((0,a.each)((0,o.isArray)(this.options.theme)?this.options.theme:(0,a.trim)(this.options.theme+"").split(/\s+/),(function(t,e){e&&l.push("ui_scroll_"+e+"_theme")})),(0,r.addClass)(this.el.container,l.join(" ")),this.options.hidden&&(0,r.addClass)(this.el.container,"ui_scroll_hidden");this.el.container.firstChild;)this.el.content.appendChild(this.el.container.firstChild);if(this.el.outer.appendChild(this.el.inner),this.el.inner.appendChild(this.el.content),this.options.stopScrollPropagation?(this.el.blocker=(0,r.ce)("div",{className:"ui_scroll_blocker"}),this.addEvent(this.el.blocker,"scroll",this.fixBlocker.bind(this),!0),this.el.blocker.appendChild(this.el.outer),this.el.overflow.appendChild(this.el.blocker)):this.el.overflow.appendChild(this.el.outer),i.appendChild(this.el.overflow),this.options.native?(0,r.addClass)(this.el.container,"ui_scroll_native"):(this.el.barOuter.appendChild(this.el.barInner),this.el.barContainer.appendChild(this.el.barOuter),i.appendChild(this.el.barContainer),this.options.shadows&&(this.el.overflow.appendChild(this.el.shadowTop),this.el.overflow.appendChild(this.el.shadowBottom)),s.browser.mobile||this.options.scrollElements.push(this.el.barContainer)),this.options.autoresize){const t=(0,d.addResizeSensor)(this.el.inner,this.resize.bind(this,!0)),e=(0,d.addResizeSensor)(this.el.overflow,this.resize.bind(this,!1));this.removeElements.push(t[0]),this.removeElements.push(e[0]),this.startResizeListening=function(){t[1](),e[1]()}}this.removeElements.push(this.el.overflow,this.el.barContainer),this.el.container.appendChild(i),this.options.reversed&&(this.el.outer.scrollTop=this.el.outer.scrollHeight),this.el.container.__uiScroll__=this.api={container:this.el.container,scroller:this.el.outer,content:this.el.content,emitter:this.emitter,ondragstart:this.dragstart.bind(this),ondragstop:this.dragstop.bind(this),ondrag:this.drag.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this,!0),enable:this.disable.bind(this,!1),scrollTop:this.scrollTop.bind(this,!0),scrollBottom:this.scrollBottom.bind(this,!0),scrollBy:this.scrollBy.bind(this),scrollIntoView:this.scrollIntoView.bind(this,!0),update:this.init.bind(this),updateAbove:this.updateAbove.bind(this),updateBelow:this.updateBelow.bind(this),data:{scrollTop:null,scrollBottom:null,scrollHeight:null,viewportHeight:null}},this.init();const c="onwheel"in this.el.outer?"wheel":void 0!==document.onmousewheel?"mousewheel":s.browser.mozilla?"MozMousePixelScroll":"DOMMouseScroll";return this.addEvent(this.el.container,c,function(t){this.animation&&this.animation.stop(),!this.disabled&&this.options.stopScrollPropagation&&(this.unnecessary?this.options.stopScrollPropagationAlways&&(0,n.cancelEvent)(t):this.isScrollEventUnused(t)?(0,n.cancelEvent)(t):(0,n.stopEvent)(t))}.bind(this),!this.options.stopScrollPropagation),this.options.native||this.addEvent(this.el.barContainer,"mousedown",this.dragstart.bind(this)),(0,a.each)(this.options.scrollElements,function(t,e){this.addEvent(e,c,function(t){this.disabled||this.unnecessary||(this.scrollBy(h.scrollEventDelta(t)),!this.options.stopScrollPropagation&&this.isScrollEventUnused(t)||(0,n.cancelEvent)(t))}.bind(this))}.bind(this)),this.options.reversed&&this.addEvent(this.el.container,"mousedown touchstart pointerdown",function(t){this.released=!1,this.noMore=!0;const e=this.addEvent(document,"mouseup contextmenu touchend pointerup",function(t){(0,n.removeEvent)(document,"mouseup contextmenu touchend pointerup",e),this.released=!0,this.noMore&&this.stopped&&!this.dragging&&(this.noMore=!1,this.more())}.bind(this))}.bind(this)),this.addEvent(this.el.outer,"scroll",function(){this.update()&&(this.stopped?(this.stopped=!1,this.emitEvent("scrollstart")):this.options.native||!1!==this.stopped||(this.stopped=0,(0,r.addClass)(this.el.container,"ui_scroll_scrolled")),this.emitEvent("scroll"),this.stoppedTimeout&&clearTimeout(this.stoppedTimeout),this.stoppedTimeout=setTimeout(function(){this.stopped||(this.stopped=!0,this.options.native||(0,r.removeClass)(this.el.container,"ui_scroll_scrolled"),this.emitEvent("scrollstop"),this.noMore&&this.released&&!this.dragging&&(this.noMore=!1,this.more()))}.bind(this),200))}.bind(this)),this.api}}h.addResizeSensor=d.addResizeSensor;const c=h},565211:(t,e,i)=>{i.d(e,{addResizeSensor:()=>c,getScrollElement:()=>h,nextFrame:()=>d});var s=i(636322),o=i(70689),a=i(15042);let r;const n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setTimeout(t,1)),l=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;function d(t){r&&l(r),r=n(t)}function h(t){return(0,s.isString)(t)&&"_"===t[0]?(0,o.geByClass1)(t):(0,o.ge)(t)}function c(t,e){if((t=h(t))&&(0,s.isFunction)(e)){if(a.browser.msie9||a.browser.opera&&a.browser.version<13){let i=!1,r=!1;const n=(0,o.ce)("object",{type:"text/html",className:"ui_scroll_resize_object",data:"about:blank",onload:function(){r=!0,i&&l()}});function l(){if(!n.contentDocument)return setTimeout(l,100);n.contentDocument.defaultView.removeEventListener("resize",e),n.contentDocument.defaultView.addEventListener("resize",e),e()}return t.appendChild(n),t.__resizeSensor__=[n,function(){i=!0,r&&l()}]}{const d=(0,o.ce)("div",{className:"ui_scroll_resize_sensor"}),c=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_expand"}),u=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_shrink"}),p=(0,o.ce)("div"),m=(0,o.ce)("div");let g=null;return c.appendChild(p),u.appendChild(m),d.appendChild(c),d.appendChild(u),t.appendChild(d),t.__resizeSensor__=[d,c.onscroll=u.onscroll=function(){const i=(t.offsetWidth||1e4)+10,s=(t.offsetHeight||1e4)+10;p.style.width=i+"px",p.style.height=s+"px",c.scrollLeft=i,c.scrollTop=s,u.scrollLeft=i,u.scrollTop=s,g!==(g=i+" "+s)&&e()}]}}}},813786:(t,e,i)=>{i.d(e,{AudioListFetchable:()=>l});var s=i(570912),o=i(615816),a=i(658051),r=(0,o._)("_list"),n=(0,o._)("_defaultNextCount");class l{get list(){return(0,s._)(this,r)[r]}audioAt(t){return this.list.audioAt(t)}getFetchAtIndexes(t,e){const{list:i}=this,{range:s=0}=e??{},o=(0,a.ensureAudioListAbsIndex)(i,t),r=Math.max(0,o-s);let n=o+s;i.infinite||(n=Math.min(i.length-1,n));const l=new Array(n-r+1).fill(null).map(((t,e)=>r+e));return e?.prefetch?l.filter((t=>!this.audioAt(t))):l}get defaultNextCount(){return(0,s._)(this,n)[n]}set defaultNextCount(t){if(!Number.isFinite(t))throw new Error(`Count ${t} is not finite`);(0,s._)(this,n)[n]=t}constructor(t){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,s._)(this,n)[n]=1,(0,s._)(this,r)[r]=t}}},665985:(t,e,i)=>{i.d(e,{InfiniteAudioListFetchable:()=>l});var s=i(570912),o=i(615816),a=i(658051),r=i(813786),n=(0,o._)("_assertInfiniteList");class l extends r.AudioListFetchable{async fetchAt(t,{range:e=0}={}){(0,s._)(this,n)[n]();const{list:i}=this,o=(0,a.ensureAudioListAbsIndex)(i,t),r=this.audioAt(o),l=o+e+1-i.length;if(r&&l<=0)return r;const[d]=await this.fetchNext(l);if(!d)throw new Error("fetchNext have not return audios");return d}constructor(...t){super(...t),Object.defineProperty(this,n,{value:d})}}function d(){if(!this.list.infinite)throw new Error("AudioList is finite but fetch strategy is infinite")}},699463:(t,e,i)=>{i.d(e,{createOwnedAudioIdentityMap:()=>r});i(998464);var s=i(668887),o=i(398372),a=i(929516);function r(t){return new s.IdentityMap({initial:t,toKey:o.getIdentityRawId,fromKey:a.parseRawId})}},228132:(t,e,i)=>{i.d(e,{toAudioData:()=>a});var s=i(910064),o=i(275064);function a(t){const{duration:e}=t;return{identity:(0,s.toOwnedAudioIdentityData)(t),title:t.title,artwork:l(t),url:t.url||null,isExplicit:t.is_explicit??!1,authors:r(t),duration:Number.isFinite(e)?e:void 0}}function r(t){return{main:t?.main_artists?.map(n)??[],feat:t?.featured_artists?.map(n)??[],raw:t.artist}}function n(t){return{name:t.name}}function l(t){const e=t.album?.thumb;return e?(0,o.toAudioArtworkImages)(e):[]}},910064:(t,e,i)=>{function s(t){return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}i.d(e,{toOwnedAudioIdentityData:()=>s})},536022:(t,e,i)=>{var s;i.d(e,{AudioType:()=>s}),function(t){t.MusicTrack="music_track",t.MusicSnippet="music_snippet",t.PodcastEpisode="podcast_episode",t.PodcastTrailer="podcast_trailer",t.Radio="radio"}(s||(s={}))},275064:(t,e,i)=>{i.d(e,{toAudioArtworkImages:()=>o});const s=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function o(t){const e=[];if(!t)return e;for(const[i,o]of s){const s=t[i];s&&e.push({src:s,size:o})}return e}},762524:(t,e,i)=>{var s;i.d(e,{AudioListType:()=>s}),function(t){t.MusicMix="music_mix",t.MyMusicPlaylist="my_music_playlist",t.MusicAlbumPlaylist="music_album_playlist",t.MusicGroupPlaylist="music_group_playlist",t.MusicAlgorithmicPlaylist="music_algorithmic_playlist",t.MusicUGCPlaylist="music_ugc_playlist",t.Podcast="podcast",t.Radio="radio"}(s||(s={}))},392506:(t,e,i)=>{i.d(e,{Audio:()=>r});var s=i(197582),o=i(168949),a=i(316365);class r{get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get artwork(){return this.data.artwork}get isExplicit(){return this.data.isExplicit}get authors(){return this.data.authors}get duration(){return this.data.duration}get mediaMetadata(){const{authors:t}=this;return{title:this.title,artist:t&&(0,a.stringifyAudioAuthors)(t),artwork:[...this.artwork]}}attach(t){return Object.assign(Object.create(this),{context:t})}ensureContext(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}constructor(t){(0,o.makeObservable)(this),this.data=t}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"mediaMetadata",null)},894561:(t,e,i)=>{i.d(e,{AudioProvider:()=>a});var s=i(197582),o=i(168949);class a{get(t){return this.entities.get(t)}has(t){return this.entities.has(t)}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw new Error("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];const e=await this.fetchEntities(t);return this.cacheMany(e),e}async ensureMany(t){let e=[],i=[];for(const s of t){const t=this.get(s);t?e.push(t):i.push(s)}if(!i.length)return e;const s=await this.fetchMany(i);e=[];for(const o of t){const a=this.get(o);if(!a)throw console.error("AudioData not found in entities",{identity:o,audio:a,fetched:s,entities:this.entities,identities:t,missing:i,result:e}),new Error("AudioData not found in entities");e.push(a)}return e}cache(t){return this.entities.set(t.identity,t),t}cacheMany(t){for(const e of t)this.cache(e)}}(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Promise)],a.prototype,"fetch",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",Promise)],a.prototype,"fetchMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Array]),(0,s.__metadata)("design:returntype",Promise)],a.prototype,"ensureMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Object)],a.prototype,"cache",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],a.prototype,"cacheMany",null)},316365:(t,e,i)=>{function s(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}i.d(e,{stringifyAudioAuthors:()=>s})},712370:(t,e,i)=>{i.d(e,{AudioList:()=>o});var s=i(678755);class o extends s.AudioList{get length(){return this.items.length}get type(){return this.data.type}get contentType(){return this.data.contentType}get title(){return this.data.title}audioAtStrict(t){const e=this.audioAt(t);if(!e)throw new Error("Audio not found");return e}attach(t){return Object.assign(Object.create(this),{context:t})}ensureContext(){const{context:t}=this;if(!t)throw new Error("AudioList is not contextual");return t}constructor(t){super(),this.data=t}}},196232:(t,e,i)=>{i.d(e,{MusicAudio:()=>h});var s=i(570912),o=i(615816),a=i(197582),r=i(168949),n=i(884762),l=i(392506),d=(0,o._)("_musicTrackAudioProvider");class h extends l.Audio{get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get releaseAudioIdentity(){return this.data.releaseAudioIdentity}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){return this.releaseAudioIdentity?(0,s._)(this,d)[d].get(this.releaseAudioIdentity)??null:null}constructor(t,{musicTrackAudioProvider:e}){super(t),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.identity=new n.OwnedIdentity(this.data.identity),(0,s._)(this,d)[d]=e}}(0,a.__decorate)([r.override,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"mediaMetadata",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"releaseAudio",null)},794808:(t,e,i)=>{i.d(e,{MusicMix:()=>c});var s=i(570912),o=i(615816),a=i(197582),r=i(109196),n=i(712370),l=i(665985),d=i(186454),h=i(168949);class c extends n.AudioList{get isSessionLaunched(){return this.state.isSessionLaunched}get infinite(){return!0}get head(){return this.items}audioAt(t){return this.items.at(t)}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");this.state.isSessionLaunched=!0}breakSession(){this.clearItems(),this.state.isSessionLaunched=!1}clearItems(){this.items.length=0}constructor(t,{audioApi:e,audioProvider:i,isSessionFeatureEnabled:s=!1}){super(t),this.state={isSessionLaunched:!1},this.items=[],(0,h.makeObservable)(this),this.identity=new r.SingleIdentity(t.identity),this.fetchable=new g(this,{audioApi:e,audioProvider:i,isSessionFeatureEnabled:s})}}(0,a.__decorate)([h.observable.deep,(0,a.__metadata)("design:type",Object)],c.prototype,"state",void 0),(0,a.__decorate)([h.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],c.prototype,"launchSession",null),(0,a.__decorate)([h.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],c.prototype,"breakSession",null),(0,a.__decorate)([h.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],c.prototype,"clearItems",null);var u=(0,o._)("_audioApi"),p=(0,o._)("_audioProvider"),m=(0,o._)("_isSessionFeatureEnabled");class g extends l.InfiniteAudioListFetchable{async fetchNext(t=this.defaultNextCount){const{list:e}=this,i=(await(0,s._)(this,u)[u].getStreamMixAudios({mix_id:e.identity.id,count:t,...(0,s._)(this,m)[m]?{append:this.list.isSessionLaunched?1:0}:{}})).map((t=>{const e=(0,s._)(this,p)[p].create((0,d.toMusicTrackAudioData)(t)),i=t.track_code;return i||console.warn(new Error("Received MusicMix audio without trackCode")),e.attach({trackCode:i??"",apiAudio:t})}));return e.items.push(...i),i}constructor(t,{audioApi:e,audioProvider:i,isSessionFeatureEnabled:o=!1}){super(t),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),(0,s._)(this,u)[u]=e,(0,s._)(this,p)[p]=i,(0,s._)(this,m)[m]=o}}},168138:(t,e,i)=>{i.d(e,{MusicTrackAudioProvider:()=>_});var s=i(570912),o=i(615816),a=i(197582),r=i(288824),n=i(168949),l=i(483939),d=i(398372),h=i(699463),c=i(894561),u=i(196232),p=i(186454);const m=(0,r.makeSharedState)("domains/audio/MusicTrackAudioProvider",(()=>({})),{version:1});var g=(0,o._)("_createCached");class _ extends c.AudioProvider{static ensure(){const t=m();return t.current||(t.current=new _),t.current}create(t){const{releaseAudioIdentity:e}=t;return e&&!this.has(e)&&(0,s._)(this,g)[g]({...t,identity:e,releaseAudioIdentity:null}),(0,s._)(this,g)[g](t)}async fetchEntities(t){if(!t.length)return[];return(await this.audioApi.getById({audios:t.map(d.getIdentityAccessRawId).join(",")})).map((t=>this.create((0,p.toMusicTrackAudioData)(t))))}constructor(){super(...arguments),Object.defineProperty(this,g,{value:y}),this.audioApi=new l.AudioApi,this.entities=(0,h.createOwnedAudioIdentityMap)()}}function y(t){const e=new u.MusicAudio(t,{musicTrackAudioProvider:this});return this.cache(e)}(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Object)],_.prototype,"create",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Array]),(0,a.__metadata)("design:returntype",Promise)],_.prototype,"fetchEntities",null)},186454:(t,e,i)=>{i.d(e,{toMusicTrackAudioData:()=>n});var s=i(228132),o=i(536022),a=i(884762);function r(t,e){return{...(0,s.toAudioData)(e),type:t,hasLyrics:e.has_lyrics??!1,authors:l(e),album:h(e),duration:e.duration,releaseAudioIdentity:e.release_audio_id?a.OwnedIdentity.fromRawId(e.release_audio_id):null}}function n(t){return r(o.AudioType.MusicTrack,t)}function l(t){return{main:t.main_artists?.map(d)??[],feat:t.featured_artists?.map(d)??[],raw:t.artist}}function d(t){return{name:t.name,id:t.id}}function h(t){const{album:e}=t;return e?{id:e.id,ownerId:e.owner_id,title:e.title}:null}},8625:(t,e,i)=>{i.d(e,{MusicMixProvider:()=>d});var s=i(288824),o=i(168949),a=i(483939),r=i(794808),n=i(168138);const l=(0,s.makeSharedState)("domains/audio/MusicMixProvider",(()=>({})),{version:1});class d{static ensure(){const t=l();return t.current||(t.current=new d),t.current}get(t){return this.entities.get(t.id)}create(t,{audios:e=[],isSessionFeatureEnabled:i=!1}={}){const s=new r.MusicMix(t,{audios:e,audioApi:this.audioApi,audioProvider:this.audioProvider,isSessionFeatureEnabled:i});return this.entities.set(s.identity.id,s),s}constructor(){this.audioApi=new a.AudioApi,this.audioProvider=n.MusicTrackAudioProvider.ensure(),this.entities=new Map,(0,o.makeAutoObservable)(this)}}},668887:(t,e,i)=>{i.d(e,{IdentityMap:()=>a});var s=i(168949),o=i(184757);class a extends o.IdentityMap{constructor(t){super(t),this.store=(0,s.observable)(this.store)}}},998464:(t,e,i)=>{i.d(e,{IdentitySet:()=>a});var s=i(168949),o=i(585739);class a extends o.IdentitySet{constructor(t){super(t),this.store=(0,s.observable)(this.store)}}},158269:(t,e,i)=>{i.d(e,{ApiNamespace:()=>o});var s=i(166695);class o{makeMethod(t){return(e,i,o)=>(0,s.api)(`${this.namespace}.${t}`,e,o,i)}}},483939:(t,e,i)=>{i.d(e,{AudioApi:()=>r});var s=i(197582),o=i(158269),a=i(257189);let r=class extends o.ApiNamespace{get namespace(){return"audio"}constructor(){super(...arguments),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.createPlaylist=this.makeMethod("createPlaylist"),this.deletePlaylist=this.makeMethod("deletePlaylist"),this.savePlaylistAsCopy=this.makeMethod("savePlaylistAsCopy"),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.getPlaylistById=this.makeMethod("getPlaylistById"),this.getPlaylistByIdExtended=this.makeMethod("getPlaylistById"),this.getAudioIdsBySource=this.makeMethod("getAudioIdsBySource"),this.getAudioPreviewUrl=this.makeMethod("getAudioPreviewUrl"),this.getSnippets=this.makeMethod("getSnippets"),this.getSearchSuggestions=this.makeMethod("getSearchSuggestions"),this.getStreamMixAudios=this.makeMethod("getStreamMixAudios"),this.search=this.makeMethod("search")}};r=(0,s.__decorate)([a.scope.global()],r)},491650:(t,e,i)=>{i.d(e,{Lottie:()=>n});var s=i(785893),o=i(659397),a=i(571309),r=i(39655);const n=({play:t,fallback:e,options:i,className:n,style:l,...d})=>{const{width:h,height:c}=i,{lottieContainerRef:u,lottieRendered:p}=(0,a.useLottie)({...i,className:r.default.canvas},{play:t});return(0,s.jsx)("div",{ref:u,...d,className:(0,o.classNames)(r.default.root,n),style:{...l,width:h??l?.width??"100%",height:c??l?.height??"100%"},children:(0,s.jsx)("div",{children:!p&&e})})}},184757:(t,e,i)=>{i.d(e,{IdentityMap:()=>s});class s{get size(){return this.store.size}has(t){return this.store.has(this.toKey(t))}get(t){return this.store.get(this.toKey(t))}set(t,e){return this.store.set(this.toKey(t),e),this}delete(t){return this.store.delete(this.toKey(t))}clear(){return this.store.clear()}forEach(t,e){this.store.forEach(((i,s)=>{t.call(e,i,this.fromKey(s),this)}))}*keys(){for(const t of this.store.keys())yield this.fromKey(t)}values(){return this.store.values()}*entries(){for(const[t,e]of this.store.entries())yield[this.fromKey(t),e]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.store[Symbol.toStringTag]}constructor({initial:t,toKey:e,fromKey:i}){this.toKey=e,this.fromKey=i,this.store=new Map([...t??[]].map((([t,e])=>[this.toKey(t),e])))}}},585739:(t,e,i)=>{i.d(e,{IdentitySet:()=>s});class s{get size(){return this.store.size}has(t){return this.store.has(this.toKey(t))}add(t){return this.store.add(this.toKey(t)),this}delete(t){return this.store.delete(this.toKey(t))}clear(){return this.store.clear()}forEach(t,e){this.store.forEach((i=>{const s=this.fromKey(i);t.call(e,s,s,this)}))}*values(){for(const t of this.store.values())yield this.fromKey(t)}keys(){return this.values()}*entries(){for(const t of this.store.values()){const e=this.fromKey(t);yield[e,e]}}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return this.store[Symbol.toStringTag]}constructor({initial:t,toKey:e,fromKey:i}){this.toKey=e,this.fromKey=i,this.store=new Set([...t??[]].map((t=>this.toKey(t))))}}},884762:(t,e,i)=>{i.d(e,{OwnedIdentity:()=>a});var s=i(929516),o=i(398372);class a{static fromRawId(t){const e=(0,s.parseRawId)(t);return new a(e)}get rawId(){return(0,o.getIdentityRawId)(this)}get accessRawId(){return(0,o.getIdentityAccessRawId)(this)}get fullId(){return this.rawId}constructor(t){this.id=t.id,this.ownerId=t.ownerId,this.accessKey=t.accessKey}}},109196:(t,e,i)=>{i.d(e,{SingleIdentity:()=>s});class s{get fullId(){return this.id}constructor(t){this.id=t.id}}},398372:(t,e,i)=>{function s({id:t,ownerId:e}){return`${e}_${t}`}function o(t){const{accessKey:e}=t,i=s(t);return e?`${i}_${e}`:i}i.d(e,{getIdentityAccessRawId:()=>o,getIdentityRawId:()=>s})},929516:(t,e,i)=>{i.d(e,{parseRawId:()=>o});var s=i(437037);function o(t){const e=t.split("_"),i=e[0]&&parseInt(e[0],10),o=e[1]&&parseInt(e[1],10);if(!(0,s.isNumber)(o)||!(0,s.isNumber)(i))throw new Error(`Invalid rawId: ${t}`);return{id:o,ownerId:i,accessKey:e[2]}}},111607:(t,e,i)=>{i.d(e,{apiAudioToAudioTuple:()=>l});var s=i(902947),o=i(659397),a=i(409782),r=i(347088);const n=new WeakMap,l=(t,{useCache:e=!1}={})=>{if(!t)return null;if(e){const e=n.get(t);if(e)return e}const i=[t.id,t.owner_id,t.url||"",(0,s.clean)(t.title),(0,s.clean)(t.artist||t.performer||""),t.duration,t.album_id||0,0,"",t.lyrics_id||0,0,"","[]",(0,a.getAudioHashesString)({addHash:t.access_key,editHash:t.access_key,actionHash:t.access_key,deleteHash:t.access_key,replaceHash:t.access_key,urlHash:t.access_key,restoreHash:t.access_key}),t.album?.thumb?.sizes?(0,o.getPhotoSize)(t.album?.thumb?.sizes||[],(0,r.getImageMinWidth)(200))?.url||"":`${t.album?.thumb?.photo_300},${t.album?.thumb?.photo_135}`||"",t.ads||{},(0,s.clean)(t.subtitle||""),t.main_artists||"",t.featured_artists||"",!!t.album&&[t.album?.owner_id,t.album?.id,t.album?.access_key],t.track_code||"",t.content_restricted||0,t.album_part_number||0,!0,t.access_key||"",t.audio_chart_info||!1,t.release_audio_id||""];return e&&n.set(t,i),i}},644970:(t,e,i)=>{i.d(e,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>s});const s="/"},409782:(t,e,i)=>{i.d(e,{getAudioHashesString:()=>o});var s=i(644970);const o=({addHash:t,editHash:e,actionHash:i,deleteHash:o,replaceHash:a,urlHash:r,restoreHash:n})=>[t||"",e||"",i||"",o||"",a||"",r||"",n||""].join(s.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},594353:(t,e,i)=>{i.d(e,{makeStrictContext:()=>o});var s=i(667294);function o({name:t,defaultValue:e}){const i=(0,s.createContext)(e);function o(){const e=(0,s.useContext)(i);if(void 0===e)throw new Error(`Value for ${t}Context must be defined before call useContext`);return e}return i.displayName=`${t}Context`,o.displayName=`use${i.displayName}`,{Context:i,useContext:o}}},85778:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlock:()=>h});var s=i(785893),o=i(667294),a=i(433581),r=i(639269),n=i(848217),l=i(762524),d=i(536022);const h=(0,a.observer)((t=>{const[e]=(0,o.useState)((()=>{const e=new r.AudioCatalogMusicMixBlockModel;return e.setMix({type:l.AudioListType.MusicMix,contentType:d.AudioType.MusicTrack,identity:{id:t.id},title:t.title}),e}));return(0,s.jsx)(n.AudioCatalogMusicMixBlockComponent,{...t,loading:e.loading,playing:e.isPlaying,onTogglePlayClick:()=>{e.togglePlay()}})}))},951422:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>d});var s=i(785893),o=i(780891),a=i(977053),r=i(746890),n=i(85778),l=i(945132);const d=({needShowOnboarding:t,...e})=>{const i=(0,a.partConfigEnabled)("audio_mobx")&&(0,a.partConfigEnabled)("audio_mobx_music_mix");return(0,s.jsx)(o.AppRootProvider,{children:(0,s.jsx)(l.AudioCatalogMusicMixBlockContext.Provider,{value:{needShowOnboarding:t||!1},children:i?(0,s.jsx)(n.AudioCatalogMusicMixBlock,{...e}):(0,s.jsx)(r.AudioCatalogMusicMixBlockEffector,{...e})})})}},596711:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>h});var s=i(785893),o=i(659397),a=i(667294),r=i(258037),n=i(491650),l=i(223970),d=i(565994);function h({id:t,backgroundAnimationUrl:e,description:i,header:h,style:c,playing:u,loading:p,onTogglePlayClick:m}){const{width:g,height:_}=(0,a.useMemo)((()=>{switch(c){case"default":return{width:910,height:248};case"secondary":return{width:870,height:208}}}),[c]);return(0,s.jsxs)("div",{className:(0,o.classNames)(d.default.root,d.default[c]),children:[(0,s.jsx)("div",{className:d.default.wrap,children:(0,s.jsx)(r.Placeholder,{mode:"default"===c?"default":"overlay",icon:(0,s.jsx)(l.AudioCatalogMusicMixBlockStateButtonContainer,{state:u?"play":"pause",loading:p&&!u,ariaLabelPlay:"play",ariaLabelPause:"pause",style:c,onClick:m}),header:h,children:i})}),(0,s.jsx)(n.Lottie,{options:{width:g,height:_,lazyLoading:!0,loop:!0,upscale:!0,autoplay:!1,group:t,animationUrl:e},play:u})]})}},196673:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent});var s=i(596711)},922822:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>p});var s=i(785893),o=i(667294),a=i(29545),r=i(981284),n=i(130593),l=i(113788),d=i(7479),h=i(140518);const c={play:d.Icon28Pause,pause:h.Icon28Play};function u({state:t,loading:e,style:i,onClick:o,ariaLabelPlay:d,ariaLabelPause:h}){const u=c[t],p="play"===t?d:h;return(0,s.jsx)(a.RoundedGroup.Item,{mode:"default"===i?"shadow":"overlay",children:(0,s.jsx)(r.IconButton,{className:(0,n.getColorClass)("color_icon_primary"),onClick:o,"aria-label":p,children:e?(0,s.jsx)(l.Spinner,{size:"regular"}):(0,s.jsx)(u,{})})})}const p=(0,o.memo)(u)},4798:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>s.AudioCatalogMusicMixBlockStateButton});var s=i(922822)},848217:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent,AudioCatalogMusicMixBlockStateButton:()=>o.AudioCatalogMusicMixBlockStateButton});var s=i(196673),o=i(4798)},894037:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>d});var s=i(785893),o=i(945132),a=i(848217),r=i(667294),n=i(760435);const l=n.AudioCatalogMusicMixEmitter.ensure();function d(t){const{needShowOnboarding:e}=(0,o.useAudioCatalogMusicMixBlockContext)(),[i,d]=(0,r.useState)(e),h=()=>{i?l.emit(n.AudioCatalogMusicMixBlockEventType.AudioRecomsOnboardingShowRequested,{onHideOnboarding:()=>{d(!1),t.onClick?.()}}):t.onClick?.()};return i?(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,state:"pause",loading:!1,onClick:h}):(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,onClick:h})}},223970:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>s.AudioCatalogMusicMixBlockStateButtonContainer});var s=i(894037)},945132:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockContext:()=>o,useAudioCatalogMusicMixBlockContext:()=>a});var s=i(594353);const{Context:o,useContext:a}=(0,s.makeStrictContext)({name:"AudioCatalogMusicMixBlockContext",defaultValue:{needShowOnboarding:!1}})},677809:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>n});var s=i(785893),o=i(504190),a=i(848217),r=i(477531);function n({id:t,backgroundAnimationUrl:e,description:i,header:n,title:l,style:d}){const h=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$isPlaying),c=(0,o.useUnit)(r.audioCatalogVkMixBlockService.playAudioMixFx),u=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$loading);return(0,s.jsx)(a.AudioCatalogMusicMixBlockComponent,{id:t,backgroundAnimationUrl:e,description:i,header:n,style:d,playing:h,loading:u,onTogglePlayClick:()=>{c({id:t,title:l})}})}},746890:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>s.AudioCatalogMusicMixBlockEffector});var s=i(677809)},360200:(t,e,i)=>{i.d(e,{createAudioCatalogVkMixBlockService:()=>c});var s=i(798116),o=i(182097),a=i(372675),r=i(738032),n=i(971201),l=i(714755),d=i(459642),h=i(977053);function c(){const t=(0,s.createDomain)("audio/audioPage/catalog/VkMixBlockService"),e=(0,d.ensureAudioPlayerService)(),i=t.createEvent(),c=(0,s.restore)(i,null),u=(0,o.equals)(e.$currentPlaylist.map((t=>t?.getType?.())),n.PLAYLIST_TYPE_VKMIX),p=(0,a.and)(e.$isPlaying,u),m=(0,s.attach)({source:[p],effect:async([t],{id:s,title:o})=>{const a=await e.getCurrentPlaylistFx();if(!t&&!a||!t&&a?.getType()!==n.PLAYLIST_TYPE_VKMIX)try{const t=new n.AudioMixPlaylist({id:s,title:o,items:[],context:n.PLAYLIST_CONTEXT_VKMIX});await t.ensureAt(0);const a=new l.AudioMixPlaylistAdapter(t),r=a.getAudioAt(0);if(!r)throw new Error("First audio in VK Mix not found");i(t),await e.playFx({audio:r,playlist:a,context:n.PLAYLIST_CONTEXT_VKMIX})}catch(t){throw new Error("Failed to initialize VK Mix playlist")}else!t&&a?.getType()===n.PLAYLIST_TYPE_VKMIX&&a?e.playFx():e.pauseFx()}}),g=(0,a.and)(m.pending,(0,r.not)(p)),_=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.launchSession()}}),y=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.breakSession()}});return(0,s.sample)({clock:u,filter:t=>!!(0,h.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&t,target:_}),(0,s.sample)({clock:u,filter:t=>!!(0,h.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&!t,target:y}),{$isPlaying:p,$loading:g,playerService:e,playAudioMixFx:m}}},477531:(t,e,i)=>{i.d(e,{audioCatalogVkMixBlockService:()=>s});const s=(0,i(360200).createAudioCatalogVkMixBlockService)()},534900:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixEmitter:()=>a});var s=i(911309),o=i(288824);class a extends s.Emitter{constructor(){super()}}a.ensure=(0,o.makeSharedState)("AudioCatalogMusicMixEmitter",(()=>new a),{version:1})},265707:(t,e,i)=>{var s;i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s}),function(t){t.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(s||(s={}))},760435:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});var s=i(265707),o=i(534900)},116647:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>s.AudioCatalogMusicMixBlockApplication,AudioCatalogMusicMixBlockEventType:()=>o.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});i(85778);var s=i(951422),o=i(760435)},350262:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>d});var s=i(168949),o=i(8625),a=i(30655),r=i(643555),n=i(847441),l=i(977053);class d{setMix(t){const e=(0,l.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{mixProvider:i}=this;this._mix=i.get(t.identity)??i.create(t,{isSessionFeatureEnabled:e}),this.ap.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{(0,l.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web")&&this._mix&&(this.isMixInQueue?this._mix.launchSession():this._mix.breakSession())}))}get mix(){return this._mix}ensureMix(){const{mix:t}=this;if(!t)throw new Error("MusicMix is not defined");return t}get loading(){return!1}get isPlaying(){return this.isMixInQueue&&this.ap.isPlaying()}get isPaused(){return this.isMixInQueue&&!this.ap.isPlaying()}get isMixInQueue(){const{mixAdapter:t}=this,e=this.ap.getCurrentPlaylist();return!(!e||!t)&&e.getType()===t.type}async togglePlay(){const{ap:t}=this;this.isPlaying?t.pause():this.isPaused?t.resume():this.play()}async play(){const t=this.ensureMix(),{mixAdapter:e}=this;if(!e)throw new Error("MusicMix adapter is not defined");await t.ensureAt(0);const i=e.getAudioAt(t.length-1);if(!i)throw new Error("Last audio in VK Mix not found");await this.ap.playList({audio:i,playlist:e,context:e.context})}get mixAdapter(){const{mix:t}=this;return t&&new r.MusicMixAdapter(t)}constructor(){this.ap=(0,a.getAudioPlayer)(),this.mixProvider=o.MusicMixProvider.ensure(),this._mix=null,(0,s.makeAutoObservable)(this)}}},639269:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>s.AudioCatalogMusicMixBlockModel});var s=i(350262)},372675:(t,e,i)=>{i.d(e,{and:()=>o});var s=i(798116);function o(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,s.combine)({and:[e,t=>{for(var e of t)if(!e)return!1;return!0}],or:{sid:"-rbm5ks"}})}}}]);try{stManager.done("dist/web/chunks/3757e0b6.41322089.js")}catch(t){}