(()=>{"use strict";var e,t,n,s,i,r,c={159532:(e,t,n)=>{n.d(t,{Stickers:()=>r});var s=n(2190),i=n(433830);const r={getStickerUrl:function(e,t){let n=String(t);if(s.colorScheme.isDarkScheme()&&(n=n.replace(/b$/,"")+"b"),window.Emoji){const t=Emoji.stickersById?.[e]?.sticker[Emoji.STICKER_FIELD_IMAGES]?.[n];if(t)return t}const r={id:e,size:n};if((0,i.isMvk)()){if(window.stickers_cache){const t=window.stickers_cache.getStickerImage(e,n);if(t)return t}return window.store.stickers&&function(e,t){return e.replace(/%([^%]+?)%/g,(e=>(e=e.slice(1,-1),t.hasOwnProperty(e)?t[e]:"")))}(window.store.stickers.url_template,{id:e,size:n})}return window.getTemplate("stickers_sticker_url",r)},getStickerPopupLayer:function(e){return(0,i.isMvk)()&&window.stickers_cache?.getStickerPopupLayer(e)||[]}}},730776:(e,t,n)=>{n.d(t,{StickersSettings:()=>s});let s={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return!!s.autoplay&&!s.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return!!window.Calls&&window.Calls.isInActiveCall}}},732368:(e,t,n)=>{n.d(t,{addConflictBlocksNative:()=>l,destroyByRemoveEventNative:()=>g,destroyBySpeedIncrementEventNative:()=>p,handlePlayPopUpNative:()=>u});var s=n(785893),i=n(620745),r=n(288824),c=n(613193),o=n(984013),a=n(436253),h=n(918414);const d=(0,r.makeSharedState)("sticker-popup",(()=>new a.PopupStickerService),{version:2})();function u({stickerElement:e,layers:t,onEndPlay:n,useContainerElementToMount:r,zIndexMountNode:a,...u}){const l=document.createElement("div");let p;d.prepare({stickerElement:e,layers:t,mountNode:()=>{const t=e.closest(`[${h.CONTAINER_ID_DATA_PROPERTY}]`),n=t??document.body,{popupFullScreenSelector:u=h.FULL_SCREEN_DATA_DEFAULT_VALUE}=n.dataset,g=r&&t,b=g?t:document.querySelector(u)??document.body;g&&(l.style.zIndex=String(a??2),l.style.position="relative"),b.prepend(l),p=(0,i.createRoot)(l),p.render((0,s.jsx)(o.PopupProvider,{popupStore:d,children:(0,s.jsx)(c.PopUpPortal,{portalElement:l})}))},onEndPlay:()=>{n?.(),p?.unmount(),l.remove()},...u})}function l(e){d.conflictBlocks.addConflictBlock(e)}function p(){d.destroyBySpeedIncrement()}function g(){d.destroyByRemove()}},697616:(e,t,n)=>{n.d(t,{DEFAULT_CACHE:()=>a,ORDER_ERRORS:()=>d,ORDER_ITEM_ERRORS:()=>u,SAMPLE_RECIPIENT_ID:()=>h,STICKER_ANIMATION:()=>o,STICKER_IMAGE:()=>c,STICKER_PACK_ICON:()=>i,STICKER_PACK_THUMB:()=>r});var s=n(205801);const i={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},r={"102_png":{id:"102.png",width:102,height:102,theme:s.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:s.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:s.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:s.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:s.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:s.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:s.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:s.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:s.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:s.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:s.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:s.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},c={"64_png":{id:"64.png",width:64,height:64,theme:s.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:s.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:s.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:s.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:s.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:s.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:s.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:s.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:s.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:s.Theme.DARK}},o={[s.Theme.LIGHT]:"animation.json",[s.Theme.DARK]:"animation.b.json"},a={products:(0,s.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},h=-1;var d,u;!function(e){e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items"}(d||(d={})),function(e){e.DUPLICATE_PRODUCT="duplicate_product"}(u||(u={}))},205801:(e,t,n)=>{var s;n.d(t,{ProductsByType:()=>l,Theme:()=>s,UserProductStateKey:()=>o,createProductsMap:()=>c,imageSizeCache:()=>r,imageSizesIndex:()=>i,isBasePack:()=>a,isPackProduct:()=>d,isStyleProduct:()=>h}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(s||(s={}));const i=Symbol(),r=Symbol(),c=e=>new Map(e);var o;!function(e){e.IsNew="is_new"}(o||(o={}));const a=e=>void 0!==e.sticker_ids,h=e=>void 0!==e.base_id,d=e=>a(e)&&!h(e);var u;!function(e){e.Pack="pack",e.Style="style"}(u||(u={}));class l{add(e){e&&(d(e)?this.pack.add(e):h(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},563313:(e,t,n)=>{n.d(t,{getStickerAnimationUrl:()=>d,getStickerImageUrl:()=>h,getStickerPackIconUrl:()=>u,isSampleOrderItem:()=>l,logStickersError:()=>p});var s=n(205801),i=n(697616),r=n(65718);const c=(e,t,n,i=s.Theme.DEFAULT)=>{const r=window.devicePixelRatio,c=[t*=r,n*=r,i].toString();let o=e[s.imageSizeCache];if(o&&o.has(c)){const e=o.get(c);if(e)return e}o||(o=new Map,e[s.imageSizeCache]=o);const a=(e=>{let t=e[s.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[s.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===i)),h=a.find((e=>e.width>=t&&e.height>=n))||a[a.length-1];return o.set(c,h),h},o=(e,t,n=s.Theme.DEFAULT)=>c(i.STICKER_IMAGE,e,t,n),a=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function h(e,t,n,i=s.Theme.DEFAULT){if(e.render?.images){const{images:s}=e.render;let r;s.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of s)if(e.width>=t&&e.height>=n){if(e.theme===i)return e.url;r=e}if(r)return r.url}return a(e,o(t,n,i))}const d=(e,t=s.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+i.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",u=(e,t,n,r=s.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,n=s.Theme.DEFAULT)=>c(i.STICKER_PACK_ICON,e,t,n))(t,n,r)),l=e=>e.recipient_id===i.SAMPLE_RECIPIENT_ID,p=e=>{(0,r.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},715996:(e,t,n)=>{n.d(t,{popupAddConflictBlocksNative:()=>r});var s=n(732368),i=n(982721);const r=e=>{(0,i.isPopUpStickersEnabled)()&&(0,s.addConflictBlocksNative)(e)}},706434:(e,t,n)=>{var s=n(802130),i=n(82374);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(n.p=window.vk.stDomain+"/dist/"),(0,i.init)();try{window.stManager.done(window.jsc("web/stickers.js"))}catch(e){}requestIdleCallback((()=>{try{(0,s.statlogsValueEvent)("entries_requests",1,"stickers","web")}catch{}}),{timeout:5e3})},669390:(e,t,n)=>{var s;n.d(t,{REGULAR_SIZES:()=>r,SIZE_512:()=>i,STICKER_ICON_CLASS:()=>o,STICKER_ROW_CLASS:()=>c,StickerSize:()=>s}),function(e){e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG"}(s||(s={}));const i=512,r=[64,128,256,352,i],c="stickerRow",o="stickerIcon"},82374:(e,t,n)=>{n.r(t),n.d(t,{init:()=>p});var s=n(918414),i=n(159532),r=n(801767),c=n(730776),o=n(715996),a=n(21139),h=n(969412),d=n(455601),u=n(476928),l=n(251488);n(518282);function p(){(0,o.popupAddConflictBlocksNative)({action:s.ConflictActionsTypes.ChangeModificator,blockSelector:"#FCWindow",popUpPositions:[s.PopUpPositionTypes.FullScreen,s.PopUpPositionTypes.TopFullScreen]}),window.StickersAnimation=r.StickersAnimation,window.StickersSettings=c.StickersSettings,window.Stickers={...i.Stickers,Cart:a.Cart,getPurchaseResult:h.getPurchaseResult,giftStickerProducts:d.giftStickerProducts,openStickersLayerView:u.openStickersLayerView,openStickersRandomSelectorView:l.openStickersRandomSelectorView}}},969412:(e,t,n)=>{n.d(t,{findClosestStickerSize:()=>m,getBoxLayerWrap:()=>l,getLangCode:()=>w,getPurchaseResult:()=>b,hideLoader:()=>g,showLoader:()=>p,updateStickersFromQueue:()=>k});var s=n(877926),i=n(471828),r=n(2190),c=n(70689),o=n(251087),a=n(205801),h=n(669390),d=n(563313);function u(){return document.querySelector("#box_loader")}function l(){return document.querySelector("#box_layer_wrap")}function p(){const e=u();(0,o.refreshBoxLoaderCoords)(),(0,c.show)(e),(0,c.show)(l())}function g(){(0,c.hide)(u())}function b(e){const t=new a.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),n=t.getPack(),r=t.getStyles();if(n)return r.length?(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_pack_and_styles",r.length),"pack_title",n.title,"n",r.length):(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_pack"),"title",n.title);if(r.length)switch(r.length){case 1:return(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_1_style"),"title",r[0].title);case 2:return(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_2_styles"),"title1",r[0].title,"title2",r[1].title);case 3:return(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);case 4:return(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);default:const e=r.length-3;return(0,s.langStr)(i.getLang("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title,"n",e)}return null}function k(e){!function(e){const t=r.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light";e.querySelectorAll(`.sticker_img[${t}]`).forEach((e=>{const n=e.getAttribute(t);n&&(e.src=n)}))}(e)}const w=()=>window.vk.lang||"ru",m=e=>e>h.SIZE_512?((0,d.logStickersError)("Нет размера стикера больше 512px"),h.SIZE_512):h.REGULAR_SIZES.find((t=>t>=e))}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return c[e].call(n.exports,n,n.exports,a),n.exports}a.m=c,e=[],a.O=(t,n,s,i)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],c=!0,o=0;o<n.length;o++)(!1&i||r>=i)&&Object.keys(a.O).every((e=>a.O[e](n[o])))?n.splice(o--,1):(c=!1,i<r&&(r=i));if(c){e.splice(d--,1);var h=s();void 0!==h&&(t=h)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var c=2&s&&e;"object"==typeof c&&!~t.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,a.d(i,r),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>24817===e?"web/chunks/hls.b496ce21.js":77794===e?"web/chunks/7bdfc282.async.758ca0aa.js":40530===e?"web/chunks/5ef6139d.async.11c35c9c.js":19442===e?"web/chunks/9f7d7ed3.async.4011bfc9.js":71634===e?"web/chunks/5b5fa12c.async.df7dbdde.js":14803===e?"web/chunks/b8d79c18.async.1f2410f2.js":27370===e?"web/chunks/2c9432b5.async.5b90c7cd.js":5157===e?"web/chunks/unauth_action_box.9d309412.js":25394===e?"web/chunks/AudioLongtapModal.ab967a4b.js":75980===e?"web/chunks/menu_settings.7bdcde07.js":91815===e?"web/chunks/b66df7cc.async.98a85b3f.js":40928===e?"web/chunks/fcbd3ef2.async.877aa898.js":9914===e?"web/chunks/52fa6987.async.94be31b8.js":59727===e?"web/chunks/VideoUpload.ab749b29.js":9375===e?"web/chunks/voice_message_player.faac3006.js":28762===e?"web/chunks/speech.3083d7af.js":57468===e?"web/chunks/SilentModeForms.d5a6e099.js":28872===e?"web/chunks/feed-client-nav-skeleton.a45b822f.js":35953===e?"web/chunks/feed-client-nav-async-right-block.85b20aca.js":73084===e?"web/chunks/96539bf4.async.9654cd5b.js":97066===e?"web/chunks/rlottie.212c27d9.js":78192===e?"web/chunks/701b8118.async.fb5545b5.js":58086===e?"web/chunks/06f378a9.async.96f62021.js":7103===e?"web/chunks/stickers-layer-view.1c2806e7.js":37211===e?"web/chunks/stickers-layer-purchase-details-view.2a588baa.js":39457===e?"web/chunks/stickers-random-selector-view.3b16ec21.js":78177===e?"web/chunks/stickers-random-selector-packs-view.5df4de88.js":34757===e?"web/chunks/stickers-random-selector-result-view.eb42f591.js":85059===e?"web/chunks/059ba3af.async.ee5a4200.js":88339===e?"web/chunks/aadde5b7.async.efcb9ddc.js":67724===e?"web/chunks/VideoEditorModal.eb979233.js":22854===e?"web/chunks/PublishClipToVideoModal.dae3ac0f.js":30271===e?"web/chunks/VideoUploadModal.b8d73da8.js":31286===e?"web/chunks/VideoExternalUploadModal.2c5830cb.js":969===e?"web/chunks/0dc980e6.async.18c61f90.js":92846===e?"web/chunks/ClipUploadModal.fbd8d9e4.js":59240===e?"web/chunks/performance-stats.b497cf49.js":378===e?"web/chunks/79f739a7.async.4832bf09.js":72491===e?"web/chunks/story_blocks.203f1767.js":7308===e?"web/chunks/7308.e4292e75.js":53297===e?"chunks/"+e+".a3bee52c.js":71475===e?"chunks/"+e+".db838172.js":1854===e?"chunks/1854.9b4b0c68.js":18254===e?"chunks/"+e+".0ac520ae.js":92398===e?"chunks/"+e+".18cb85f5.js":{12039:"web/chunks/videoplayer-interactive",36834:"web/chunks/sticker-lib"}[e]+"."+{12039:"2e35aad6",36834:"31bb0b4a"}[e]+".js",a.miniCssF=e=>({5157:1,59727:1}[e]?"web/chunks/0c110bf9.css":25394===e?"web/chunks/6a66a172.css":75980===e?"web/chunks/5bbee2c9.css":57468===e?"web/chunks/122e7a6e.css":97066===e?"web/chunks/68f9f3a8.css":7103===e?"web/chunks/3bdfe57e.css":37211===e?"web/chunks/3318c635.css":39457===e?"web/chunks/d9a18422.css":78177===e?"web/chunks/205d0569.css":34757===e?"web/chunks/f10155d6.css":67724===e?"web/chunks/3c048aa6.css":22854===e?"web/chunks/70c35bc4.css":{30271:1,31286:1}[e]?"web/chunks/f89919fd.css":92846===e?"web/chunks/83ceb5be.css":72491===e?"web/chunks/de731494.css":36834===e?"web/chunks/sticker-lib.c8405d18.css":void 0),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},a.l=(e,t,n,i)=>{if(s[e])s[e].push(t);else{var r,c;if(void 0!==n)for(var o=document.getElementsByTagName("script"),h=0;h<o.length;h++){var d=o[h];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")=="vk:"+n){r=d;break}}r||(c=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),s[e]=[t];var u=(t,n)=>{r.onerror=r.onload=null,clearTimeout(l);var i=s[e];if(delete s[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},l=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),c&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/dist/",i=e=>new Promise(((t,n)=>{var s=a.miniCssF(e),i=a.p+s;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var i=(c=n[s]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(i===e||i===t))return c}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){var c;if((i=(c=r[s]).getAttribute("data-href"))===e||i===t)return c}})(s,i))return t();((e,t,n,s)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=r=>{if(i.onerror=i.onload=null,"load"===r.type)n();else{var c=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.href||t,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.type=c,a.request=o,i.parentNode.removeChild(i),s(a)}},i.href=t,document.head.appendChild(i)})(e,i,t,n)})),r={54346:0},a.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{5157:1,7103:1,22854:1,25394:1,30271:1,31286:1,34757:1,36834:1,37211:1,39457:1,57468:1,59727:1,67724:1,72491:1,75980:1,78177:1,92846:1,97066:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{a.b=document.baseURI||self.location.href;var e={54346:0};a.f.j=(t,n)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise(((n,i)=>s=e[t]=[n,i]));n.push(s[2]=i);var r=a.p+a.u(t),c=new Error;a.l(r,(n=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,s[1](c)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[r,c,o]=n,h=0;if(r.some((t=>0!==e[t]))){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(o)var d=o(a)}for(t&&t(n);h<r.length;h++)i=r[h],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkvkweb=self.webpackChunkvkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var h=a.O(void 0,[213,83737,2067,20795,57451,5038,71610,95167,75934,83271,250],(()=>a(706434)));h=a.O(h)})();