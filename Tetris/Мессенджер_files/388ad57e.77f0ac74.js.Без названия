"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[83271],{995440:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"LottiePlayer-module__wrapper--WKJe6",wrapperClickable:"LottiePlayer-module__wrapperClickable--xT2Sp"}},541686:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"BackgroundLayer-module__wrapper--PKORq"}},622135:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"GradientLayer-module__wrapper--uNLXZ"}},559081:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"PlayBackArea-module__wrapper--SITxd",area:"PlayBackArea-module__area--oyypB"}},68743:(e,t,n)=>{n(38672)},433581:(e,t,n)=>{n.d(t,{observer:()=>s.observer});n(809991);var o,r=n(321645),i=n(356158),a=(n(38672),n(391367),n(992449)),s=n(350666);n(68743),n(764947),n(433579),n(548495);(0,i.observerBatching)(r.unstable_batchedUpdates);o=a.observerFinalizationRegistry.finalizeAllImmediately},350666:(e,t,n)=>{n.d(t,{observer:()=>c});var o=n(667294),r=n(391367),i=n(38672),a="function"==typeof Symbol&&Symbol.for,s=a?Symbol.for("react.forward_ref"):"function"==typeof o.forwardRef&&(0,o.forwardRef)((function(e){return null})).$$typeof,l=a?Symbol.for("react.memo"):"function"==typeof o.memo&&(0,o.memo)((function(e){return null})).$$typeof;function c(e,t){var n;if(l&&e.$$typeof===l)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if((0,r.isUsingStaticRendering)())return e;var a=null!==(n=null==t?void 0:t.forwardRef)&&void 0!==n&&n,c=e,u=e.displayName||e.name;if(s&&e.$$typeof===s&&(a=!0,"function"!=typeof(c=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var d,y,m=function(e,t){return(0,i.useObserver)((function(){return c(e,t)}),u)};return m.displayName=e.displayName,Object.defineProperty(m,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(m.contextTypes=e.contextTypes),a&&(m=(0,o.forwardRef)(m)),m=(0,o.memo)(m),d=e,y=m,Object.keys(d).forEach((function(e){p[e]||Object.defineProperty(y,e,Object.getOwnPropertyDescriptor(d,e))})),m}var p={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0}},391367:(e,t,n)=>{n.d(t,{enableStaticRendering:()=>r,isUsingStaticRendering:()=>i});var o=!1;function r(e){o=e}function i(){return o}},548495:(e,t,n)=>{n.d(t,{useAsObservableSource:()=>a});var o=n(168949),r=n(667294),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a};function a(e){var t=i((0,r.useState)((function(){return(0,o.observable)(e,{},{deep:!1})})),1)[0];return(0,o.runInAction)((function(){Object.assign(t,e)})),t}},764947:(e,t,n)=>{n(168949),n(667294)},433579:(e,t,n)=>{n(168949),n(667294),n(548495)},38672:(e,t,n)=>{n.d(t,{useObserver:()=>u});var o=n(168949),r=n(667294),i=n(903821),a=n(391367),s=n(992449),l=n(61688),c=function(){};function p(e){e.reaction=new o.Reaction("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}function u(e,t){if(void 0===t&&(t="observed"),(0,a.isUsingStaticRendering)())return e();var n=r.useRef(null);if(!n.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return s.observerFinalizationRegistry.unregister(o),o.onStoreChange=e,o.reaction||(p(o),o.stateVersion=Symbol()),function(){var e;o.onStoreChange=null,null===(e=o.reaction)||void 0===e||e.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};n.current=o}var u,d,y=n.current;if(y.reaction||(p(y),s.observerFinalizationRegistry.register(n,y,y)),r.useDebugValue(y.reaction,i.printDebugValue),(0,l.useSyncExternalStore)(y.subscribe,y.getSnapshot,c),y.reaction.track((function(){try{u=e()}catch(e){d=e}})),d)throw d;return u}},146325:(e,t,n)=>{n.d(t,{UniversalFinalizationRegistry:()=>r});var o=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(o,r){n-o.registeredAt>=e&&(t.finalize(o.value),t.registrations.delete(r))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),r="undefined"!=typeof FinalizationRegistry?FinalizationRegistry:o},809991:(e,t,n)=>{var o=n(168949);if(!n(667294).useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!o.makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available")},356158:(e,t,n)=>{n.d(t,{observerBatching:()=>i});var o=n(168949);function r(e){e()}function i(e){e||(e=r),(0,o.configure)({reactionScheduler:e})}},992449:(e,t,n)=>{n.d(t,{observerFinalizationRegistry:()=>o});var o=new(n(146325).UniversalFinalizationRegistry)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null}))},903821:(e,t,n)=>{n.d(t,{printDebugValue:()=>r});var o=n(168949);function r(e){return(0,o.getDependencyTree)(e)}},321645:(e,t,n)=>{n.d(t,{unstable_batchedUpdates:()=>o.unstable_batchedUpdates});var o=n(973935)},232055:(e,t,n)=>{n.d(t,{AnimationLayer:()=>s});var o=n(785893),r=n(667294),i=n(282901),a=n(147535);const s=({layer:e,animationState:t,onAnimationPlayBackAreaLoaded:n,onAnimationPlayBackAreaFinished:s,...l})=>{const c=(0,i.isMainAnimationLayout)(e),[p,u]=(0,r.useState)(!1);return p?null:(0,o.jsx)(o.Fragment,{children:c&&(0,o.jsx)(a.MainAnimationLayout,{layer:e,onFirstFrameRender:()=>{t.markStateAsPlaying()},onAnimationLoaded:()=>{n(),t.markStateAsLoaded()},onLayerLoopCompleted:()=>{p||(s(),t.markStateAsFinished(),u(!0))},...l})})}},392231:(e,t,n)=>{n.d(t,{LottiePlayer:()=>y});var o=n(785893),r=n(168949),i=n(433581),a=n(659397),s=n(571309),l=n(667294),c=n(918414),p=n(282901),u=n(561964),d=n(995440);const y=(0,i.observer)((({layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:y})=>{const{popupStore:m}=(0,u.usePopupStickerWithError)(),f=(0,l.useRef)(0),P=(0,l.useRef)(!1),{isPlaying:h,onAnimationClick:E,lottiePlayer:{options:A}}=m,{onLottiePlayerError:L}=m.errorHandlers,{lottieContainerRef:S,lottiePlayerRef:_,lottieLoaded:g,lottieRendered:b,lottieErrorMessage:v}=(0,s.useLottie)({group:c.POPUP_LOTTIE_GROUP,animationUrl:e.url,...A},{play:h}),T=()=>{P.current||(y(),P.current=!0)};return(0,l.useEffect)((()=>{const e=_.current;e&&e.setOptions(A)}),[A]),(0,l.useEffect)((()=>{v&&(e=>{L?.(e),T()})(v)}),[v,L]),(0,l.useEffect)((()=>{const e=_.current;if(e)return n&&e.addEventListener("ready",n,{once:!0}),i&&e.addEventListener("firstFrame",i,{once:!0}),()=>{i&&e.removeEventListener("firstFrame",i),n&&e.removeEventListener("ready",n)}}),[g]),(0,l.useEffect)((()=>{const e=_.current;if(e)return e.addEventListener("destroy",T,{once:!0}),()=>{P.current&&e.removeEventListener("destroy",T)}}),[b]),(0,l.useEffect)((()=>{const t=_.current;if(!t)return;const n=(0,p.getAnimationLayerLoopsLimit)(e),o=()=>{if(f.current+=1,f.current===n)return T(),void t.removeEventListener("loopComplete",o)};return t.addEventListener("loopComplete",o),()=>{t.removeEventListener("loopComplete",o)}}),[g]),(0,o.jsx)("div",{onClick:e=>{E?.(e)},className:(0,a.classNames)(d.default.wrapper,{[d.default.wrapperClickable]:Boolean(E)&&A.speed!==c.SPEED_ON_DESTROY}),style:(0,r.toJS)(t),ref:S})}))},147535:(e,t,n)=>{n.d(t,{MainAnimationLayout:()=>i});var o=n(785893),r=n(392231);const i=({layer:e,popUpLayerStyle:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:a})=>(0,o.jsx)(r.LottiePlayer,{layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:a})},976676:(e,t,n)=>{n.d(t,{NonAnimationLayer:()=>l});var o=n(785893),r=n(667294),i=n(282901),a=n(494826),s=n(320492);const l=({layer:e,parentState:t,popUpLayerStyle:n})=>{const l=(0,i.isGradientLayer)(e),c=(0,i.isBackgroundLayer)(e),[p,u]=(0,r.useState)(!t);return(0,r.useEffect)((()=>{if(!t)return;const e=()=>{u(!1)},n=()=>{u(!0)};return t.listenable.once("onPlaying",n),t.listenable.once("onFinished",e),()=>{t.listenable.off("onPlaying",n),t.listenable.off("onFinished",e)}}),[]),p?(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsx)(a.GradientLayer,{popUpLayerStyle:n}),c&&(0,o.jsx)(s.BackgroundLayer,{popUpLayerStyle:n})]}):null}},320492:(e,t,n)=>{n.d(t,{BackgroundLayer:()=>i});var o=n(785893),r=n(541686);const i=({popUpLayerStyle:e})=>(0,o.jsx)("div",{className:r.default.wrapper,style:e})},494826:(e,t,n)=>{n.d(t,{GradientLayer:()=>i});var o=n(785893),r=n(622135);const i=({popUpLayerStyle:e})=>(0,o.jsx)("div",{style:e,className:r.default.wrapper})},993219:(e,t,n)=>{n.d(t,{PlayBackArea:()=>l});var o=n(785893),r=n(232055),i=n(976676),a=n(282901),s=n(559081);const l=({layer:e,popUpLayerStyle:t,animationState:n,onAnimationPlayBackAreaFinished:l,onAnimationPlayBackAreaLoaded:c,...p})=>{const u=(0,a.isAnimationLayer)(e);return(0,o.jsx)("div",{className:s.default.wrapper,...p,children:(0,o.jsxs)("div",{className:s.default.area,children:[u&&n&&(0,o.jsx)(r.AnimationLayer,{layer:e,animationState:n,popUpLayerStyle:t,onAnimationPlayBackAreaLoaded:c,onAnimationPlayBackAreaFinished:l}),!u&&(0,o.jsx)(i.NonAnimationLayer,{layer:e,parentState:n,popUpLayerStyle:t})]})})}},613193:(e,t,n)=>{n.d(t,{PopUpPortal:()=>u});var o=n(785893),r=n(168949),i=n(973935),a=n(667294),s=n(433581),l=n(993219),c=n(561964),p=n(282901);const u=(0,s.observer)((({portalElement:e=document.body})=>{const t=(0,a.useRef)(0),n=(0,a.useRef)(0),{popupStore:s}=(0,c.usePopupStickerWithError)(),u=s.playBackAreasProps.filter((({layer:e})=>(0,p.isAnimationLayer)(e))).length,d=()=>{t.current++,t.current===u&&(t.current=0,n.current=0,s.onEndPlay?.())},y=()=>{n.current++,n.current===u&&s.startPlay()};if(!s.playBackAreasProps.length)return null;const m=(0,r.toJS)(s.playBackAreasProps).map((({style:e,popUpLayerStyle:t,...n},r)=>(0,o.jsx)(l.PlayBackArea,{onAnimationPlayBackAreaLoaded:y,onAnimationPlayBackAreaFinished:d,style:e,popUpLayerStyle:t,...n},r)));return(0,i.createPortal)(m,e||document.body)}))},984013:(e,t,n)=>{n.d(t,{PopupProvider:()=>s});var o=n(785893),r=n(667294),i=n(561964),a=n(436253);const s=({popupStore:e,children:t})=>{const n=(0,r.useRef)(e??new a.PopupStickerService);return(0,o.jsx)(i.PopupContext.Provider,{value:{popupStore:n.current},children:t})}},561964:(e,t,n)=>{n.d(t,{PopupContext:()=>r,usePopupSticker:()=>a,usePopupStickerWithError:()=>i});var o=n(667294);const r=(0,o.createContext)(null);function i(){const e=(0,o.useContext)(r);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function a(){const e=(0,o.useContext)(r);return null===e?{popupStore:void 0}:e}},918414:(e,t,n)=>{n.d(t,{CONTAINER_ID_DATA_DEFAULT_VALUE:()=>r,CONTAINER_ID_DATA_PROPERTY:()=>a,ConflictActionsTypes:()=>T,CustomPopUpLayerTypes:()=>h,DEDUCTIBLE_DATA_PROPERTY:()=>l,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>c,DEFAULT_LOOP_LIMIT:()=>A,DEFAULT_PLAYER_OPTIONS:()=>m,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>p,DEFAULT_POSITION_X:()=>S,DEFAULT_POSITION_Y:()=>_,DEFAULT_SCALE_RATIO:()=>L,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>s,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>i,MIN_SIZE_FOR_PLAY:()=>b,MIN_SIZE_FOR_SCALE:()=>g,POPUP_LOTTIE_GROUP:()=>v,POPUP_POSITION_DEFAULT_VALUE:()=>d,POPUP_POSITION_PROPERTY:()=>u,PopUpLayerTypes:()=>P,PopUpPositionTypes:()=>E,SCREEN_MODIFICATOR:()=>y,SPEED_ON_DESTROY:()=>f});var o=n(461019);const r="common_container",i="body",a="data-popup-sticker-container-id",s="data-popup-sticker-full-screen-container",l="data-popup-sticker-deductible",c="data-popup-sticker-deductible-full-screen",p="data-popup-sticker-use-common",u="data-popup-sticker-position",d="fixed",y="screen",m={speed:1,loop:!0,autoplay:!1,cache:!0,lazyLoading:!0,direction:o.LottiePlayerDirection.FORWARD,strictCache:!0},f=3,P={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},h={Background:"background"},E={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},A=1,L=1,S="center",_="middle",g=384,b=64,v="Popup",T={ChangeModificator:"changeModificator",DontShow:"dontShow"}},838150:(e,t,n)=>{n.d(t,{AnimationState:()=>u});var o=n(570912),r=n(615816),i=n(911309);const a="preparing",s="loaded",l="playing",c="finished";var p=(0,r._)("_status");class u extends i.Emitter{get status(){return(0,o._)(this,p)[p]}constructor(){super(),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,o._)(this,p)[p]=a,this.markStateAsLoaded=()=>{(0,o._)(this,p)[p]=s,this.emit("onLoaded")},this.markStateAsPlaying=()=>{(0,o._)(this,p)[p]=l,this.emit("onPlaying")},this.markStateAsFinished=()=>{(0,o._)(this,p)[p]=c,this.emit("onFinished")}}}},677564:(e,t,n)=>{n.d(t,{checkPositionConflict:()=>a});var o=n(282901),r=n(932352),i=n(918414);const a=(e,{bottom:t,right:n,top:a,left:s},l)=>{const c={...l};for(const p of e){if(p.popUpPositions&&!p.popUpPositions.includes((0,r.getPopUpPositionType)(l)))continue;const e=document.querySelector(p.blockSelector);if(!e)continue;const u=e.getBoundingClientRect();if(s<=u.right&&n>=u.left&&a<=u.bottom&&t>=u.top)return p.action===i.ConflictActionsTypes.DontShow?null:(0,o.changeLayerPosition)(c)}return c}},68769:(e,t,n)=>{n.d(t,{createDestroyListeners:()=>o,setDestroyListeners:()=>r});const o=e=>{const t=e=>{document.removeEventListener("wheel",e),document.removeEventListener("touchmove",e),window.removeEventListener("resize",e)},n=()=>{t(n),e()};return{addDestroyListener:()=>{document.addEventListener("wheel",n,{once:!0}),document.addEventListener("touchmove",n,{once:!0}),window.addEventListener("resize",n,{once:!0})},removeDestroyListener:t.bind(void 0,n),handleDestroy:n}},r=(e,t)=>({...e,onEndPlay:()=>{t.removeDestroyListener(),e.onEndPlay?.()},onEndPrepare:n=>{n&&t.addDestroyListener(),e.onEndPrepare?.(n)},onAnimationClick:n=>{t.handleDestroy(),e.onAnimationClick?.(n)}})},963037:(e,t,n)=>{n.d(t,{getAnimationAreaStyle:()=>i});var o=n(918414),r=n(282901);const i=({width:e,height:t},n,i)=>{const a={...i},{position_y:s,position_x:l}=(0,r.getAnimationLayerPosition)(n),c=l.replace(o.SCREEN_MODIFICATOR,"").trim(),p=s.replace(o.SCREEN_MODIFICATOR,"").trim();return a.position="absolute","center"===c?(a.left=.5*e,a.transform="translateX(-50%)"):a.left="left"===c?0:e-parseInt(a.width),"middle"===p?(a.top=.5*t,a.transform="translateY(-50%)"):a.top="top"===p?0:t-parseInt(a.height),"middle"===p&&"center"===c&&(a.transform="translate(-50%, -50%)"),a}},115249:(e,t,n)=>{n.d(t,{getBasePropsForPlaybackAreas:()=>u});var o=n(838150),r=n(932352),i=n(233520),a=n(46234),s=n(963037),l=n(677564),c=n(282901);function p(e,t,n,u){if((0,c.isGradientLayer)(e)){if(!u)return null;const t={...u.popUpLayerStyle,top:"unset",left:"unset",transform:"unset"};return{layer:e,style:u.style,animationState:u.animationState,popUpLayerStyle:(0,a.getGradientAreaStyle)(e,t)}}const d=(0,r.getPopUpPositionType)(e),{playBackAreaStyle:y,topByViewport:m}=(0,i.getPlayBackAreaStyle)(d,t);if((0,c.isBackgroundLayer)(e))return{layer:e,style:y,popUpLayerStyle:e.style};const f=new o.AnimationState;if((0,c.isBackgroundAnimationLayout)(e))return null;const P=parseInt(y.width),h=parseInt(y.height);let E=Math.min(P,h);const A=(0,c.getAnimationLayerScaleRatio)(e);if((0,c.isCanScale)(E)&&(E*=A),(0,c.isFullScreenLayer)(e)){const e=.5*Math.min(document.documentElement.clientHeight,document.documentElement.clientWidth);E>e&&(E=e)}if(!(0,c.isCanPlay)(E))return null;const L={height:E,width:E},S=(0,s.getAnimationAreaStyle)({width:P,height:h},e,L),_=m+parseInt(S.top),g=m+parseInt(S.left),b=_+E,v=g+E,T=(0,l.checkPositionConflict)(n,{top:_,left:g,bottom:b,right:v},e);return T?(0,c.checkPositionIsEqual)(e,T)?{animationState:f,layer:e,popUpLayerStyle:S,style:y}:p(T,t,[],null):null}const u=({layers:e,popUpElements:t,conflictBlocks:n})=>{const o=[...e].reverse(),r=[];let i=null;for(const e of o){const o=p(e,t,n,i);(0,c.isMainAnimationLayout)(e)&&(i=o),(0,c.isGradientLayer)(e)&&(i=null),o&&r.push(o)}return r.reverse(),r}},557189:(e,t,n)=>{n.d(t,{findFixedElement:()=>s,getDataAttrs:()=>r,getDeductibleDataAttrs:()=>a,getPopupElementsFromFixedElement:()=>c,getStringDataAttrs:()=>i});var o=n(918414);const r=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:n,popupStickerFullScreenContainer:r,popupStickerPosition:i=o.POPUP_POSITION_DEFAULT_VALUE}=e,a={[o.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[o.POPUP_POSITION_PROPERTY]:i,[o.CONTAINER_ID_DATA_PROPERTY]:n};return r&&(a[o.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=r),a},i=e=>{let t="";const n=r(e);return Object.entries(n).forEach((([e,n])=>{t+=`${e}='${n}' `})),t.trim()},a=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:n}=e,r={};return t&&(r[o.DEDUCTIBLE_DATA_PROPERTY]=t),n&&(r[o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=n),r},s=e=>e.closest(`[${o.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function l(e,t,n,r,i,a=null){let s=[...document.querySelectorAll(`[${t}=${r}]`)];switch(i&&(s=[...s,...document.querySelectorAll(`[${t}=${o.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),s.push(n),e){case"lower":case"parent":s=s.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":s=s.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const l=s.findIndex((e=>e===n));let c;switch(e){case"upper":case"parent":c=s[l-1]||null;break;case"lower":c=s[l+1]||null;break;default:c=s[0]||null}return c||a}const c=(e,t)=>{const{popupStickerContainerId:n,popupStickerPosition:r,popupStickerUseCommon:i}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:n=o.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:r=o.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:r,popupStickerUseCommon:t,popupStickerPosition:n}})(e);let a="true"===i;return{fixedElement:e,headerElement:l("upper",o.DEDUCTIBLE_DATA_PROPERTY,t,n,a),footerElement:l("lower",o.DEDUCTIBLE_DATA_PROPERTY,t,n,a),fullScreenElement:l("parent",o.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,n,a,document.body),fullScreenHeaderElement:l("upper",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,a),fullScreenFooterElement:l("lower",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,a),position:r}}},46234:(e,t,n)=>{n.d(t,{getGradientAreaStyle:()=>s});var o=n(918414);const r={bottom:"0deg",left:"90deg",top:"180deg",right:"270deg"},i="255, 255, 255",a=`radial-gradient(50.13% 50.13% at 50.13% 50.13%, rgba(${i}, 0.4) 0%, rgba(${i}, 0) 100%)`,s=({position:e},t)=>{const n={position:"absolute"},i=e.replace(`${o.SCREEN_MODIFICATOR} `,"");return"middle"===i?(n.top="50%",n.left="50%",n.transform="translate(-50%, -50%)",n.background=a,{...t,...n}):(["top","bottom"].includes(i)?n.width="100%":n.height="100%",n[i]=0,n["--gradient-deg"]=r[i]||r.top,{...t,...n})}},233520:(e,t,n)=>{n.d(t,{getPlayBackAreaStyle:()=>r});var o=n(918414);function r(e,{fullScreenHeaderElement:t,fullScreenFooterElement:n,fullScreenElement:r,fixedElement:i,footerElement:a,headerElement:s,position:l}){const c=e===o.PopUpPositionTypes.FullScreen,{top:p,left:u,bottom:d}=r.getBoundingClientRect(),y=c?r:i,{top:m,bottom:f,left:P,width:h}=y.getBoundingClientRect(),{bottom:E}=s?.getBoundingClientRect()||{bottom:-1/0},{bottom:A}=t?.getBoundingClientRect()||{bottom:-1/0},L=Math.max(E,m)<0,S=e===o.PopUpPositionTypes.TopFullScreen||L,_=!c&&!S,g=_?E:A,b=c?n:a,v=b?.getClientRects().length,{top:T}=b&&v?b.getBoundingClientRect():{top:1/0};let R=0;"absolute"===l&&(R=-p);const O=[];g>0&&O.push(R+g),_&&m>=0&&O.push(R+m),p<0&&O.push(R);const C=Math.max(...O,0),k=r===document.body?document.documentElement.clientHeight:function(e){return Math.min(e,document.documentElement.clientHeight)}(d),F=[R+k,y===document.body?document.documentElement.clientHeight:R+f,R+T],D=Math.min(...F)-C,I=function(e){return Math.min(e,document.documentElement.clientWidth)}(h),U=P-u,w={position:l};w.top=`${C}px`,w.left=`${U}px`,w.width=`${I}px`,w.height=`${D}px`;return{playBackAreaStyle:w,topByViewport:C-R}}},932352:(e,t,n)=>{n.d(t,{getPopUpPositionType:()=>i});var o=n(282901),r=n(918414);function i(e){return(0,o.isFullScreenLayer)(e)?r.PopUpPositionTypes.FullScreen:(0,o.isTopFullScreenLayer)(e)?r.PopUpPositionTypes.TopFullScreen:r.PopUpPositionTypes.Fixed}},282901:(e,t,n)=>{n.d(t,{changeLayerPosition:()=>f,checkPositionIsEqual:()=>P,getAnimationLayerLoopsLimit:()=>i,getAnimationLayerPosition:()=>r,getAnimationLayerScaleRatio:()=>a,isAnimationLayer:()=>u,isBackgroundAnimationLayout:()=>c,isBackgroundLayer:()=>l,isCanPlay:()=>E,isCanScale:()=>h,isFullOrPartiallyFullScreenLayer:()=>m,isFullScreenLayer:()=>y,isGradientLayer:()=>s,isMainAnimationLayout:()=>p,isTopFullScreenLayer:()=>d});var o=n(918414);const r=e=>{const{position_x:t,position_y:n}=e;return{position_x:t||o.DEFAULT_POSITION_X,position_y:n||o.DEFAULT_POSITION_Y}},i=e=>{const{loops_limit:t=o.DEFAULT_LOOP_LIMIT}=e;return t},a=e=>{const{scale_ratio:t=o.DEFAULT_SCALE_RATIO}=e;return t},s=e=>e.type===o.PopUpLayerTypes.Gradient,l=e=>e.type===o.CustomPopUpLayerTypes.Background,c=e=>e.type===o.PopUpLayerTypes.FullScreen,p=e=>e.type===o.PopUpLayerTypes.Fixed,u=e=>c(e)||p(e),d=e=>{if(!p(e))return!1;const{position_x:t,position_y:n}=r(e);return!t.includes(o.SCREEN_MODIFICATOR)&&n===`${o.SCREEN_MODIFICATOR} top`},y=e=>{if(l(e)||c(e))return!0;if(s(e))return e.position.includes(o.SCREEN_MODIFICATOR);if(p(e)){const{position_x:t,position_y:n}=r(e);return t.includes(o.SCREEN_MODIFICATOR)&&n.includes(o.SCREEN_MODIFICATOR)}return!1},m=e=>y(e)||d(e),f=e=>{const{position_x:t,position_y:n}=r(e);return m(e)?{...e,position_x:t.replace(`${o.SCREEN_MODIFICATOR} `,""),position_y:n.replace(`${o.SCREEN_MODIFICATOR} `,"")}:{...e,position_x:`${o.SCREEN_MODIFICATOR} ${t}`,position_y:`${o.SCREEN_MODIFICATOR} ${n}`}},P=(e,t)=>u(e)&&u(t)?t.position_y===e.position_y&&e.position_x===t.position_x:!(!s(e)||!s(t))&&t.position===e.position,h=e=>e>=o.MIN_SIZE_FOR_SCALE,E=e=>e>=o.MIN_SIZE_FOR_PLAY},805730:(e,t,n)=>{n.d(t,{LottiePlayer:()=>i});var o=n(168949),r=n(918414);class i{constructor(){this.options={...r.DEFAULT_PLAYER_OPTIONS},this.setOptions=e=>{this.options=e},this.setOption=({key:e,value:t})=>{typeof this.options[e]==typeof t&&(this.options={...this.options,[e]:t})},this.reset=()=>{this.options={...r.DEFAULT_PLAYER_OPTIONS}},(0,o.makeAutoObservable)(this)}}},436253:(e,t,n)=>{n.d(t,{PopupStickerService:()=>p});var o=n(168949),r=n(805730),i=n(889660),a=n(68769),s=n(115249),l=n(557189),c=n(918414);class p{constructor(){this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onAnimationClick=null,this.onEndPlay=null,this.onEndPrepare=null,this.errorHandlers={},this.conflictBlocks=new i.PositionConflict,this.lottiePlayer=new r.LottiePlayer,this.setLottiePlayerOptions=e=>{this.isPlaying&&this.lottiePlayer.setOptions(e)},this.setLottiePlayerOption=e=>{this.isPlaying&&this.lottiePlayer.setOption(e)},this.preparePreview=e=>{const t=e.layers.slice();t.unshift({type:c.CustomPopUpLayerTypes.Background,style:{opacity:"0.9",background:"#FFF"}}),this.prepare({...e,layers:t})},this.prepareWithDestroyEvent=e=>{const t=(0,a.createDestroyListeners)(this.destroyBySpeedIncrement.bind(this));this.prepare((0,a.setDestroyListeners)(e,t))},this.prepare=({layers:e,stickerElement:t,onEndPrepare:n=null,onEndPlay:o=null,onAnimationClick:r=null,errorHandlers:i,mountNode:a})=>{if(this.isPlaying||this.isPreparing)throw n?.(!1),new Error("Pop-up stickers are already playing");this.isPreparing=!0;const c=(0,l.findFixedElement)(t),p=(0,l.getPopupElementsFromFixedElement)(c,t),u=(0,s.getBasePropsForPlaybackAreas)({layers:e,popUpElements:p,conflictBlocks:this.conflictBlocks.blocks}),d=Boolean(u.length),y=()=>{this.reset(),o?.()};this.onEndPrepare=n,this.onEndPlay=y,this.onAnimationClick=r,d&&a?.(),this.playBackAreasProps=u,i&&(this.errorHandlers=i),d||(n?.(!1),y())},this.destroyBySpeedIncrement=()=>{this.setLottiePlayerOption({key:"speed",value:c.SPEED_ON_DESTROY})},this.destroyByRemove=()=>{this.onEndPlay?this.onEndPlay():this.reset()},this.startPlay=()=>{this.isPlaying=!0,this.isPreparing=!1,this.onEndPrepare?.(!0)},this.reset=()=>{this.isPlaying=!1,this.isPreparing=!1,this.playBackAreasProps=[],this.onEndPlay=null,this.onAnimationClick=null,this.onEndPrepare=null,this.errorHandlers={},this.lottiePlayer.reset()},(0,o.makeAutoObservable)(this)}}},889660:(e,t,n)=>{n.d(t,{PositionConflict:()=>r});var o=n(168949);class r{constructor(){this.blocks=[],this.addConflictBlock=e=>{this.blocks.push(e)},this.removeConflictBlockBySelector=e=>{this.blocks.filter((t=>t.blockSelector===e))},(0,o.makeAutoObservable)(this)}}}}]);try{stManager.done("dist/web/chunks/388ad57e.77f0ac74.js")}catch(e){}